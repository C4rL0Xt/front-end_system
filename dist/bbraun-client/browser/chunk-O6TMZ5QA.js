import{a as D,b as qe}from"./chunk-J2YYJQHT.js";import{a as mt}from"./chunk-QN2VTCX5.js";import{A as at,Aa as Be,B as ge,Ba as $e,C as lt,Ca as Qe,D as _e,E as Pt,F as he,G as xe,H as be,I as yt,J as Et,K as Mt,L as wt,M as Ot,N as It,O as Ft,P as Tt,Q as Dt,R as kt,S as Ce,T as ut,U as dt,V as ve,W as Se,X as Pe,Y as Vt,Z as ye,ba as Ee,ca as A,da as Nt,ea as Me,fa as B,ga as we,h as ne,ha as Oe,ia as Ie,ja as Fe,n as J,o as re,oa as Te,pa as De,q as j,qa as ke,r as G,ra as Ve,sa as ct,ta as Ne,u as ae,ua as je,v as rt,va as Ge,w as fe,wa as Le,xa as Re,ya as ze,za as Ae}from"./chunk-QKGNWLHQ.js";import"./chunk-RGNDWIHZ.js";import{b as L,d as p,f as R,g as X,h as tt,j as le,k as et,l as it,m as St,n as de,o as ot,r as nt,s as ce,t as me,u as se,v as z,w as pe,x as ue,y as qt,z as He}from"./chunk-4FASO6NX.js";import{d as K}from"./chunk-VZNS2HMS.js";import{p as Rt}from"./chunk-CFYZAOOI.js";import{$b as Z,Ab as Yt,Bb as Ut,Cb as o,Db as i,Ea as ht,Eb as u,Fb as y,Gb as E,Hb as V,Ib as w,Lb as h,Nb as _,Qb as I,Rc as te,Sb as $,Sc as q,Tb as H,Tc as U,Ub as Q,Uc as Ct,Vb as F,Vc as ee,W as Qt,Wb as a,X as Zt,Xb as P,Xc as vt,Yb as b,Yc as ie,Za as d,Zc as oe,_a as S,_b as Kt,a as Bt,ac as W,b as $t,bc as Y,da as ft,ec as xt,gc as Jt,ic as T,jc as bt,kc as pt,lc as Xt,mc as N,na as M,oa as gt,qb as s,sb as m,ua as _t,v as Ht,va as C,wa as v,zb as Wt}from"./chunk-5A5ZOIWX.js";var Ze=(()=>{let n=class n{};n.\u0275fac=function(l){return new(l||n)},n.\u0275cmp=M({type:n,selectors:[["app-home-producto"]],decls:2,vars:0,template:function(l,c){l&1&&(o(0,"p"),a(1,"home-producto works!"),i())}});let t=n;return t})();function mi(t,n){if(t&1&&(o(0,"mat-option",21),a(1),i()),t&2){let r=n.$implicit;m("value",r),d(),b(" ",r," ")}}function si(t,n){if(t&1&&(o(0,"mat-option",21),a(1),i()),t&2){let r=n.$implicit;m("value",r),d(),b(" ",r," ")}}function pi(t,n){if(t&1&&(o(0,"mat-option",21),a(1),i()),t&2){let r=n.$implicit;m("value",r),d(),b(" ",r," ")}}function ui(t,n){if(t&1&&(o(0,"mat-option",21),a(1),i()),t&2){let r=n.$implicit;m("value",r),d(),b(" ",r," ")}}function fi(t,n){if(t&1&&(o(0,"mat-option",21),a(1),i()),t&2){let r=n.$implicit;m("value",r),d(),b(" ",r," ")}}function gi(t,n){if(t&1&&(o(0,"div",22)(1,"mat-card",23)(2,"mat-card-title"),a(3),i(),o(4,"form",24)(5,"mat-form-field",4)(6,"mat-label"),a(7,"Codigo Lote"),i(),u(8,"input",25),i(),o(9,"mat-form-field",4)(10,"mat-label"),a(11,"Estado Operativo"),i(),o(12,"mat-select",26),s(13,pi,2,2,"mat-option",7),i()(),o(14,"mat-form-field",4)(15,"mat-label"),a(16,"Estado Disponibilidad"),i(),o(17,"mat-select",27),s(18,ui,2,2,"mat-option",7),i()(),o(19,"mat-form-field",4)(20,"mat-label"),a(21,"Estado Seguridad"),i(),o(22,"mat-select",28),s(23,fi,2,2,"mat-option",7),i()(),o(24,"mat-form-field",4)(25,"mat-label"),a(26,"Nombre de Producto"),i(),u(27,"input",29),i(),o(28,"mat-form-field",4)(29,"mat-label"),a(30,"Stock"),i(),u(31,"input",30),i(),o(32,"mat-form-field",4)(33,"mat-label"),a(34,"Fecha de vencimiento"),i(),u(35,"input",31),i()()()()),t&2){let r=n.$implicit,e=n.index,l=_();d(3),b("Lote ",e+1,""),d(),m("formGroup",r),d(9),m("ngForOf",l.estadoOperativo),d(5),m("ngForOf",l.estadoDisponibilidad),d(5),m("ngForOf",l.estadoSeguridad),d(4),m("value",l.productForm.get("name").value)}}var ti=(()=>{let n=class n{constructor(e,l,c,f,x){this.fb=e,this.snackBar=l,this.productService=c,this.documentService=f,this.profileService=x,this.lots=[],this.estadoOperativo=[],this.estadoDisponibilidad=[],this.estadoSeguridad=[],this.categories=[],this.types=[],this.productForm=this.fb.group({codigo:[{value:"",disabled:!0}],name:["",p.required],category:["",p.required],type:["",p.required],price:["",[p.required,p.min(0)]],weight:["",[p.required,p.min(0)]],presentation:["",p.required],description:["",p.required]})}ngOnInit(){this.loadAllCategories(),this.loadAllTypes(),this.loadLastCode(),this.loadAllStates()}loadLastCode(){this.productService.getLastCode$().subscribe(e=>{this.productForm.patchValue({codigo:e}),this.generateCode(e),console.log("ultim Code:",e)}),this.productForm.patchValue({codigo:this.lastCode})}generateCode(e){let c=parseInt(e.substring(e.length-3))+1;this.productForm.patchValue({codigo:`PRO${c}`}),this.productForm.get("codigo").disable()}loadAllCategories(){this.productService.getAllCategories$().subscribe(e=>{this.categories=e})}loadAllTypes(){this.productService.getAllForms$().subscribe(e=>{this.types=e})}loadAllStates(){this.productService.getAllEstadoDisponibilidad$().subscribe(e=>{this.estadoDisponibilidad=e}),this.productService.getAllEstadoOperativo$().subscribe(e=>{this.estadoOperativo=e}),this.productService.getAllEstadoSeguridad$().subscribe(e=>{this.estadoSeguridad=e})}onSubmit(){this.productForm.valid&&console.log("Producto guardado existosamente:",this.productForm.getRawValue())}generateLots(){this.lots=[];let e=Math.ceil(this.totalQuantity/200),l=this.productForm.get("name").value;this.productService.getLastCodeLote$().subscribe(c=>{let f=this.extractNumberFromCode(c)+1;for(let x=0;x<e;x++){let g=x===e-1&&this.totalQuantity%200!==0?this.totalQuantity%200:200,O=this.generateNextCode(f);this.lots.push(this.fb.group({code:[{value:O,disabled:!0},p.required],operationalStatus:["",p.required],availabilityStatus:["",p.required],securityStatus:["",p.required],productName:[{value:l,disabled:!0}],quantity:[{value:g,disabled:!0},[p.required,p.min(1),p.max(200)]],expirationDate:["",p.required]})),f++}})}extractNumberFromCode(e){return parseInt(e.replace(/^L0*/,""),10)}generateNextCode(e){return`L${e.toString().padStart(5,"0")}`}saveEverything(){if(this.productForm.valid&&this.lots.every(e=>e.valid)){let e=this.productForm.getRawValue(),l=this.lots.map(g=>g.getRawValue()),c={code:e.codigo,category:e.category,type:e.type,name:e.name,price:e.price,concentracion:e.concentracion,presentation:e.presentation,description:e.description,lots:l.map(g=>({code:g.code,operativeStatus:g.operationalStatus,disponibilityState:g.availabilityStatus,securityState:g.securityStatus,stock:g.quantity,expiredDate:g.expirationDate}))},f={idhoja:"a",idempleado:this.profileService.getIdEmpleado(),fechaingreso:new Date,detalles:[{idproducto:e.codigo,cantidad:this.totalQuantity}]},x=!1;this.productService.createProduct(c).subscribe(g=>{console.log("Product Saved successfully:",g),x=!0,x&&this.documentService.createHojaIngreso(f).subscribe(O=>{console.log("Hoja de ingreso guardada exitosamente:",O),this.snackBar.open("Productos y lotes guardados exitosamente!","Cerrar",{duration:3e3,panelClass:["snack-bar-success"],verticalPosition:"top",horizontalPosition:"center"}),this.productForm.reset(),this.loadLastCode(),this.lots=[],this.totalQuantity=void 0},O=>{console.error("Error al guardar la hoja de ingreso",O),this.snackBar.open("Error al guardar la hoja de ingreso","Cerrar",{duration:3e3})})},g=>{console.error("Error al guardar el producto y los lotes",g),this.snackBar.open("Error al guardar el producto y los lotes","Cerrar",{duration:3e3})})}else this.snackBar.open("Por favor completa el formulario correctamente","Cerrar",{duration:2e3})}cancel(){this.productForm.reset(),this.lots=[]}};n.\u0275fac=function(l){return new(l||n)(S(z),S(ct),S(D),S(mt),S(K))},n.\u0275cmp=M({type:n,selectors:[["app-producto-form"]],decls:52,vars:5,consts:[[1,"product-form-card"],[1,"product-form-grid",3,"ngSubmit","formGroup"],["appearance","fill",1,"full-width"],["matInput","","formControlName","codigo"],["appearance","fill"],["matInput","","formControlName","name"],["formControlName","category"],[3,"value",4,"ngFor","ngForOf"],["formControlName","type"],["matInput","","formControlName","price","type","number"],["matInput","","formControlName","weight"],["matInput","","formControlName","presentation"],["matInput","","formControlName","description"],[1,"form-actions"],[1,"lot-section"],["matInput","","type","number",3,"ngModelChange","ngModel"],["mat-raised-button","","color","accent",3,"click"],["class","lot-form",4,"ngFor","ngForOf"],[1,"action-buttons"],["mat-raised-button","","color","primary",3,"click"],["mat-raised-button","","color","warn",3,"click"],[3,"value"],[1,"lot-form"],[1,"lot-card"],[3,"formGroup"],["matInput","","formControlName","code"],["formControlName","operationalStatus"],["formControlName","availabilityStatus"],["formControlName","securityStatus"],["matInput","","disabled","",3,"value"],["matInput","","formControlName","quantity","type","number"],["matInput","","formControlName","expirationDate","type","date"]],template:function(l,c){l&1&&(o(0,"mat-card",0)(1,"mat-card-title"),a(2,"Registrar Producto"),i(),o(3,"form",1),h("ngSubmit",function(){return c.onSubmit()}),o(4,"mat-form-field",2)(5,"mat-label"),a(6,"Codigo"),i(),u(7,"input",3),i(),o(8,"mat-form-field",4)(9,"mat-label"),a(10,"Nombre Producto"),i(),u(11,"input",5),i(),o(12,"mat-form-field",4)(13,"mat-label"),a(14,"Categoria"),i(),o(15,"mat-select",6),s(16,mi,2,2,"mat-option",7),i()(),o(17,"mat-form-field",4)(18,"mat-label"),a(19,"Tipo"),i(),o(20,"mat-select",8),s(21,si,2,2,"mat-option",7),i()(),o(22,"mat-form-field",4)(23,"mat-label"),a(24,"Precio"),i(),u(25,"input",9),i(),o(26,"mat-form-field",4)(27,"mat-label"),a(28,"Concentracion"),i(),u(29,"input",10),i(),o(30,"mat-form-field",4)(31,"mat-label"),a(32,"Presentacion"),i(),u(33,"input",11),i(),o(34,"mat-form-field",2)(35,"mat-label"),a(36,"Descripcion"),i(),u(37,"textarea",12),i(),u(38,"div",13),i(),o(39,"div",14)(40,"mat-form-field",4)(41,"mat-label"),a(42,"Cantidad Total"),i(),o(43,"input",15),Y("ngModelChange",function(x){return W(c.totalQuantity,x)||(c.totalQuantity=x),x}),i()(),o(44,"button",16),h("click",function(){return c.generateLots()}),a(45,"Generar Lotes"),i()(),s(46,gi,36,6,"div",17),o(47,"div",18)(48,"button",19),h("click",function(){return c.saveEverything()}),a(49,"Guardar todo"),i(),o(50,"button",20),h("click",function(){return c.cancel()}),a(51,"Cancelar"),i()()()),l&2&&(d(3),m("formGroup",c.productForm),d(13),m("ngForOf",c.categories),d(5),m("ngForOf",c.types),d(22),Z("ngModel",c.totalQuantity),d(3),m("ngForOf",c.lots))},dependencies:[q,it,L,St,R,X,et,ot,nt,j,G,at,rt,J,lt,Pt,Vt],styles:[".product-form-card[_ngcontent-%COMP%]{width:100%;margin:20px auto;padding:20px;box-shadow:0 2px 10px #0000001a}.product-form-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(200px,1fr));gap:16px;width:100%}mat-form-field[_ngcontent-%COMP%]{width:100%}.full-width[_ngcontent-%COMP%]{grid-column:span 2}.form-actions[_ngcontent-%COMP%]{grid-column:span 2;text-align:right}.lot-section[_ngcontent-%COMP%]{margin-top:20px;display:flex;align-items:center;gap:16px}.lot-form[_ngcontent-%COMP%]{margin-top:20px}.lot-card[_ngcontent-%COMP%]{margin-top:20px;padding:20px}.action-buttons[_ngcontent-%COMP%]{margin-top:20px;display:flex;justify-content:space-between}  .snack-bar-success{background-color:transparent!important;box-shadow:none!important}  .success-snack-bar{animation:_ngcontent-%COMP%_fadeIn .5s ease-out,fadeOut .5s ease-in 2.5s forwards}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(-20px)}to{opacity:1;transform:translateY(0)}}@keyframes _ngcontent-%COMP%_fadeOut{0%{opacity:1;transform:translateY(0)}to{opacity:0;transform:translateY(-20px)}}"]});let t=n;return t})();var vi=()=>[5,10,20],Si=(t,n)=>({"status-active":t,"status-inactive":n});function Pi(t,n){t&1&&(o(0,"th",15),a(1," Code "),i())}function yi(t,n){if(t&1&&(o(0,"td",16),a(1),i()),t&2){let r=n.$implicit;d(),b(" ",r.code," ")}}function Ei(t,n){t&1&&(o(0,"th",15),a(1," Operative Status "),i())}function Mi(t,n){if(t&1&&(o(0,"td",17),a(1),i()),t&2){let r=n.$implicit;m("ngClass",Jt(2,Si,r.operativeStatus==="Active",r.operativeStatus==="Inactive")),d(),b(" ",r.operativeStatus," ")}}function wi(t,n){t&1&&(o(0,"th",15),a(1," Disponibility State "),i())}function Oi(t,n){if(t&1&&(o(0,"td",16),a(1),i()),t&2){let r=n.$implicit;d(),b(" ",r.disponibilityState," ")}}function Ii(t,n){t&1&&(o(0,"th",15),a(1," Security State "),i())}function Fi(t,n){if(t&1&&(o(0,"td",16),a(1),i()),t&2){let r=n.$implicit;d(),b(" ",r.securityState," ")}}function Ti(t,n){t&1&&(o(0,"th",15),a(1," Stock "),i())}function Di(t,n){if(t&1&&(o(0,"td",16),a(1),i()),t&2){let r=n.$implicit;d(),b(" ",r.stock," ")}}function ki(t,n){t&1&&(o(0,"th",15),a(1," Expired Date "),i())}function Vi(t,n){if(t&1&&(o(0,"td",16),a(1),T(2,"date"),i()),t&2){let r=n.$implicit;d(),b(" ",pt(2,1,r.expiredDate,"mediumDate")," ")}}function Ni(t,n){t&1&&u(0,"tr",18)}function qi(t,n){t&1&&u(0,"tr",19)}var ei=(()=>{let n=class n{constructor(e,l){this.dialogRef=e,this.data=l,this.displayedColumns=["code","operativeStatus","disponibilityState","securityState","stock","expiredDate"]}ngOnInit(){this.dataSource=new ut(this.data),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort}ngOnChanges(e){e.data&&e.data.currentValue&&(this.dataSource.data=e.data.currentValue)}onNoClick(){this.dialogRef.close()}};n.\u0275fac=function(l){return new(l||n)(S(Oe),S(Ie))},n.\u0275cmp=M({type:n,selectors:[["app-lot-table-view"]],viewQuery:function(l,c){if(l&1&&($(B,5),$(A,5)),l&2){let f;H(f=Q())&&(c.paginator=f.first),H(f=Q())&&(c.sort=f.first)}},features:[_t],decls:26,vars:5,consts:[[1,"titulo"],[1,"mat-elevation-z8"],["mat-table","","matSort","",1,"full-width-table",3,"dataSource"],["matColumnDef","code"],["class","font-cabecera","mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["class","font-elemento","mat-cell","",4,"matCellDef"],["matColumnDef","operativeStatus"],["class","font-elemento","mat-cell","",3,"ngClass",4,"matCellDef"],["matColumnDef","disponibilityState"],["matColumnDef","securityState"],["matColumnDef","stock"],["matColumnDef","expiredDate"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","",3,"pageSizeOptions"],["mat-header-cell","","mat-sort-header","",1,"font-cabecera"],["mat-cell","",1,"font-elemento"],["mat-cell","",1,"font-elemento",3,"ngClass"],["mat-header-row",""],["mat-row",""]],template:function(l,c){l&1&&(o(0,"mat-card")(1,"mat-card-title",0),a(2,"Lotes"),i(),o(3,"div",1)(4,"table",2),y(5,3),s(6,Pi,2,0,"th",4)(7,yi,2,1,"td",5),E(),y(8,6),s(9,Ei,2,0,"th",4)(10,Mi,2,5,"td",7),E(),y(11,8),s(12,wi,2,0,"th",4)(13,Oi,2,1,"td",5),E(),y(14,9),s(15,Ii,2,0,"th",4)(16,Fi,2,1,"td",5),E(),y(17,10),s(18,Ti,2,0,"th",4)(19,Di,2,1,"td",5),E(),y(20,11),s(21,ki,2,0,"th",4)(22,Vi,3,4,"td",5),E(),s(23,Ni,1,0,"tr",12)(24,qi,1,0,"tr",13),i(),u(25,"mat-paginator",14),i()()),l&2&&(d(4),m("dataSource",c.dataSource),d(19),m("matHeaderRowDef",c.displayedColumns),d(),m("matRowDefColumns",c.displayedColumns),d(),m("pageSizeOptions",xt(4,vi)))},dependencies:[te,j,G,yt,Mt,Ft,wt,Et,Tt,Ot,It,Dt,kt,A,Nt,B,vt],styles:[".mat-card-title[_ngcontent-%COMP%]{font-size:1.5rem;color:#3f51b5;text-align:center}.full-width-table[_ngcontent-%COMP%]{width:100%;overflow:auto}.mat-elevation-z8[_ngcontent-%COMP%]{padding:16px}.status-active[_ngcontent-%COMP%]{color:#388e3c}.status-inactive[_ngcontent-%COMP%]{color:#d32f2f}.titulo[_ngcontent-%COMP%]{font-family:Kanit,sans-serif;padding:16px}.font-elemento[_ngcontent-%COMP%]{font-family:Courier Prime,monospace;font-weight:500;font-style:normal}.font-cabecera[_ngcontent-%COMP%]{font-family:Oxygen,sans-serif;font-weight:700;font-style:normal}"]});let t=n;return t})();var ji=()=>[5,10,20];function Gi(t,n){t&1&&(o(0,"th",20),a(1," Codigo "),i())}function Li(t,n){if(t&1&&(o(0,"td",21),a(1),i()),t&2){let r=n.$implicit;d(),b(" ",r.code," ")}}function Ri(t,n){t&1&&(o(0,"th",20),a(1," Nombre "),i())}function zi(t,n){if(t&1&&(o(0,"td",21),a(1),i()),t&2){let r=n.$implicit;d(),b(" ",r.name," ")}}function Ai(t,n){t&1&&(o(0,"th",20),a(1," Categoria "),i())}function Bi(t,n){if(t&1&&(o(0,"td",21),a(1),i()),t&2){let r=n.$implicit;d(),b(" ",r.category," ")}}function $i(t,n){t&1&&(o(0,"th",20),a(1," Tipo "),i())}function Hi(t,n){if(t&1&&(o(0,"td",21),a(1),i()),t&2){let r=n.$implicit;d(),b(" ",r.type," ")}}function Qi(t,n){t&1&&(o(0,"th",20),a(1," Precio "),i())}function Zi(t,n){if(t&1&&(o(0,"td",21),a(1),T(2,"currency"),i()),t&2){let r=n.$implicit;d(),b(" ",Xt(2,1,r.price,"PEN ","symbol","1.2-2")," ")}}function Wi(t,n){t&1&&(o(0,"th",20),a(1," Concentracion "),i())}function Yi(t,n){if(t&1&&(o(0,"td",21),a(1),i()),t&2){let r=n.$implicit;d(),b(" ",r.concentracion," ")}}function Ui(t,n){t&1&&(o(0,"th",20),a(1," Presentation "),i())}function Ki(t,n){if(t&1&&(o(0,"td",21),a(1),i()),t&2){let r=n.$implicit;d(),b(" ",r.presentation," ")}}function Ji(t,n){t&1&&(o(0,"th",20),a(1," Description "),i())}function Xi(t,n){if(t&1&&(o(0,"td",21),a(1),i()),t&2){let r=n.$implicit;d(),b(" ",r.description," ")}}function to(t,n){t&1&&(o(0,"th",22),a(1," Actions "),i())}function eo(t,n){if(t&1){let r=w();o(0,"td",23)(1,"button",24),h("click",function(){let l=C(r).$implicit,c=_();return v(c.showLots(l))}),o(2,"mat-icon"),a(3,"view_list"),i()()()}}function io(t,n){t&1&&u(0,"tr",25)}function oo(t,n){t&1&&u(0,"tr",26)}var oi=(()=>{let n=class n{constructor(e,l){this.dialog=e,this.productService=l,this.displayedColumns=["code","name","category","type","price","concentracion","presentation","description","actions"],this.dataSource=new ut,this.products=[],this.selectedProduct=null,this.productSelected=new ht}ngOnInit(){this.loadProducts()}onProductSelected(e){this.selectedProduct=e,console.log("Producto seleccionado: ",e),this.selectedProduct&&this.productSelected.emit(this.selectedProduct)}loadProducts(){this.productService.getAllProducts().subscribe(e=>{console.log("Productos resividos:  ",e),this.products=e,this.dataSource=new ut(this.products),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort})}showLots(e){this.dialog.open(ei,{width:"80%",data:e.lots}).afterClosed().subscribe(c=>{console.log("The dialog was closed")})}};n.\u0275fac=function(l){return new(l||n)(S(Fe),S(D))},n.\u0275cmp=M({type:n,selectors:[["app-prod-table-view"]],viewQuery:function(l,c){if(l&1&&($(B,5),$(A,5)),l&2){let f;H(f=Q())&&(c.paginator=f.first),H(f=Q())&&(c.sort=f.first)}},outputs:{productSelected:"productSelected"},decls:36,vars:5,consts:[[1,"titulo"],[1,"mat-elevation-z8"],[1,"responsive-table-container"],["mat-table","","matSort","",1,"full-width-table",3,"dataSource"],["matColumnDef","code"],["class","font-cabecera","mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["class","font-test","mat-cell","",4,"matCellDef"],["matColumnDef","name"],["matColumnDef","category"],["matColumnDef","type"],["matColumnDef","price"],["matColumnDef","concentracion"],["matColumnDef","presentation"],["matColumnDef","description"],["matColumnDef","actions"],["class","font-cabecera","mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","",3,"pageSizeOptions"],["mat-header-cell","","mat-sort-header","",1,"font-cabecera"],["mat-cell","",1,"font-test"],["mat-header-cell","",1,"font-cabecera"],["mat-cell",""],["mat-icon-button","","color","primary",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(l,c){l&1&&(o(0,"mat-card")(1,"mat-card-title",0),a(2,"Productos"),i(),o(3,"div",1)(4,"div",2)(5,"table",3),y(6,4),s(7,Gi,2,0,"th",5)(8,Li,2,1,"td",6),E(),y(9,7),s(10,Ri,2,0,"th",5)(11,zi,2,1,"td",6),E(),y(12,8),s(13,Ai,2,0,"th",5)(14,Bi,2,1,"td",6),E(),y(15,9),s(16,$i,2,0,"th",5)(17,Hi,2,1,"td",6),E(),y(18,10),s(19,Qi,2,0,"th",5)(20,Zi,3,6,"td",6),E(),y(21,11),s(22,Wi,2,0,"th",5)(23,Yi,2,1,"td",6),E(),y(24,12),s(25,Ui,2,0,"th",5)(26,Ki,2,1,"td",6),E(),y(27,13),s(28,Ji,2,0,"th",5)(29,Xi,2,1,"td",6),E(),y(30,14),s(31,to,2,0,"th",15)(32,eo,4,0,"td",16),E(),s(33,io,1,0,"tr",17)(34,oo,1,0,"tr",18),i()(),u(35,"mat-paginator",19),i()()),l&2&&(d(5),m("dataSource",c.dataSource),d(28),m("matHeaderRowDef",c.displayedColumns),d(),m("matRowDefColumns",c.displayedColumns),d(),m("pageSizeOptions",xt(4,ji)))},dependencies:[j,G,xe,yt,Mt,Ft,wt,Et,Tt,Ot,It,Dt,kt,dt,A,Nt,B,ie],styles:[".mat-card-title[_ngcontent-%COMP%]{font-size:1.5rem;color:#3f51b5;text-align:center}.responsive-table-container[_ngcontent-%COMP%]{width:100%;overflow-x:auto}.mat-mdc-row[_ngcontent-%COMP%]   .mat-mdc-cell[_ngcontent-%COMP%]{border-bottom:1px solid transparent;border-top:1px solid transparent;cursor:pointer}.mat-mdc-row[_ngcontent-%COMP%]:hover   .mat-mdc-cell[_ngcontent-%COMP%]{border-color:currentColor}.demo-row-is-clicked[_ngcontent-%COMP%]{font-weight:700}.full-width-table[_ngcontent-%COMP%]{width:100%;overflow:auto}.mat-elevation-z8[_ngcontent-%COMP%]{padding:16px}mat-icon[_ngcontent-%COMP%]{font-size:1em}.titulo[_ngcontent-%COMP%]{font-family:Kanit,sans-serif;padding:16px}.font-test[_ngcontent-%COMP%]{font-family:Courier Prime,monospace;font-weight:500;font-style:normal}.font-cabecera[_ngcontent-%COMP%]{font-family:Oxygen,sans-serif;font-weight:700;font-style:normal}"]});let t=n;return t})();function ro(t,n){if(t&1&&(o(0,"mat-option",7),a(1),i()),t&2){let r=n.$implicit;m("value",r),d(),Kt(" ",r.name," - ",r.concentracion," - ",r.presentation," ")}}var ni=(()=>{let n=class n{constructor(e){this.productService=e,this.productControl=new le,this.selectedProducto=null,this.productSelected=new ht}ngOnInit(){this.filteredProducts=this.productControl.valueChanges.pipe(Qt(""),Zt(e=>this._filter(e)))}_filter(e){let l=e?e.toString().toLowerCase():"";return this.productService.getAllProducts().pipe(Ht(c=>c.filter(f=>f.name.toLowerCase().includes(l))))}onProductSelected(e){this.selectedProducto=e,this.productControl.setValue(e.name),console.log("Producto seleccionado: ",e)}sendProduct(){this.selectedProducto&&(this.productSelected.emit(this.selectedProducto),this.clean())}clean(){this.productControl.reset()}};n.\u0275fac=function(l){return new(l||n)(S(D))},n.\u0275cmp=M({type:n,selectors:[["app-search"]],outputs:{productSelected:"productSelected"},decls:12,vars:5,consts:[["auto","matAutocomplete"],[1,"search-container"],["appearance","fill",1,"search-field"],["type","text","matInput","",3,"formControl","matAutocomplete"],[3,"optionSelected"],[3,"value",4,"ngFor","ngForOf"],["mat-fab","",1,"search-button",3,"click"],[3,"value"]],template:function(l,c){if(l&1){let f=w();o(0,"div",1)(1,"mat-form-field",2)(2,"mat-label"),a(3,"Buscar producto"),i(),u(4,"input",3),o(5,"mat-autocomplete",4,0),h("optionSelected",function(g){return C(f),v(c.onProductSelected(g.option.value))}),s(7,ro,2,4,"mat-option",5),T(8,"async"),i()(),o(9,"button",6),h("click",function(){return C(f),v(c.sendProduct())}),o(10,"mat-icon"),a(11,"edit_square"),i()()()}if(l&2){let f=F(6);d(4),m("formControl",c.productControl)("matAutocomplete",f),d(3),m("ngForOf",bt(8,3,c.filteredProducts))}},dependencies:[q,L,R,de,at,rt,De,J,ke,lt,he,dt,ee],styles:[".search-container[_ngcontent-%COMP%]{display:flex;align-items:center;max-width:400px}.search-field[_ngcontent-%COMP%]{flex:1;max-width:300px;margin-right:15px}.search-button[_ngcontent-%COMP%]{min-width:0;margin-top:-15px}"]});let t=n;return t})();function lo(t,n){t&1&&(o(0,"mat-error"),a(1,"C\xF3digo es requerido"),i())}function co(t,n){t&1&&(o(0,"mat-error"),a(1,"Nombre es requerido"),i())}function mo(t,n){t&1&&(o(0,"mat-error"),a(1,"Categor\xEDa es requerida"),i())}function so(t,n){t&1&&(o(0,"mat-error"),a(1,"Tipo es requerido"),i())}function po(t,n){t&1&&(o(0,"mat-error"),a(1,"Precio es requerido"),i())}function uo(t,n){t&1&&(o(0,"mat-error"),a(1,"Precio debe ser mayor o igual a 0"),i())}function fo(t,n){t&1&&(o(0,"mat-error"),a(1,"Concentraci\xF3n es requerida"),i())}function go(t,n){t&1&&(o(0,"mat-error"),a(1,"Concentraci\xF3n debe ser mayor o igual a 0"),i())}function _o(t,n){t&1&&(o(0,"mat-error"),a(1,"Presentaci\xF3n es requerida"),i())}function ho(t,n){t&1&&(o(0,"mat-error"),a(1,"Descripci\xF3n es requerida"),i())}function xo(t,n){if(t&1&&(o(0,"mat-option",29),a(1),i()),t&2){let r=n.$implicit;m("value",r),d(),b(" ",r," ")}}function bo(t,n){if(t&1&&(o(0,"mat-option",29),a(1),i()),t&2){let r=n.$implicit;m("value",r),d(),b(" ",r," ")}}function Co(t,n){if(t&1&&(o(0,"mat-option",29),a(1),i()),t&2){let r=n.$implicit;m("value",r),d(),b(" ",r," ")}}function vo(t,n){if(t&1&&(o(0,"div",19)(1,"mat-card",20)(2,"mat-card-title"),a(3),i(),o(4,"form",21)(5,"mat-form-field",2)(6,"mat-label"),a(7,"Code"),i(),u(8,"input",3),i(),o(9,"mat-form-field",2)(10,"mat-label"),a(11,"Estado Operativo"),i(),o(12,"mat-select",22),s(13,xo,2,2,"mat-option",23),i()(),o(14,"mat-form-field",2)(15,"mat-label"),a(16,"Estado Disponibilidad"),i(),o(17,"mat-select",24),s(18,bo,2,2,"mat-option",23),i()(),o(19,"mat-form-field",2)(20,"mat-label"),a(21,"Estado Seguridad"),i(),o(22,"mat-select",25),s(23,Co,2,2,"mat-option",23),i()(),o(24,"mat-form-field",2)(25,"mat-label"),a(26,"Producto"),i(),u(27,"input",26),i(),o(28,"mat-form-field",2)(29,"mat-label"),a(30,"Stock"),i(),u(31,"input",27),i(),o(32,"mat-form-field",2)(33,"mat-label"),a(34,"Fecha de vencimiento"),i(),u(35,"input",28),i()()()()),t&2){let r=n.$implicit,e=n.index,l=_();d(3),b("Lote ",e+1,""),d(),m("formGroup",r),d(9),m("ngForOf",l.estadoOperativo),d(5),m("ngForOf",l.estadoDisponibilidad),d(5),m("ngForOf",l.estadoSeguridad),d(4),m("value",l.productForm.get("name").value)}}var ri=(()=>{let n=class n{constructor(e,l,c,f,x){this.fb=e,this.productService=l,this.snackBar=c,this.profileService=f,this.documentService=x,this.lots=[],this.estadoOperativo=[],this.estadoDisponibilidad=[],this.estadoSeguridad=[],this.product=null,this.productForm=this.fb.group({code:[{value:"",disabled:!0}],name:[{value:"",disabled:!0},p.required],category:[{value:"",disabled:!0},p.required],type:[{value:"",disabled:!0},p.required],price:[{value:"",disabled:!0},[p.required,p.min(0)]],concentracion:[{value:"",disabled:!0},[p.required,p.min(0)]],presentation:["",p.required],description:["",p.required]})}ngOnInit(){this.loadAllStates(),console.log("Estado Disponibilidad auu no:")}ngOnChanges(e){e.product&&e.product.currentValue&&(this.productForm.patchValue(e.product.currentValue),this.productForm.updateValueAndValidity())}enableForm(){Object.keys(this.productForm.controls).forEach(e=>{this.productForm.controls[e].enable()})}disableForm(){Object.keys(this.productForm.controls).forEach(e=>{this.productForm.controls[e].disable()})}modifyProduct(){this.snackBar.open("Product updated successfully!","Close",{duration:2e3})}cancel(){this.productForm.reset(),this.lots=[]}addLots(){if(this.productForm.valid){let e=this.productForm.getRawValue(),l=[];this.lots.length>0&&(l=this.lots.map(g=>g.getRawValue()));let c={code:e.code,category:e.category,type:e.type,name:e.name,price:e.price,concentracion:e.concentracion,presentation:e.presentation,description:e.description,lots:l.map(g=>({code:g.code,operativeStatus:g.operationalStatus,disponibilityState:g.availabilityStatus,securityState:g.securityStatus,stock:g.quantity,expiredDate:g.expirationDate}))},f={idhoja:"a",idempleado:this.profileService.getIdEmpleado(),fechaingreso:new Date,detalles:[{idproducto:e.code,cantidad:this.totalQuantity}]};console.log("ProductoPresentationDto:",c),console.log("Hoja de ingreso:",f);let x=!1;this.productService.updateProduct(c).subscribe(g=>{console.log("Product Saved successfully:",g),x=!0,x&&(this.documentService.createHojaIngreso(f).subscribe(O=>{console.log("Hoja de ingreso guardada exitosamente:",O),this.snackBar.open("Productos y lotes guardados exitosamente!","Cerrar",{duration:3e3})}),this.productForm.reset(),this.lots=[],this.totalQuantity=void 0)},g=>{console.error("Error al guardar el producto:",g),this.snackBar.open("Error al guardar el producto","Cerrar",{duration:3e3})})}else this.snackBar.open("Por favor completa el formulario correctamente","Cerrar",{duration:2e3})}loadAllStates(){this.productService.getAllEstadoDisponibilidad$().subscribe(e=>{this.estadoDisponibilidad=e}),this.productService.getAllEstadoOperativo$().subscribe(e=>{this.estadoOperativo=e}),this.productService.getAllEstadoSeguridad$().subscribe(e=>{this.estadoSeguridad=e})}generateLots(){this.estadoDisponibilidadSelected=this.estadoDisponibilidad[0],console.log("Estado Disponibilidad a -> ",this.estadoDisponibilidadSelected),this.lots=[];let e=Math.ceil(this.totalQuantity/200),l=this.productForm.get("name").value;this.productService.getLastCodeLote$().subscribe(c=>{let f=this.estadoOperativo[0].estado,x=this.extractNumberFromCode(c)+1;for(let g=0;g<e;g++){let O=g===e-1&&this.totalQuantity%200!==0?this.totalQuantity%200:200,Lt=this.generateNextCode(x);this.lots.push(this.fb.group({code:[{value:Lt,disabled:!0},p.required],operationalStatus:["",p.required],availabilityStatus:["",p.required],securityStatus:["",p.required],productName:[{value:l,disabled:!0}],quantity:[{value:O,disabled:!0},[p.required,p.min(1),p.max(200)]],expirationDate:["",p.required]})),this.lots[g].patchValue({operationalStatus:f}),x++}})}extractNumberFromCode(e){return parseInt(e.replace(/^L0*/,""),10)}generateNextCode(e){return`L${e.toString().padStart(5,"0")}`}};n.\u0275fac=function(l){return new(l||n)(S(z),S(D),S(ct),S(K),S(mt))},n.\u0275cmp=M({type:n,selectors:[["app-editproducto"]],inputs:{product:"product"},features:[_t],decls:60,vars:13,consts:[[1,"product-form-card"],[1,"product-form-grid",3,"formGroup"],["appearance","fill"],["matInput","","formControlName","code"],[4,"ngIf"],["appearance","fill",1,"full-width"],["matInput","","formControlName","name"],["matInput","","formControlName","category"],["matInput","","formControlName","type"],["matInput","","formControlName","price","type","number"],["matInput","","formControlName","concentracion"],["matInput","","formControlName","presentation"],["matInput","","formControlName","description"],[1,"container-buttons"],[1,"lot-section"],["matInput","","type","number",3,"ngModelChange","ngModel"],["mat-raised-button","","color","accent",3,"click"],["class","lot-form",4,"ngFor","ngForOf"],[1,"action-buttons"],[1,"lot-form"],[1,"lot-card"],[3,"formGroup"],["formControlName","operationalStatus"],[3,"value",4,"ngFor","ngForOf"],["formControlName","availabilityStatus"],["formControlName","securityStatus"],["matInput","","disabled","",3,"value"],["matInput","","formControlName","quantity","type","number"],["matInput","","formControlName","expirationDate","type","date"],[3,"value"]],template:function(l,c){l&1&&(o(0,"mat-card",0)(1,"mat-card-title"),a(2,"Actualizar Producto"),i(),o(3,"form",1)(4,"mat-form-field",2)(5,"mat-label"),a(6,"Codigo"),i(),u(7,"input",3),s(8,lo,2,0,"mat-error",4),i(),o(9,"mat-form-field",5)(10,"mat-label"),a(11,"Nombre"),i(),u(12,"input",6),s(13,co,2,0,"mat-error",4),i(),o(14,"mat-form-field",2)(15,"mat-label"),a(16,"Categoria"),i(),u(17,"input",7),s(18,mo,2,0,"mat-error",4),i(),o(19,"mat-form-field",2)(20,"mat-label"),a(21,"Tipo"),i(),u(22,"input",8),s(23,so,2,0,"mat-error",4),i(),o(24,"mat-form-field",2)(25,"mat-label"),a(26,"Precio"),i(),u(27,"input",9),s(28,po,2,0,"mat-error",4)(29,uo,2,0,"mat-error",4),i(),o(30,"mat-form-field",2)(31,"mat-label"),a(32,"Concentracion"),i(),u(33,"input",10),s(34,fo,2,0,"mat-error",4)(35,go,2,0,"mat-error",4),i(),o(36,"mat-form-field",2)(37,"mat-label"),a(38,"Presentacion"),i(),u(39,"input",11),s(40,_o,2,0,"mat-error",4),i(),o(41,"mat-form-field",2)(42,"mat-label"),a(43,"Descripcion"),i(),u(44,"textarea",12),s(45,ho,2,0,"mat-error",4),i()(),u(46,"div",13),o(47,"div",14)(48,"mat-form-field",2)(49,"mat-label"),a(50,"Cantidad total"),i(),o(51,"input",15),Y("ngModelChange",function(x){return W(c.totalQuantity,x)||(c.totalQuantity=x),x}),i()(),o(52,"button",16),h("click",function(){return c.generateLots()}),a(53,"Generar lotes"),i()(),s(54,vo,36,6,"div",17),o(55,"div",18)(56,"button",16),h("click",function(){return c.addLots()}),a(57,"Guardar lotes"),i(),o(58,"button",16),h("click",function(){return c.cancel()}),a(59,"Cancelar"),i()()()),l&2&&(d(3),m("formGroup",c.productForm),d(5),m("ngIf",c.productForm.get("code").hasError("required")),d(5),m("ngIf",c.productForm.get("name").hasError("required")),d(5),m("ngIf",c.productForm.get("category").hasError("required")),d(5),m("ngIf",c.productForm.get("type").hasError("required")),d(5),m("ngIf",c.productForm.get("price").hasError("required")),d(),m("ngIf",c.productForm.get("price").hasError("min")),d(5),m("ngIf",c.productForm.get("concentracion").hasError("required")),d(),m("ngIf",c.productForm.get("concentracion").hasError("min")),d(5),m("ngIf",c.productForm.get("presentation").hasError("required")),d(5),m("ngIf",c.productForm.get("description").hasError("required")),d(6),Z("ngModel",c.totalQuantity),d(3),m("ngForOf",c.lots))},dependencies:[q,U,it,L,St,R,X,et,ot,nt,j,G,at,rt,fe,J,lt,Pt,Vt],styles:[".product-form-card[_ngcontent-%COMP%]{width:100%;margin:20px auto;padding:20px;box-shadow:0 2px 10px #0000001a}.product-form-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(200px,1fr));gap:16px;width:100%}mat-form-field[_ngcontent-%COMP%]{width:100%}.full-width[_ngcontent-%COMP%]{grid-column:span 2}.form-actions[_ngcontent-%COMP%]{grid-column:span 2;text-align:right}.lot-section[_ngcontent-%COMP%]{margin-top:20px;display:flex;align-items:center;gap:16px}.lot-form[_ngcontent-%COMP%]{margin-top:20px}.lot-card[_ngcontent-%COMP%]{margin-top:20px;padding:20px}.action-buttons[_ngcontent-%COMP%]{margin-top:20px;display:flex;justify-content:space-between}.container-buttons[_ngcontent-%COMP%]{display:flex;justify-content:space-between}  .snack-bar-success{background-color:transparent!important;box-shadow:none!important}  .success-snack-bar{animation:_ngcontent-%COMP%_fadeIn .5s ease-out,fadeOut .5s ease-in 2.5s forwards}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(-20px)}to{opacity:1;transform:translateY(0)}}@keyframes _ngcontent-%COMP%_fadeOut{0%{opacity:1;transform:translateY(0)}to{opacity:0;transform:translateY(-20px)}}"]});let t=n;return t})();function yo(t,n){t&1&&V(0)}function Eo(t,n){if(t&1&&(o(0,"div"),s(1,yo,1,0,"ng-container",9),i()),t&2){_();let r=F(9);d(),m("ngTemplateOutlet",r)}}function Mo(t,n){t&1&&V(0)}function wo(t,n){if(t&1&&(o(0,"div"),s(1,Mo,1,0,"ng-container",9),i()),t&2){_();let r=F(11);d(),m("ngTemplateOutlet",r)}}function Oo(t,n){t&1&&V(0)}function Io(t,n){if(t&1&&(o(0,"div"),s(1,Oo,1,0,"ng-container",9),i()),t&2){_();let r=F(13);d(),m("ngTemplateOutlet",r)}}function Fo(t,n){t&1&&u(0,"app-producto-form")}function To(t,n){if(t&1){let r=w();o(0,"app-search",10),h("productSelected",function(l){C(r);let c=_();return v(c.onProductSelected(l))}),i(),u(1,"app-editproducto",11)}if(t&2){let r=_();d(),m("product",r.selectedProduct)}}function Do(t,n){t&1&&u(0,"app-prod-table-view")}var ai=(()=>{let n=class n{constructor(e){this.fb=e,this.selectedTab=1,this.selectOption="",this.tabs=[{label:"Nuevo Producto",route:"/producto/nuevo"},{label:"Editar Producto",route:"/producto/editar"},{label:"Tabla de productos",route:"/producto/all"}],this.selectedProduct=null,this.selectedOption="/producto/all",this.productForm=new tt({}),this.categories=["Medicamento","Suplemento","Cosmetico"],this.forms=["Tableta","Capsula","Liquido","Polvo"],this.products=[],this.lastProductId="PRO001",this.productForm=this.fb.group({id_producto:[{value:"",disabled:!0}],nombre:["",p.required],categoria:["",p.required],forma:["",p.required],precio:["",[p.required,p.min(0)]],concentracion:["",p.required],presentacion:["",p.required],descripcion:["",p.required]})}ngOnInit(){this.generateProductId()}onProductSelected(e){this.selectedProduct=e}generateProductId(){let l="PRO"+(parseInt(this.lastProductId.slice(3))+1).toString().padStart(3,"0");this.productForm.get("id_producto")?.setValue(l)}onSubmit(){if(this.productForm.valid){let e=$t(Bt({},this.productForm.value),{id_producto:this.productForm.get("id_producto")?.value});this.products.push(e),console.log("Producto agregado con exito",e),this.lastProductId=e.id_producto,this.generateProductId(),this.productForm.reset(),this.productForm.get("id_producto")?.setValue(this.lastProductId)}else console.log("formulario invalido")}onTabSelected(e){this.selectOption=e,console.log(`Navigating to ${e}`)}};n.\u0275fac=function(l){return new(l||n)(S(z))},n.\u0275cmp=M({type:n,selectors:[["app-producto-page"]],decls:14,vars:4,consts:[["newProductZone",""],["editProductZone",""],["allProductZone",""],[1,"layout"],[1,"main-content"],[1,"tab-container"],[3,"tabSelected","tabs"],[1,"tab-content"],[4,"ngIf"],[4,"ngTemplateOutlet"],[3,"productSelected"],[3,"product"]],template:function(l,c){if(l&1){let f=w();o(0,"div",3)(1,"div",4)(2,"div",5)(3,"app-tab-bar",6),h("tabSelected",function(g){return C(f),v(c.onTabSelected(g))}),i(),o(4,"div",7),s(5,Eo,2,1,"div",8)(6,wo,2,1,"div",8)(7,Io,2,1,"div",8),i()()()(),s(8,Fo,1,0,"ng-template",null,0,N)(10,To,2,1,"ng-template",null,1,N)(12,Do,1,0,"ng-template",null,2,N)}l&2&&(d(3),m("tabs",c.tabs),d(2),m("ngIf",c.selectOption==="/producto/nuevo"),d(),m("ngIf",c.selectOption==="/producto/editar"),d(),m("ngIf",c.selectOption==="/producto/all"))},dependencies:[U,Ct,qt,ti,oi,ni,ri],styles:[".layout[_ngcontent-%COMP%]{display:flex;flex-direction:row}.product-registration-card[_ngcontent-%COMP%]{max-width:600px;margin:2rem auto;padding:1rem;background:#f9f9f9}.full-width[_ngcontent-%COMP%]{width:100%}.main-content[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;margin-left:250px;margin-top:0}.tab-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin:20px 40px}.tab-content[_ngcontent-%COMP%]{padding:20px;background:linear-gradient(145deg,#f0f4f8,#dfe3e8);box-shadow:0 10px 20px #0000001a;width:calc(100% - 20px);margin:auto;border-radius:12px;color:#333;font-family:Roboto,sans-serif}.container[_ngcontent-%COMP%]{display:flex;flex-direction:column;padding:20px}.form-and-empty[_ngcontent-%COMP%]{display:flex;width:100%;margin-bottom:20px}.form-container[_ngcontent-%COMP%]{flex:1;padding:20px;border-right:1px solid #ccc;background:linear-gradient(145deg,#e0f7fa,#b2ebf2);border-radius:12px;box-shadow:0 10px 20px #0000001a;color:#333}.empty-space[_ngcontent-%COMP%]{flex:1;padding:20px}.select-design[_ngcontent-%COMP%]{background-color:#fff;color:#333;font-size:16px;padding:8px 12px;transition:border-color .3s}.table-container[_ngcontent-%COMP%]{width:100%;margin-top:20px;background:linear-gradient(145deg,#e0f7fa,#b2ebf2);border-radius:12px;box-shadow:0 10px 20px #0000001a;text-align:center}.table-title[_ngcontent-%COMP%]{font-size:1.5em;color:#0c466e;margin-bottom:20px}.table[_ngcontent-%COMP%]{width:calc(100% - 40px);margin:0 auto 20px}form[_ngcontent-%COMP%]{display:flex;flex-direction:column}div[_ngcontent-%COMP%]{margin-bottom:15px}label[_ngcontent-%COMP%]{margin-bottom:5px;font-weight:700;color:#333}input[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%], select[_ngcontent-%COMP%]{padding:12px;font-size:16px;width:100%;box-sizing:border-box;border:1px solid #bbb;border-radius:8px;background-color:#fff;color:#333;transition:border-color .3s,box-shadow .3s}input[_ngcontent-%COMP%]:focus, textarea[_ngcontent-%COMP%]:focus, select[_ngcontent-%COMP%]:focus{border-color:#26c6da;box-shadow:0 0 5px #26c6da80;outline:none}button[_ngcontent-%COMP%]{padding:14px;font-size:16px;background-color:#26c6da;color:#fff;border:none;border-radius:8px;cursor:pointer;transition:background-color .3s,transform .3s}button[_ngcontent-%COMP%]:hover{background-color:#00acc1;transform:translateY(-2px)}button[disabled][_ngcontent-%COMP%]{background-color:#aaa;cursor:not-allowed}table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;margin-top:20px;background-color:#fff;box-shadow:0 10px 20px #0000001a;border-radius:12px;color:#333}table[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-align:center;font-size:1.5em;margin-bottom:20px;color:#26c6da}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{padding:12px 15px;border:1px solid #bbb;text-align:left}thead[_ngcontent-%COMP%]{background-color:#e0f7fa;border-bottom:2px solid #26c6da}tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#f5f5f5}tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#e0e0e0}@media (max-width: 768px){.layout[_ngcontent-%COMP%]{flex-direction:column}.main-content[_ngcontent-%COMP%]{margin-left:0}.tab-container[_ngcontent-%COMP%]{margin:10px 20px}.form-and-empty[_ngcontent-%COMP%]{flex-direction:column}.form-container[_ngcontent-%COMP%], .empty-space[_ngcontent-%COMP%]{width:100%;border-right:none}}"]});let t=n;return t})();function ko(t,n){t&1&&V(0)}function Vo(t,n){if(t&1&&(o(0,"div"),s(1,ko,1,0,"ng-container",8),i()),t&2){_();let r=F(8);d(),m("ngTemplateOutlet",r)}}function No(t,n){t&1&&V(0)}function qo(t,n){if(t&1&&(o(0,"div"),s(1,No,1,0,"ng-container",8),i()),t&2){_();let r=F(10);d(),m("ngTemplateOutlet",r)}}function jo(t,n){t&1&&V(0)}function Go(t,n){if(t&1&&(o(0,"div"),s(1,jo,1,0,"ng-container",8),i()),t&2){_();let r=F(12);d(),m("ngTemplateOutlet",r)}}function Lo(t,n){if(t&1&&(o(0,"label",40),a(1),i()),t&2){let r=_().$implicit;I("for",r.input),d(),P(r.label)}}function Ro(t,n){if(t&1&&(o(0,"div"),a(1),i()),t&2){let r=_().$implicit;d(),b(" ",r.label," es requerido(a) ")}}function zo(t,n){if(t&1&&(o(0,"div",12),s(1,Lo,2,2,"label",38),u(2,"input",39),s(3,Ro,2,1,"div",7),i()),t&2){let r,e=n.$implicit,l=_(2);d(),m("ngIf",e.type==="date"),d(),I("id",e.input),I("formControlName",e.input),I("type",e.type),I("placeholder",e.label),d(),m("ngIf",((r=l.crearSolicitudForm.get(e.input))==null?null:r.invalid)&&((r=l.crearSolicitudForm.get(e.input))==null?null:r.touched))}}function Ao(t,n){if(t&1){let r=w();o(0,"tr",41),h("click",function(){let l=C(r).$implicit,c=_(2);return v(c.selectRow(l))}),o(1,"td"),a(2),i(),o(3,"td"),a(4),i(),o(5,"td"),a(6),i(),o(7,"td"),a(8),i(),o(9,"td"),a(10),i(),o(11,"td"),a(12),i()()}if(t&2){let r=n.$implicit;d(2),P(r.id_solicitud),d(2),P(r.nombreProducto),d(2),P(r.cantidadRequerida),d(2),P(r.plazoEntrega),d(2),P(r.identificacion),d(2),P(r.estado)}}function Bo(t,n){if(t&1){let r=w();o(0,"div",9)(1,"div",10)(2,"form",11),h("ngSubmit",function(){C(r);let l=_();return v(l.onSubmit())}),o(3,"h6"),a(4,"Datos de la solicitud"),i(),o(5,"div",12),u(6,"input",13),i(),s(7,zo,4,6,"div",14),o(8,"div",15)(9,"button",16),h("click",function(){C(r);let l=_();return v(l.saveSolicitud())}),a(10,"Agregar"),i(),o(11,"button",17),h("click",function(){C(r);let l=_();return v(l.onCancel())}),a(12,"Cancelar"),i()()()(),o(13,"div",18)(14,"div",19)(15,"h2",20),a(16,"Solicitudes de compra"),i(),o(17,"div",21)(18,"select",22),Y("ngModelChange",function(l){C(r);let c=_();return W(c.estadoFilter,l)||(c.estadoFilter=l),v(l)}),h("change",function(){C(r);let l=_();return v(l.filtrarSolicitudes())}),o(19,"option",23),a(20,"Todos"),i(),o(21,"option",24),a(22,"Pendiente"),i(),o(23,"option",25),a(24,"Aceptado"),i(),o(25,"option",26),a(26,"Rechazado"),i()()(),o(27,"div",27)(28,"table")(29,"thead")(30,"tr")(31,"th"),a(32,"ID Solicitud"),i(),o(33,"th"),a(34,"Producto"),i(),o(35,"th"),a(36,"Cantidad requerida"),i(),o(37,"th"),a(38,"Plazo entrega"),i(),o(39,"th"),a(40,"ID Empleado Compra"),i(),o(41,"th"),a(42,"Estado"),i()()(),o(43,"tbody"),s(44,Ao,13,6,"tr",28),i()()()(),o(45,"div",29)(46,"form",11),h("ngSubmit",function(){C(r);let l=_();return v(l.onUpdateSubmit())}),o(47,"div",30)(48,"h6"),a(49,"Actualizacion de datos"),i(),o(50,"label"),a(51),i(),o(52,"label"),a(53),i(),o(54,"div",31)(55,"button",32),h("click",function(){C(r);let l=_();return v(l.updateSolicitud())}),a(56,"Actualizar"),i(),o(57,"button",17),h("click",function(){C(r);let l=_();return v(l.onUpdateCancel())}),a(58,"Cancelar"),i()()(),o(59,"div",33)(60,"div",12)(61,"label",34),a(62,"Cantidad"),i(),u(63,"input",35),i(),o(64,"div",12)(65,"label",36),a(66,"Fecha de Entrega"),i(),u(67,"input",37),i()()()()()()}if(t&2){let r,e,l=_();d(2),m("formGroup",l.crearSolicitudForm),d(5),m("ngForOf",l.forms),d(2),m("disabled",l.crearSolicitudForm.invalid),d(9),Z("ngModel",l.estadoFilter),d(26),m("ngForOf",l.filteredSolicitudes),d(2),m("formGroup",l.updateSolicitudForm),d(5),b("Id de Solicitud: ",(r=l.updateSolicitudForm.get("id_solicitud"))==null?null:r.value,""),d(2),b("Producto: ",(e=l.updateSolicitudForm.get("nombreProducto"))==null?null:e.value,"")}}function $o(t,n){if(t&1&&(o(0,"option",50),a(1),i()),t&2){let r=n.$implicit;m("value",r),d(),P(r)}}function Ho(t,n){if(t&1&&(o(0,"option",50),a(1),i()),t&2){let r=n.$implicit;m("value",r),d(),P(r)}}function Qo(t,n){if(t&1&&(o(0,"li"),a(1),i()),t&2){let r=n.$implicit;d(),P(r.idproducto)}}function Zo(t,n){if(t&1&&(o(0,"li"),a(1),i()),t&2){let r=n.$implicit;d(),P(r.nombreProducto)}}function Wo(t,n){if(t&1&&(o(0,"li"),a(1),i()),t&2){let r=n.$implicit;d(),P(r.cantidad)}}function Yo(t,n){if(t&1&&(o(0,"tr")(1,"td"),a(2),i(),o(3,"td")(4,"ul"),s(5,Qo,2,1,"li",49),i()(),o(6,"td")(7,"ul"),s(8,Zo,2,1,"li",49),i()(),o(9,"td")(10,"ul"),s(11,Wo,2,1,"li",49),i()(),o(12,"td"),a(13),T(14,"date"),i()()),t&2){let r=n.$implicit;d(2),P(r.idhoja),d(3),m("ngForOf",r.detalles),d(3),m("ngForOf",r.detalles),d(3),m("ngForOf",r.detalles),d(2),P(pt(14,5,r.fechaingreso,"dd/MM/yyyy"))}}function Uo(t,n){if(t&1){let r=w();o(0,"div",42)(1,"h2",43),a(2,"Hoja de Ingreso"),i(),o(3,"div",44)(4,"select",45),h("change",function(){C(r);let l=_();return v(l.applyFilter())}),o(5,"option",23),a(6,"ID Hoja"),i(),s(7,$o,2,2,"option",46),i(),o(8,"select",47),h("change",function(){C(r);let l=_();return v(l.applyFilter())}),o(9,"option",23),a(10,"Nombre Producto"),i(),s(11,Ho,2,2,"option",46),i(),o(12,"input",48),h("input",function(){C(r);let l=_();return v(l.applyFilter())}),i(),o(13,"button",17),h("click",function(){C(r);let l=_();return v(l.resetFilters())}),a(14,"Reset"),i()(),o(15,"div",19)(16,"table")(17,"thead")(18,"tr")(19,"th"),a(20,"ID Hoja"),i(),o(21,"th"),a(22,"ID Producto"),i(),o(23,"th"),a(24,"Nombre Producto"),i(),o(25,"th"),a(26,"Cantidad"),i(),o(27,"th"),a(28,"Fecha Ingreso"),i()()(),o(29,"tbody"),s(30,Yo,15,8,"tr",49),i()()()()}if(t&2){let r=_();d(7),m("ngForOf",r.uniqueHojas),d(4),m("ngForOf",r.uniqueProductos),d(19),m("ngForOf",r.filteredHojas)}}function Ko(t,n){if(t&1){let r=w();o(0,"tr",41),h("click",function(){let l=C(r).$implicit,c=_(2);return v(c.selectRowGuia(l))}),o(1,"td"),a(2),i(),o(3,"td"),a(4),i(),o(5,"td"),a(6),i(),o(7,"td"),a(8),T(9,"date"),i()()}if(t&2){let r=n.$implicit;d(2),P(r.idguiaremision),d(2),P(r.idempleado),d(2),P(r.idpedido),d(2),P(pt(9,4,r.fecha_envio,"dd/MM/yyyy"))}}function Jo(t,n){if(t&1&&(o(0,"label",40),a(1),i()),t&2){let r=_().$implicit;I("for",r.input),d(),b("",r.label," ")}}function Xo(t,n){if(t&1&&(o(0,"div"),a(1),i()),t&2){let r=_().$implicit;d(),b(" ",r.label," es requerido(a) ")}}function tn(t,n){if(t&1&&(o(0,"div",12),s(1,Jo,2,2,"label",38),u(2,"input",39),s(3,Xo,2,1,"div",7),i()),t&2){let r,e=n.$implicit,l=_(2);d(),m("ngIf",e.type==="date"),d(),I("id",e.input),I("formControlName",e.input),I("type",e.type),I("placeholder",e.label),d(),m("ngIf",((r=l.crearGuiaForm.get(e.input))==null?null:r.invalid)&&((r=l.crearGuiaForm.get(e.input))==null?null:r.touched))}}function en(t,n){if(t&1){let r=w();o(0,"mat-list-item",41),h("click",function(){let l=C(r).$implicit,c=_(2);return v(c.onSelectPedido(l))}),o(1,"mat-icon",62),a(2,"description"),i(),o(3,"div",63),a(4),i(),o(5,"div",64),a(6),T(7,"date"),i()()}if(t&2){let r=n.$implicit;d(4),P(r.idPedido),d(2),P(bt(7,2,r.fechaEmision))}}function on(t,n){if(t&1){let r=w();o(0,"div",9)(1,"div",51)(2,"div",52)(3,"h2",20),a(4,"Guias de remision"),i(),o(5,"div",27)(6,"table",53)(7,"thead")(8,"tr")(9,"th"),a(10,"ID Guia"),i(),o(11,"th"),a(12,"ID Empleado"),i(),o(13,"th"),a(14,"ID Pedido"),i(),o(15,"th"),a(16,"Fecha Envio"),i()()(),o(17,"tbody"),s(18,Ko,10,7,"tr",28),i()()()(),o(19,"div",29)(20,"form",11),h("ngSubmit",function(){C(r);let l=_();return v(l.onUpdateSubmit())}),o(21,"div",30)(22,"h6"),a(23,"Actualizacion de datos"),i(),o(24,"label"),a(25,"Id de Guia"),i(),u(26,"input",54),o(27,"label"),a(28,"Empleado"),i(),u(29,"input",55),o(30,"div",31)(31,"button",32),h("click",function(){C(r);let l=_();return v(l.updateGuia())}),a(32,"Actualizar"),i(),o(33,"button",17),h("click",function(){C(r);let l=_();return v(l.onUpdateCancel())}),a(34,"Cancelar"),i()()(),o(35,"div",33)(36,"div",12)(37,"label",56),a(38,"Id del pedido"),i(),u(39,"input",57),i(),o(40,"div",12)(41,"label",58),a(42,"Fecha entrega"),i(),u(43,"input",59),i()()()()(),o(44,"div",60)(45,"form",11),h("ngSubmit",function(){C(r);let l=_();return v(l.onSubmit())}),o(46,"h6"),a(47,"Datos de la Guia de Remision"),i(),o(48,"div",12),u(49,"input",54),i(),s(50,tn,4,6,"div",14),o(51,"div",15)(52,"button",32),h("click",function(){C(r);let l=_();return v(l.saveGuia())}),a(53,"Agregar"),i(),o(54,"button",17),h("click",function(){C(r);let l=_();return v(l.onCancel())}),a(55,"Cancelar"),i()()(),u(56,"br"),o(57,"div")(58,"mat-list")(59,"div",61),a(60,"Pedidos a atender"),i(),Yt(61,en,8,4,"mat-list-item",null,Wt),u(63,"mat-divider"),i()()()()}if(t&2){let r=_();d(18),m("ngForOf",r.guias),d(2),m("formGroup",r.updateGuiaForm),d(25),m("formGroup",r.crearGuiaForm),d(5),m("ngForOf",r.formGuia),d(11),Ut(r.pedidoPendiente)}}var li=(()=>{let n=class n{constructor(e,l,c,f,x,g){this.fb=e,this.documentService=l,this.productoService=c,this.pedidoService=f,this.profileService=x,this.snackBar=g,this.pedidoPendiente=[],this.formGuia=[{label:"id del empleado",input:"idempleado",type:"string"},{label:"id del pedido",input:"idpedido",type:"string"},{label:"fecha entrega",input:"fechaentrega",type:"date"}],this.forms=[{label:"Nombre del producto",input:"nombreProducto",type:"string"},{label:"Cantidad requerida",input:"cantidadRequerida",type:"string"},{label:"Plazo de entrega",input:"plazoEntrega",type:"date"},{label:"Id Asistente",input:"identificacion",type:"string"}],this.selectedTab=1,this.selectOption="",this.tabs=[{label:"Solicitudes de compra",route:"/documents/crearSolicitud"},{label:"Hojas de ingreso",route:"/documents/crearHoja"},{label:"Generar guia",route:"/documents/guia"}],this.crearSolicitudForm=new tt({}),this.updateSolicitudForm=new tt({}),this.crearGuiaForm=new tt({}),this.solicitudes=[],this.guias=[],this.filteredSolicitudes=[],this.estadoFilter="",this.hojas=[],this.uniqueHojas=[],this.uniqueProductos=[],this.uniqueEmpleados=[],this.filteredHojas=[],this.filteredProductNames=[],this.crearSolicitudForm=this.fb.group({id_solicitud:[{value:"",disabled:!0}],nombreProducto:["",p.required],cantidadRequerida:["",p.required],plazoEntrega:["",p.required],identificacion:[{value:"EMP004",disabled:!0},p.required],estado:[{value:"Pendiente",disabled:!0}]}),this.filteredSolicitudes=this.solicitudes,this.updateSolicitudForm=this.fb.group({id_solicitud:[""],nombreProducto:[""],cantidadRequerida:["",p.required],plazoEntrega:["",p.required],identificacion:["",p.required],estado:[{value:"Pendiente",disabled:!0}]}),this.crearGuiaForm=this.fb.group({idguia:[{value:"",disabled:!0},p.required],idempleado:[{value:localStorage.getItem("idempleado"),disabled:!0},p.required],idpedido:["",p.required],fechaentrega:["",p.required]}),this.updateGuiaForm=this.fb.group({idguia:[{value:"",disabled:!0}],idempleado:[{value:"",disabled:!0}],idpedido:[{value:"",disabled:!0},p.required],fechaentrega:["",p.required]})}ngOnInit(){this.generateGuiaId(),this.filteredHojas=[...this.hojas],this.loadSolicitudes(),this.loadLastCodeSolicitud(),this.loadHojaIngreso(),this.loadGuiaRemision(),this.loadLsatCodeGuia(),this.loadPedidosEnPreparacion()}loadSolicitudes(){this.documentService.getAllSolicitudCompra().subscribe(e=>{console.log("Solicitudes resividas:  ",e),this.solicitudes=e,this.filteredSolicitudes=this.solicitudes})}loadLastCodeSolicitud(){this.documentService.getLastCodeSolicitud$().subscribe(e=>{this.crearSolicitudForm.patchValue({id_solicitud:e}),this.generateNextCode(e),console.log("Last code de solicitud:",e)}),this.crearSolicitudForm.patchValue({id_solicitud:this.last_code_solicitud})}loadLsatCodeGuia(){this.documentService.getLastCodeGuia$().subscribe(e=>{this.crearGuiaForm.patchValue({idguia:e}),this.last_code_guia=e,this.generateNextCode(e),console.log("Last code de guia:",e)}),this.crearGuiaForm.patchValue({idguia:this.last_code_guia})}generateNextCode(e){let l=e.slice(0,3),c=e.slice(3),x=(parseInt(c,10)+1).toString().padStart(c.length,"0"),g=`${l}${x}`;l==="SO-"?this.crearSolicitudForm.patchValue({id_solicitud:g}):this.crearGuiaForm.patchValue({idguia:g})}loadAllDataSolicitud(){this.loadSolicitudes(),this.loadLastCodeSolicitud()}loadAllDataGuia(){this.loadGuiaRemision(),this.loadLsatCodeGuia()}saveSolicitud(){if(this.crearSolicitudForm.valid){let e=this.crearSolicitudForm.getRawValue(),l={id_solicitud:e.id_solicitud,nombreProducto:e.nombreProducto,cantidadRequerida:e.cantidadRequerida,plazoEntrega:e.plazoEntrega,identificacion:e.identificacion,codigoempleado:this.profileService.getIdEmpleado(),estado:"Pendiente"};this.documentService.createSolicitudCompra(l).subscribe(c=>{console.log("Solicitud creada con exito",c),this.snackBar.open("Solicitud creada con \xE9xito","Cerrar",{duration:3e3,panelClass:["snack-bar-success"],verticalPosition:"top",horizontalPosition:"center"}),this.crearSolicitudForm.reset(),this.loadAllDataSolicitud()},c=>{console.error("Error al guardar la solicitud de compra",c),this.snackBar.open("Error al guardar la solicitud de compra","Cerrar",{duration:3e3})})}else this.snackBar.open("Por favor completa el formulario correctamente","Cerrar",{duration:2e3})}updateSolicitud(){if(this.updateSolicitudForm.valid){let e=this.updateSolicitudForm.value,l={id_solicitud:e.id_solicitud,nombreProducto:e.nombreProducto,cantidadRequerida:e.cantidadRequerida,plazoEntrega:e.plazoEntrega,identificacion:e.identificacion,codigoempleado:this.profileService.getIdEmpleado(),estado:"Pendiente"};this.documentService.updateSolicitudCompra(l).subscribe(c=>{console.log("Solicitud actualizada con \xE9xito",c),this.snackBar.open("Solicitud actualizada con \xE9xito","Cerrar",{duration:3e3,panelClass:["snack-bar-success"],verticalPosition:"top",horizontalPosition:"center"}),this.updateSolicitudForm.reset(),this.loadAllDataSolicitud()},c=>{console.error("Error al guardar la hoja de ingreso",c),this.snackBar.open("Error al guardar la hoja de ingreso","Cerrar",{duration:3e3})})}else this.snackBar.open("Por favor completa el formulario correctamente","Cerrar",{duration:2e3});this.loadAllDataSolicitud()}loadHojaIngreso(){this.documentService.getAllHojaIngreso().subscribe(e=>{console.log("Respuesta completa de la API:",e),this.hojas=e,this.filteredHojas=this.hojas,this.getUniqueValues()})}getUniqueValues(){this.uniqueHojas=[...new Set(this.hojas.map(e=>e.idhoja))],this.uniqueProductos=[...new Set(this.hojas.flatMap(e=>e.detalles.map(l=>l.nombreProducto)))],this.uniqueEmpleados=[...new Set(this.hojas.map(e=>e.idempleado))]}loadGuiaRemision(){this.documentService.getAllGuiaRemision().subscribe(e=>{console.log("Respuesta completa de la API:",e),this.guias=e})}saveGuia(){if(this.crearGuiaForm.valid){let e=this.crearGuiaForm.getRawValue(),l={idguiaremision:e.idguia,idempleado:this.profileService.getIdEmpleado(),idpedido:e.idpedido,fecha_envio:e.fechaentrega};console.log("Guia a guardar:",l),this.documentService.createGuiaRemision(l).subscribe(c=>{console.log("Guia creada con \xE9xito",c),this.snackBar.open("Guia creada con \xE9xito","Cerrar",{duration:3e3,panelClass:["snack-bar-success"],verticalPosition:"top",horizontalPosition:"center"}),this.crearGuiaForm.reset(),this.loadAllDataGuia(),this.loadPedidosEnPreparacion()},c=>{console.error("Error al guardar la guia de remision",c),this.snackBar.open("Error al guardar la guia de remision","Cerrar",{duration:3e3})})}else this.snackBar.open("Por favor completa el formulario correctamente","Cerrar",{duration:2e3})}updateGuia(){if(this.updateGuiaForm.valid){let e=this.updateGuiaForm.getRawValue(),l={idguiaremision:e.idguia,idempleado:this.profileService.getIdEmpleado(),idpedido:e.idpedido,fecha_envio:e.fechaentrega};console.log("Guia a actualizar:",l),this.documentService.updateGuiaRemision(l).subscribe(c=>{console.log("Guia actualizada con \xE9xito",c),this.snackBar.open("Guia actualizada con \xE9xito","Cerrar",{duration:3e3,panelClass:["snack-bar-success"],verticalPosition:"top",horizontalPosition:"center"}),this.updateGuiaForm.reset(),this.loadAllDataGuia()},c=>{console.error("Error al guardar la guia de remision",c),this.snackBar.open("Error al guardar la guia de remision","Cerrar",{duration:3e3})})}}loadPedidosEnPreparacion(){this.pedidoService.getAllPedidos().subscribe(e=>{this.pedidoPendiente=e.filter(l=>l.idEstadoEnvio===1)})}onSelectPedido(e){this.crearGuiaForm.patchValue({idpedido:e.idPedido})}generateGuiaId(){}onSubmit(){}filtrarSolicitudes(){this.estadoFilter?this.filteredSolicitudes=this.solicitudes.filter(e=>e.estado===this.estadoFilter):this.filteredSolicitudes=this.solicitudes}onCancel(){this.crearSolicitudForm.reset(),this.crearGuiaForm.reset(),this.loadAllDataGuia()}selectRow(e){this.updateSolicitudForm.patchValue({id_solicitud:e.id_solicitud,nombreProducto:e.nombreProducto,cantidadRequerida:e.cantidadRequerida,plazoEntrega:e.plazoEntrega,codigoempleado:this.profileService.getIdEmpleado(),identificacion:e.identificacion,estado:e.estado})}selectRowGuia(e){this.updateGuiaForm.patchValue({idguia:e.idguiaremision,idempleado:e.idempleado,idpedido:e.idpedido,fechaentrega:e.fecha_envio})}onUpdateSubmit(){}onUpdateCancel(){this.updateSolicitudForm.reset(),this.updateGuiaForm.reset()}onTabSelected(e){this.selectOption=e,console.log(`Navigating to ${e}`)}applyFilter(){let e=document.getElementById("filterIdHoja").value.toLowerCase(),l=document.getElementById("filterProducto").value.toLowerCase(),c=document.getElementById("filterFecha").value;this.filteredHojas=this.hojas.filter(f=>{let x=!e||f.idhoja.toLowerCase().includes(e),g=!l||f.detalles.some(Lt=>Lt.nombreProducto?.toLowerCase().includes(l)),O=!c||new Date(f.fechaingreso).toISOString().includes(c);return x&&g&&O})}resetFilters(){document.getElementById("filterIdHoja").value="",document.getElementById("filterProducto").value="",document.getElementById("filterFecha").value="",this.filteredHojas=this.hojas}selectProductName(e){document.getElementById("filterNombreProducto").value=e,this.filteredProductNames=[],this.applyFilter()}};n.\u0275fac=function(l){return new(l||n)(S(z),S(mt),S(D),S(qe),S(K),S(ct))},n.\u0275cmp=M({type:n,selectors:[["app-documents"]],decls:13,vars:4,consts:[["nuevaSolicitudZone",""],["nuevaHojaZone",""],["nuevaGuiaZone",""],[1,"main-content"],[1,"tab-container"],[3,"tabSelected","tabs"],[1,"tab-content"],[4,"ngIf"],[4,"ngTemplateOutlet"],[1,"form-and-empty"],[1,"form-container"],[3,"ngSubmit","formGroup"],[1,"input-container"],["id","id_solicitud","formControlName","id_solicitud"],["class","input-container",4,"ngFor","ngForOf"],[1,"button-container"],["type","submit",3,"click","disabled"],["type","button",3,"click"],[1,"container"],[1,"table-container"],[1,"table-title"],[1,"filtroestado"],["id","estado-filter",3,"ngModelChange","change","ngModel"],["value",""],["value","Pendiente"],["value","Aceptado"],["value","Rechazado"],[1,"table-scroll"],[3,"click",4,"ngFor","ngForOf"],[1,"form-update"],[1,"container-solo-labels-actualizacion"],[1,"button-containerAct"],["type","submit",3,"click"],[1,"container-solo-form"],["for","cantidadRequerida"],["id","cantidadRequerida","formControlName","cantidadRequerida"],["for","plazoEntrega"],["id","plazoEntrega","formControlName","plazoEntrega","type","date"],["class","input-label",3,"for",4,"ngIf"],[3,"id","formControlName","type","placeholder"],[1,"input-label",3,"for"],[3,"click"],[1,"hoja-ingreso-container"],[1,"section-title"],[1,"filter-container"],["id","filterIdHoja",3,"change"],[3,"value",4,"ngFor","ngForOf"],["id","filterProducto",3,"change"],["id","filterFecha","type","date",3,"input"],[4,"ngFor","ngForOf"],[3,"value"],[1,"container-guia"],[1,"table-container-guia"],[1,"guia-r-table"],["id","idguia","formControlName","idguia"],["id","idempleado","formControlName","idempleado"],["for","idpedido"],["id","idpedido","formControlName","idpedido"],["for","fechaentrega"],["id","fechaentrega","formControlName","fechaentrega","type","date"],[1,"form-container-guia"],["mat-subheader",""],["matListItemIcon",""],["matListItemTitle",""],["matListItemLine",""]],template:function(l,c){if(l&1){let f=w();o(0,"div",3)(1,"div",4)(2,"app-tab-bar",5),h("tabSelected",function(g){return C(f),v(c.onTabSelected(g))}),i(),o(3,"div",6),s(4,Vo,2,1,"div",7)(5,qo,2,1,"div",7)(6,Go,2,1,"div",7),i()()(),s(7,Bo,68,8,"ng-template",null,0,N)(9,Uo,31,3,"ng-template",null,1,N)(11,on,64,4,"ng-template",null,2,N)}l&2&&(d(2),m("tabs",c.tabs),d(2),m("ngIf",c.selectOption==="/documents/crearSolicitud"),d(),m("ngIf",c.selectOption==="/documents/crearHoja"),d(),m("ngIf",c.selectOption==="/documents/guia"))},dependencies:[q,U,Ct,qt,it,me,se,L,ce,R,X,et,ot,nt,dt,ze,Ae,Re,Be,je,Le,Ge,vt],styles:[".layout[_ngcontent-%COMP%]{display:flex;flex-direction:row;background-color:#fff}.input-container[_ngcontent-%COMP%]{margin-bottom:21px}.main-content[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;margin-left:250px;margin-top:0}.tab-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin:20px 40px}.tab-content[_ngcontent-%COMP%]{padding:20px;background:#fff;width:calc(100% - 20px);margin:auto;border-radius:12px;color:#333;font-family:Roboto,sans-serif}.form-and-empty[_ngcontent-%COMP%]{display:flex;width:100%;background-color:#fff}.form-container[_ngcontent-%COMP%]{flex:1;max-width:290px;padding:20px;border-radius:12px;background-color:#f8f8f8;min-height:560px}.form-update[_ngcontent-%COMP%]{width:100%;margin:21px auto 0;background:#f8f8f8;border-radius:12px;min-height:41%;padding:1px}.container-solo-form[_ngcontent-%COMP%]{flex:1;max-width:250px;margin-top:4%;margin-right:10%;border-radius:12px;background-color:#f8f8f8}.container-solo-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:10px;font-size:15px;width:80%;box-sizing:border-box;border:1px solid #bbb;border-radius:8px;background-color:#fff;color:#333;transition:border-color .3s,box-shadow .3s}.container-solo-labels-actualizacion[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-between;min-width:350px;margin-top:4%;margin-left:4%;border-radius:12px;background-color:#f8f8f8;max-height:200px}.container-solo-labels-actualizacion[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-top:0%}h6[_ngcontent-%COMP%]{font-weight:700;color:#080505;font-size:16px;margin-bottom:30px}.container[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin:1px auto 0;width:70%;background:#fff;border-radius:12px;height:600px}.table-container[_ngcontent-%COMP%]{display:flex;flex:1;flex-direction:column;overflow-x:auto;margin:0 auto;width:100%;background:#f8f8f8;border-radius:12px;text-align:center;max-height:55%}.empty-space[_ngcontent-%COMP%]{flex:1;padding:20px;background-color:#0aff37}.select-design[_ngcontent-%COMP%]{background-color:#fff;color:#333;font-size:16px;padding:8px 12px;transition:border-color .3s}.table-title[_ngcontent-%COMP%]{font-size:1.1em;color:#000;margin-bottom:10px;margin-top:20px;margin-left:20px}.form-update[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between}form[_ngcontent-%COMP%]{display:flex;flex-direction:column}div[_ngcontent-%COMP%]{margin-bottom:0}label[_ngcontent-%COMP%]{font-size:15px;margin-bottom:5px;color:#333}input[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%], select[_ngcontent-%COMP%]{padding:10px;font-size:15px;width:92%;box-sizing:border-box;border:1px solid #bbb;border-radius:8px;background-color:#fff;color:#333;transition:border-color .3s,box-shadow .3s}input[_ngcontent-%COMP%]:focus, textarea[_ngcontent-%COMP%]:focus, select[_ngcontent-%COMP%]:focus{border-color:#26c6da;box-shadow:0 0 5px #26c6da80;outline:none}.button-container[_ngcontent-%COMP%]{margin-top:20px}.button-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:9px;width:41%;font-size:15px;background-color:#45b385cc;color:#fff;border:none;border-radius:8px;cursor:pointer;transition:background-color .3s,transform .3s;margin-right:18px}.button-containerAct[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;margin-top:20px;background-color:#f8f8f8}.button-containerAct[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:9px;width:35%;font-size:15px;background-color:#45b385cc;color:#fff;border:none;border-radius:8px;cursor:pointer;transition:background-color .3s,transform .3s;margin-right:60px}.button-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#378c68cc;transform:translateY(-2px)}.button-container[_ngcontent-%COMP%]   button[disabled][_ngcontent-%COMP%]{background-color:#45b385cc;cursor:not-allowed}@media (max-width: 768px){.layout[_ngcontent-%COMP%]{flex-direction:column}.main-content[_ngcontent-%COMP%]{margin-left:0}.tab-container[_ngcontent-%COMP%]{margin:10px 20px}.form-and-empty[_ngcontent-%COMP%]{flex-direction:column}.form-container[_ngcontent-%COMP%], .empty-space[_ngcontent-%COMP%]{width:100%;border-right:none}}h2[_ngcontent-%COMP%]{text-align:center}table[_ngcontent-%COMP%]{background-color:#b4b4b4;width:100%;font-size:15px;text-align:left;box-shadow:0 0 10px #0000001a;table-layout:fixed;border-radius:10px;border-collapse:collapse;border-spacing:10px 5px}thead[_ngcontent-%COMP%]{font-size:17px;border-bottom:2px solid #cccccc}tr[_ngcontent-%COMP%]{height:50px;width:50%;max-width:100px}th[_ngcontent-%COMP%]{width:50px;padding:12px;color:#fff}td[_ngcontent-%COMP%]{max-width:20px;padding:12px;text-overflow:ellipsis;white-space:nowrap;overflow:hidden}tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(odd){background-color:#fff}tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#f9f6f6}tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#e0e0e0}.table-scroll[_ngcontent-%COMP%]{max-height:250px;overflow-y:auto;margin-left:3%;margin-right:3%;background-color:#f8f8f8}input[_ngcontent-%COMP%]::placeholder{color:#cccaca}.input-container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{color:#eb5252;font-size:13.5px}.container-guia[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:70%;margin-top:1px;margin-bottom:0;background:#fff;border-radius:12px;height:auto;padding:10px}.form-container-guia[_ngcontent-%COMP%]{flex:1;margin-left:1%;max-width:600px;padding:20px;border-radius:12px;background-color:#f8f8f8;min-height:560px}.hoja-ingreso-container[_ngcontent-%COMP%]{width:80%;margin:0 auto;padding:20px;background-color:#f8f8f8;border-radius:12px}.section-title[_ngcontent-%COMP%]{font-size:1.2em;color:#333;margin-bottom:20px;text-align:center}.filter-container[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-top:30px;margin-bottom:40px}.filter-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .filter-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:22%;padding:10px;border:1px solid #ccc;border-radius:5px;font-size:1em}.autocomplete[_ngcontent-%COMP%]{position:relative;display:inline-block}.autocomplete-items[_ngcontent-%COMP%]{position:absolute;border:1px solid #d4d4d4;border-bottom:none;border-top:none;z-index:99;top:100%;left:0;right:0}.mat-mdc-list-item-icon[_ngcontent-%COMP%]{color:#0000008a}.autocomplete-items[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{padding:10px;cursor:pointer;background-color:#fff;border-bottom:1px solid #d4d4d4}.autocomplete-items[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:hover{background-color:#e9e9e9}.table-container[_ngcontent-%COMP%]{overflow-x:auto;max-height:37 0px}.guia-r-table[_ngcontent-%COMP%]{background-color:#b4b4b4;width:100%;font-size:15px;text-align:left;box-shadow:0 0 10px #0000001a;table-layout:fixed;border-radius:10px;border-collapse:collapse;border-spacing:10px 5px}.guia-r-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{padding:12px;text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.table-container-guia[_ngcontent-%COMP%]{display:flex;flex:1;flex-direction:column;overflow-x:auto;margin:0 auto;width:100%;background:#f8f8f8;border-radius:12px;text-align:center}.filtroestado[_ngcontent-%COMP%]{max-width:30%;margin-bottom:10px;margin-left:10px}"]});let t=n;return t})();var nn=[{path:"",redirectTo:"inicio",pathMatch:"full"},{path:"inicio",component:Ze},{path:"productos",component:ai},{path:"documentos",component:li}],di=(()=>{let n=class n{};n.\u0275fac=function(l){return new(l||n)},n.\u0275mod=gt({type:n}),n.\u0275inj=ft({imports:[Rt.forChild(nn),Rt]});let t=n;return t})();var Er=(()=>{let n=class n{};n.\u0275fac=function(l){return new(l||n)},n.\u0275mod=gt({type:n}),n.\u0275inj=ft({imports:[oe,di,He,pe,ue,ae,ge,Ve,_e,be,Ce,ye,re,ve,Pe,Se,$e,Ee,ne,Qe,Ne,Me,Te,we]});let t=n;return t})();export{Er as ProductosModule};
