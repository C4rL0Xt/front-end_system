import{a as dt,b as st}from"./chunk-J2YYJQHT.js";import{$ as Pe,A as K,B as Nt,Ba as Jt,C as W,Ca as Wt,D as At,E as ae,F as ct,G as pe,H as Rt,I as ue,J as fe,K as ge,L as _e,M as Ce,N as he,O as be,P as xe,Q as ve,R as Ee,S as $t,T as re,U as Se,V as Lt,W as Bt,X as jt,Y as X,Z as Gt,_ as we,aa as Fe,ba as Ut,ca as O,da as Me,ea as Ht,fa as D,ga as qt,h as zt,n as B,o as Ot,oa as Qt,pa as $e,q as j,qa as Le,r as G,ra as Zt,sa as I,ta as Yt,u as Dt,v as J,x as se}from"./chunk-QKGNWLHQ.js";import"./chunk-RGNDWIHZ.js";import{b as U,d as w,f as H,g as q,j as at,l as Q,m as rt,n as kt,o as Z,p as lt,q as mt,r as Y,v as z,w as Vt,x as It,y as Be,z as Kt}from"./chunk-4FASO6NX.js";import{d as yt}from"./chunk-VZNS2HMS.js";import{c as Ae,k as nt,m as Tt,p as ft,q as Re}from"./chunk-CFYZAOOI.js";import{Cb as r,Db as n,Ea as ie,Eb as f,Fb as E,G as N,Gb as S,Hb as oe,Ib as b,Lb as p,Nb as C,Qb as tt,Sb as A,Sc as L,Tb as R,Tc as Ve,Ub as $,Uc as Ie,Vb as F,Vc as de,W as Te,Wb as m,X as ye,Xb as V,Xc as Ne,Yb as x,Yc as Ft,Za as c,Zc as Mt,_ as Ke,_a as v,_b as it,ca as De,da as We,ec as le,ha as ke,ic as T,jc as me,kc as ce,lc as ot,mc as ne,n as ut,na as y,oa as Xe,qb as u,r as te,s as Pt,sb as s,ua as et,v as k,va as g,wa as _}from"./chunk-5A5ZOIWX.js";var je=(()=>{let a=class a{constructor(e){this.httpClient=e,this.URL=Re.api_factura,this.facturaSubject=new ut([]),this.facturas$=this.facturaSubject.asObservable(),this.selectedFacturaSubject=new ut(null),this.selectedFactura$=this.selectedFacturaSubject.asObservable()}getAllFacturas(){return this.httpClient.get(`${this.URL}/facturas/listar`).pipe(k(e=>(console.log("Respuesta completa de la API: ",e),e)),N(e=>{alert("Error de conexion");let{status:i,statusText:o}=e;return console.log("Algo paso revisar",[i,o]),te([])}))}getAllFacturasCompra(){return this.httpClient.get(`${this.URL}/facturasCompra/listar`).pipe(k(e=>(console.log("Respuesta completa de la API: ",e),e)),N(e=>{alert("Error de conexion");let{status:i,statusText:o}=e;return console.log("Algo paso revisar",[i,o]),te([])}))}createFactura(e){return this.httpClient.post(`${this.URL}/facturas/crear`,e)}updateFactura(e){return this.httpClient.put(`${this.URL}/facturas/actualizar`,e)}getLastCodeFactura$(){return this.httpClient.get(`${this.URL}/facturas/lastCode`,{responseType:"text"}).pipe(Ke(e=>e),N(e=>{alert("Error de conexion");let{status:i,statusText:o}=e;return console.log("Algo paso revisar",[i,o]),te([])}))}setFacturas(e){this.facturaSubject.next(e)}selectFactura(e){this.selectedFacturaSubject.next(e)}};a.\u0275fac=function(i){return new(i||a)(ke(Ae))},a.\u0275prov=De({token:a,factory:a.\u0275fac,providedIn:"root"});let t=a;return t})();function si(t,a){if(t&1&&(r(0,"mat-option",13),m(1),n()),t&2){let l=a.$implicit;s("value",l.estado),c(),x(" ",l.estado," ")}}var ei=(()=>{let a=class a{constructor(e,i,o){this.fb=e,this.facturaService=i,this.snackBar=o,this.updateTableEvent=new ie,this.estados=[{idEstado:1,estado:"Pendiente"},{idEstado:2,estado:"Pagado"},{idEstado:3,estado:"Cancelado"}],this.agregarFacturaForm=this.fb.group({idfactura:[{value:"",disabled:!0}],idpedido:[{value:"",disabled:!0}],idestadopago:[{value:this.estados[0].estado,disabled:!1}],fechalimite:[{value:"",disabled:!0}],fechapago:[""]})}ngOnInit(){this.loadLastCode(),this.agregarFacturaForm.patchValue({idpedido:this.facturad.idPedido,fechalimite:this.facturad.fechaEntrega}),console.log("Tabla cargada")}loadLastCode(){this.facturaService.getLastCodeFactura$().subscribe(e=>{this.agregarFacturaForm.patchValue({idfactura:e}),this.generateCode(e),console.log("ultim Code:",e)}),this.agregarFacturaForm.patchValue({idfactura:this.lastCode})}generateCode(e){let o=parseInt(e.substring(e.length-3))+1;this.agregarFacturaForm.patchValue({idfactura:`FV-00${o}`}),this.agregarFacturaForm.get("idfactura").disable()}onSave(){if(this.agregarFacturaForm.valid){let e=this.agregarFacturaForm.getRawValue(),i={idFactura:e.idfactura,idPedido:e.idpedido,idEstadoPago:this.getIdEstado(e.idestadopago),fechaLimite:e.fechalimite,fechaPago:e.fechapago};console.log("El dto de factura: ",i),this.facturaService.createFactura(i).subscribe(o=>{console.log("Factura guardada exitosamente: ",o),this.agregarFacturaForm.reset(),this.loadLastCode(),this.updateTable()},o=>{console.error("Error al guardar la factura",o)})}else this.snackBar.open("Por favor completa el formulario correctamente","Cerrar",{duration:2e3})}onCancel(){this.agregarFacturaForm.reset()}onSubmit(){this.agregarFacturaForm.valid&&console.log("Factura guardado existosamente:",this.agregarFacturaForm.getRawValue())}getEstadPago(e){let i=this.estados.find(o=>o.idEstado===e);return i?i.estado:"Desconocido"}getIdEstado(e){return this.estados.find(o=>o.estado===e).idEstado}updateTable(){this.updateTableEvent.emit()}};a.\u0275fac=function(i){return new(i||a)(v(z),v(je),v(I))},a.\u0275cmp=y({type:a,selectors:[["app-form-new-fac"]],inputs:{facturad:"facturad"},outputs:{updateTableEvent:"updateTableEvent"},decls:29,vars:4,consts:[["deadlinePicker",""],[1,"product-form-card"],[1,"product-form-grid",3,"ngSubmit","formGroup"],["appearance","fill"],["matInput","","formControlName","idfactura"],["matInput","","formControlName","idpedido"],["formControlName","idestadopago"],[3,"value",4,"ngFor","ngForOf"],["matInput","","formControlName","fechalimite",3,"matDatepicker"],["matSuffix","",3,"for"],[1,"action-buttons"],["mat-raised-button","","color","primary",3,"click"],["mat-raised-button","","color","warn",3,"click"],[3,"value"]],template:function(i,o){if(i&1){let d=b();r(0,"mat-card",1)(1,"mat-card-title"),m(2,"Generar Factura Venta"),n(),r(3,"form",2),p("ngSubmit",function(){return g(d),_(o.onSubmit())}),r(4,"mat-form-field",3)(5,"mat-label"),m(6,"Codigo Factura"),n(),f(7,"input",4),n(),r(8,"mat-form-field",3)(9,"mat-label"),m(10,"Codigo Pedido"),n(),f(11,"input",5),n(),r(12,"mat-form-field",3)(13,"mat-label"),m(14,"Estado Pago"),n(),r(15,"mat-select",6),u(16,si,2,2,"mat-option",7),n()(),r(17,"mat-form-field",3)(18,"mat-label"),m(19,"Fecha Limite"),n(),f(20,"input",8)(21,"mat-datepicker-toggle",9)(22,"mat-datepicker",null,0),n()(),r(24,"div",10)(25,"button",11),p("click",function(){return g(d),_(o.onSave())}),m(26,"Guardar todo"),n(),r(27,"button",12),p("click",function(){return g(d),_(o.onCancel())}),m(28,"Cancelar"),n()()()}if(i&2){let d=F(23);c(3),s("formGroup",o.agregarFacturaForm),c(13),s("ngForOf",o.estados),c(4),s("matDatepicker",d),c(),s("for",d)}},dependencies:[L,Q,U,H,q,Z,Y,j,G,K,J,se,B,W,ae,X,we,Pe,Fe],styles:[".product-form-card[_ngcontent-%COMP%]{width:100%;margin:20px auto;padding:20px;box-shadow:0 2px 10px #0000001a}.product-form-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(300px,1fr));gap:16px;width:100%}mat-form-field[_ngcontent-%COMP%]{width:100%}.full-width[_ngcontent-%COMP%]{grid-column:span 2}.form-actions[_ngcontent-%COMP%]{grid-column:span 2;text-align:right}.action-buttons[_ngcontent-%COMP%]{margin-top:20px;display:flex;justify-content:space-between}"]});let t=a;return t})();var fi=()=>[5,10,20];function gi(t,a){if(t&1&&(r(0,"mat-option",36),m(1),n()),t&2){let l=a.$implicit;s("value",l.estado),c(),x(" ",l.estado," ")}}function _i(t,a){t&1&&(r(0,"th",37),m(1," C\xF3digo "),n())}function Ci(t,a){if(t&1){let l=b();r(0,"td",38),p("click",function(){let i=g(l).$implicit,o=C();return _(o.onRowClicked(i))}),m(1),n()}if(t&2){let l=a.$implicit;c(),x(" ",l.idFactura," ")}}function hi(t,a){t&1&&(r(0,"th",37),m(1," Pedido "),n())}function bi(t,a){if(t&1){let l=b();r(0,"td",38),p("click",function(){let i=g(l).$implicit,o=C();return _(o.onRowClicked(i))}),m(1),n()}if(t&2){let l=a.$implicit;c(),x(" ",l.idPedido," ")}}function xi(t,a){t&1&&(r(0,"th",37),m(1," Estado de pago "),n())}function vi(t,a){if(t&1){let l=b();r(0,"td",38),p("click",function(){let i=g(l).$implicit,o=C();return _(o.onRowClicked(i))}),m(1),n()}if(t&2){let l=a.$implicit,e=C();c(),x(" ",e.getEstado(l.idEstadoPago)," ")}}function Ei(t,a){t&1&&(r(0,"th",37),m(1," Fecha L\xEDmite "),n())}function Si(t,a){if(t&1){let l=b();r(0,"td",38),p("click",function(){let i=g(l).$implicit,o=C();return _(o.onRowClicked(i))}),m(1),T(2,"date"),n()}if(t&2){let l=a.$implicit;c(),x(" ",ce(2,1,l.fechaLimite,"dd/MM/yyyy")," ")}}function wi(t,a){t&1&&(r(0,"th",37),m(1," Fecha de pago "),n())}function Pi(t,a){if(t&1){let l=b();r(0,"td",38),p("click",function(){let i=g(l).$implicit,o=C();return _(o.onRowClicked(i))}),m(1),T(2,"date"),n()}if(t&2){let l=a.$implicit;c(),x(" ",ce(2,1,l.fechaPago,"dd/MM/yyyy")," ")}}function Fi(t,a){t&1&&(r(0,"th",39),m(1," Actions "),n())}function Mi(t,a){t&1&&(r(0,"td",40)(1,"button",41)(2,"mat-icon"),m(3,"view_list"),n()()())}function Ti(t,a){t&1&&f(0,"tr",42)}function yi(t,a){t&1&&f(0,"tr",43)}function zi(t,a){if(t&1&&(r(0,"mat-option",36),m(1),n()),t&2){let l=a.$implicit;s("value",l.estado),c(),x(" ",l.estado," ")}}var ti=(()=>{let a=class a{constructor(e,i,o,d){this.facturaService=e,this.fb=i,this.snackBar=o,this.pedidoService=d,this.dataSource=new re,this.estados=[{idEstado:1,estado:"Pendiente"},{idEstado:2,estado:"Pagado"},{idEstado:3,estado:"Cancelado"}],this.displayedColumns=["codigo","codigopedido","estadopago","fechalimitedepago","fechapago","actions"],this.facturas=[],this.filterForm=this.fb.group({codigoPedido:[""],estadoPago:[""],fechaPago:[""]}),this.editarFacturaForm=this.fb.group({idfactura:[{value:"",disabled:!0}],idpedido:[{value:"",disabled:!0}],idestadopago:[{value:this.estados[0].estado,disabled:!1}],fechalimite:[{value:"",disabled:!0}],fechapago:[{value:"",disabled:!0}]})}ngOnInit(){this.loadFacturas()}ngOnChanges(e){console.log("Cambios detectados",e),e.updateFlag&&e.updateFlag.previousValue!==e.updateFlag.currentValue&&this.loadFacturas()}applyFilter(e,i){let o=e.value?e.value:e.target.value;this.dataSource.filterPredicate=(h,P)=>{let M=JSON.parse(P);return(M.codigopedido?h.idPedido.toLowerCase().includes(M.codigopedido):!0)&&(M.estadopago?this.getEstado(h.idEstadoPago).toLowerCase().includes(M.estadopago):!0)};let d={codigopedido:i==="codigopedido"?o.trim().toLowerCase():"",estadopago:i==="estadopago"?o.trim().toLowerCase():""};this.dataSource.filter=JSON.stringify(d)}loadFacturas(){this.facturaService.getAllFacturas().subscribe(e=>{this.facturas=e,console.log("Facturas: ",this.facturas),this.dataSource=new re(this.facturas=this.facturas.map(i=>(i.fechaLimite=this.adjustDate(i.fechaLimite),i.fechaPago&&(i.fechaPago=this.adjustDate(i.fechaPago)),i))),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort})}adjustDate(e){let i=new Date(e);return i.setMinutes(i.getMinutes()+i.getTimezoneOffset()),i}ngAfterViewInit(){console.log("After view ejecutandose"),this.facturas=[...this.facturas]}resetFilters(){this.filterForm.reset(),this.dataSource.filter=""}onRowClicked(e){this.editarFacturaForm.patchValue({idfactura:e.idFactura,idpedido:e.idPedido,idestadopago:e.idEstadoPago,fechalimite:e.fechaLimite,fechapago:e.fechaPago})}cancel(){this.editarFacturaForm.reset()}onCancel(){this.resetFilters(),this.editarFacturaForm.reset()}onSave(){if(this.editarFacturaForm.valid){let e=this.editarFacturaForm.getRawValue(),i={idFactura:e.idfactura,idPedido:e.idpedido,idEstadoPago:this.getIdEstado(e.idestadopago),fechaLimite:e.fechalimite,fechaPago:e.fechapago};console.log("El dto de factura: ",i),this.facturaService.updateFactura(i).subscribe(o=>{console.log("Factura actualizada exitosamente: ",o),i.idEstadoPago===2&&this.updateEstadoEnvio(i.idPedido),this.editarFacturaForm.reset(),this.loadFacturas()},o=>{console.error("Error al actualizar la factura",o)})}else this.snackBar.open("Por favor completa el formulario correctamente","Cerrar",{duration:2e3})}updateEstadoEnvio(e){this.pedidoService.updateAListo(e).subscribe(i=>{console.log("Estado de env\xEDo actualizado para el pedido",e)},i=>{console.error("Error al actualizar el estado de env\xEDo del pedido",i)})}onSubmit(){this.editarFacturaForm.valid&&console.log("Factura actualizada exitosamente:",this.editarFacturaForm.getRawValue())}getEstado(e){let i=this.estados.find(o=>o.idEstado===e);return i?i.estado:"Desconocido"}getIdEstado(e){return this.estados.find(o=>o.estado===e).idEstado}};a.\u0275fac=function(i){return new(i||a)(v(je),v(z),v(I),v(st))},a.\u0275cmp=y({type:a,selectors:[["app-table-fac"]],viewQuery:function(i,o){if(i&1&&(A(D,5),A(O,5)),i&2){let d;R(d=$())&&(o.paginator=d.first),R(d=$())&&(o.sort=d.first)}},inputs:{updateFlag:"updateFlag"},features:[et],decls:76,vars:13,consts:[["deadlinePicker",""],["paymentDatePicker",""],[1,"titulo"],[1,"mat-elevation-z8"],[3,"formGroup"],[1,"filters-container"],[1,"filters"],["appearance","fill"],["matInput","","formControlName","codigoPedido","placeholder","C\xF3digo de Pedido",3,"input"],["formControlName","estadoPago","placeholder","Estado de Pago",3,"selectionChange"],[3,"value",4,"ngFor","ngForOf"],["mat-raised-button","","color","primary",3,"click"],["mat-table","","matSort","",1,"full-width-table",3,"dataSource"],["matColumnDef","codigo"],["class","font-cabecera","mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["class","font-test","mat-cell","",3,"click",4,"matCellDef"],["matColumnDef","codigopedido"],["matColumnDef","estadopago"],["matColumnDef","fechalimitedepago"],["matColumnDef","fechapago"],["matColumnDef","actions"],["class","font-cabecera","mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","",3,"pageSizeOptions"],[1,"product-form-card"],[1,"product-form-grid",3,"ngSubmit","formGroup"],["matInput","","formControlName","idfactura"],["matInput","","formControlName","idpedido"],["formControlName","idestadopago"],["matInput","","formControlName","fechalimite",3,"matDatepicker"],["matSuffix","",3,"for"],["matInput","","formControlName","fechapago",3,"matDatepicker"],[1,"action-buttons"],["mat-raised-button","","color","warn",3,"click"],[3,"value"],["mat-header-cell","","mat-sort-header","",1,"font-cabecera"],["mat-cell","",1,"font-test",3,"click"],["mat-header-cell","",1,"font-cabecera"],["mat-cell",""],["mat-icon-button","","color","primary"],["mat-header-row",""],["mat-row",""]],template:function(i,o){if(i&1){let d=b();r(0,"mat-card")(1,"mat-card-title",2),m(2,"Facturas de Venta"),n(),r(3,"div",3)(4,"form",4)(5,"div",5)(6,"div",6)(7,"mat-form-field",7)(8,"mat-label"),m(9,"Buscar por C\xF3digo de Pedido"),n(),r(10,"input",8),p("input",function(P){return g(d),_(o.applyFilter(P,"codigopedido"))}),n()(),r(11,"mat-form-field",7)(12,"mat-label"),m(13,"Buscar por Estado de Pago"),n(),r(14,"mat-select",9),p("selectionChange",function(P){return g(d),_(o.applyFilter(P,"estadopago"))}),u(15,gi,2,2,"mat-option",10),n()(),r(16,"button",11),p("click",function(){return g(d),_(o.resetFilters())}),m(17,"Reset"),n()()()(),r(18,"table",12),E(19,13),u(20,_i,2,0,"th",14)(21,Ci,2,1,"td",15),S(),E(22,16),u(23,hi,2,0,"th",14)(24,bi,2,1,"td",15),S(),E(25,17),u(26,xi,2,0,"th",14)(27,vi,2,1,"td",15),S(),E(28,18),u(29,Ei,2,0,"th",14)(30,Si,3,4,"td",15),S(),E(31,19),u(32,wi,2,0,"th",14)(33,Pi,3,4,"td",15),S(),E(34,20),u(35,Fi,2,0,"th",21)(36,Mi,4,0,"td",22),S(),u(37,Ti,1,0,"tr",23)(38,yi,1,0,"tr",24),n(),f(39,"mat-paginator",25),n(),r(40,"div",26)(41,"h2"),m(42,"Editar Factura"),n(),r(43,"form",27),p("ngSubmit",function(){return g(d),_(o.onSubmit())}),r(44,"mat-form-field",7)(45,"mat-label"),m(46,"Codigo Factura"),n(),f(47,"input",28),n(),r(48,"mat-form-field",7)(49,"mat-label"),m(50,"Codigo Pedido"),n(),f(51,"input",29),n(),r(52,"mat-form-field",7)(53,"mat-label"),m(54,"Estado Pago"),n(),r(55,"mat-select",30),u(56,zi,2,2,"mat-option",10),n()(),r(57,"mat-form-field",7)(58,"mat-label"),m(59,"Fecha Limite"),n(),f(60,"input",31)(61,"mat-datepicker-toggle",32)(62,"mat-datepicker",null,0),n(),r(64,"mat-form-field",7)(65,"mat-label"),m(66,"Fecha Pago"),n(),f(67,"input",33)(68,"mat-datepicker-toggle",32)(69,"mat-datepicker",null,1),n()(),r(71,"div",34)(72,"button",11),p("click",function(){return g(d),_(o.onSave())}),m(73,"Actualizar"),n(),r(74,"button",35),p("click",function(){return g(d),_(o.onCancel())}),m(75,"Cancelar"),n()()()()}if(i&2){let d=F(63),h=F(70);c(4),s("formGroup",o.filterForm),c(11),s("ngForOf",o.estados),c(3),s("dataSource",o.dataSource),c(19),s("matHeaderRowDef",o.displayedColumns),c(),s("matRowDefColumns",o.displayedColumns),c(),s("pageSizeOptions",le(12,fi)),c(4),s("formGroup",o.editarFacturaForm),c(13),s("ngForOf",o.estados),c(4),s("matDatepicker",d),c(),s("for",d),c(6),s("matDatepicker",h),c(),s("for",h)}},dependencies:[L,Q,U,H,q,Z,Y,j,G,K,J,se,B,W,ae,pe,ue,ge,be,_e,fe,xe,Ce,he,ve,Ee,X,Se,we,Pe,Fe,O,Me,D,Ne],styles:[".mat-card-title[_ngcontent-%COMP%]{font-size:1.5rem;color:#3f51b5;text-align:center}.mat-mdc-row[_ngcontent-%COMP%]   .mat-mdc-cell[_ngcontent-%COMP%]{border-bottom:1px solid transparent;border-top:1px solid transparent;cursor:pointer}.mat-mdc-row[_ngcontent-%COMP%]:hover   .mat-mdc-cell[_ngcontent-%COMP%]{border-color:currentColor}.demo-row-is-clicked[_ngcontent-%COMP%]{font-weight:700}.full-width-table[_ngcontent-%COMP%]{width:100%;overflow:auto}.mat-elevation-z8[_ngcontent-%COMP%]{padding:16px}mat-icon[_ngcontent-%COMP%]{font-size:1em}.titulo[_ngcontent-%COMP%]{font-family:Kanit,sans-serif;padding:16px}.font-test[_ngcontent-%COMP%]{font-family:Courier Prime,monospace;font-weight:500;font-style:normal}.font-cabecera[_ngcontent-%COMP%]{font-family:Oxygen,sans-serif;font-weight:700;font-style:normal}.filters-container[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-bottom:16px}.filters[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:16px;max-width:800px}.mat-form-field[_ngcontent-%COMP%]{flex:1;min-width:200px}@media (max-width: 600px){.filters[_ngcontent-%COMP%]{flex-direction:column;align-items:center}.mat-form-field[_ngcontent-%COMP%]{min-width:100%}}.full-width-table[_ngcontent-%COMP%]{width:100%;margin-bottom:24px}.product-form-card[_ngcontent-%COMP%]{width:100%;margin:20px auto;padding:20px;box-shadow:0 2px 10px #0000001a}.product-form-grid[_ngcontent-%COMP%]{margin-top:50px;display:grid;grid-template-columns:repeat(auto-fill,minmax(300px,1fr));gap:16px;width:100%}.action-buttons[_ngcontent-%COMP%]{margin-top:20px;display:flex;justify-content:space-between}"]});let t=a;return t})();function Di(t,a){t&1&&oe(0)}function ki(t,a){if(t&1&&(r(0,"div"),u(1,Di,1,0,"ng-container",6),n()),t&2){C();let l=F(6);c(),s("ngTemplateOutlet",l)}}function Vi(t,a){if(t&1){let l=b();r(0,"app-form-new-fac",7),p("updateTableEvent",function(){g(l);let i=C();return _(i.onUpdateTable())}),n(),f(1,"app-table-fac",8)}if(t&2){let l=C();s("facturad",l.getFacturaData()),c(),s("updateFlag",l.updateFlag)}}var vt=(()=>{let a=class a{constructor(e,i,o,d){this.route=e,this.fb=i,this.facturaService=o,this.snackBar=d,this.updateFlag=!1,this.selectedTab=1,this.selectOption="/factura/nuevo",this.tabs=[{label:"Gesti\xF3n de factura",route:"/factura/nuevo"}]}onTabSelected(e){this.selectOption=e,console.log(this.selectOption)}ngOnInit(){this.route.params.subscribe(e=>{this.idPedido=e.idpedido,this.fechaEntrega=new Date(e.fechaentrega)})}getFacturaData(){return{idPedido:this.idPedido,fechaEntrega:this.fechaEntrega}}onUpdateTable(){this.updateFlag=!this.updateFlag}};a.\u0275fac=function(i){return new(i||a)(v(nt),v(z),v(je),v(I))},a.\u0275cmp=y({type:a,selectors:[["app-factura-page"]],decls:7,vars:2,consts:[["newFacturaZone",""],[1,"main-content"],[1,"tab-container"],[3,"tabSelected","tabs"],[1,"tab-content"],[4,"ngIf"],[4,"ngTemplateOutlet"],[3,"updateTableEvent","facturad"],[3,"updateFlag"]],template:function(i,o){if(i&1){let d=b();r(0,"div",1)(1,"div",2)(2,"app-tab-bar",3),p("tabSelected",function(P){return g(d),_(o.onTabSelected(P))}),n(),r(3,"div",4),u(4,ki,2,1,"div",5),n()()(),u(5,Vi,2,2,"ng-template",null,0,ne)}i&2&&(c(2),s("tabs",o.tabs),c(2),s("ngIf",o.selectOption==="/factura/nuevo"))},dependencies:[Ve,Ie,Be,ei,ti],styles:[".main-content[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;margin-left:250px;margin-top:0}.tab-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin:20px 40px}.tab-content[_ngcontent-%COMP%]{padding:20px;background:linear-gradient(145deg,#f0f4f8,#dfe3e8);box-shadow:0 10px 20px #0000001a;width:calc(100% - 20px);margin:auto;border-radius:12px;color:#333;font-family:Roboto,sans-serif}.invoice-form[_ngcontent-%COMP%]{max-width:600px;margin:auto}mat-grid-tile[_ngcontent-%COMP%]{width:100%}mat-form-field[_ngcontent-%COMP%]{width:100%}button[_ngcontent-%COMP%]{margin-right:8px}"]});let t=a;return t})();var Ue=(()=>{let a=class a{constructor(e){this.httpClient=e,this.URL=Re.api_cliente}getAllClients(){return this.httpClient.get(`${this.URL}/clientes/listarDto`).pipe(k(e=>(console.log("Respuesta completa de la API: ",e),e)),N(e=>{alert("Error de conexion");let{status:i,statusText:o}=e;return console.log("Algo paso revisar",[i,o]),te([])}))}getAllDepartments(){return this.httpClient.get(`${this.URL}/departamentos/listar`).pipe(k(e=>e),N(e=>{alert("Error de conexion");let{status:i,statusText:o}=e;return console.log("Algo paso revisar",[i,o]),te([])}))}createClient(e){return this.httpClient.post(`${this.URL}/clientes/insertar`,e)}updateClient(e){return this.httpClient.put(`${this.URL}/clientes/actualizar`,e)}};a.\u0275fac=function(i){return new(i||a)(ke(Ae))},a.\u0275prov=De({token:a,factory:a.\u0275fac,providedIn:"root"});let t=a;return t})();var He=(()=>{let a=class a{constructor(e){this.http=e,this.URL=Re.api_coti}getAllCotizacionesVenta$(){return this.http.get(`${this.URL}/coti-v/details-full`).pipe(k(e=>(console.log("Respuesta completa de la API-coti: ",e),e)),N(e=>{alert("Error de conexion");let{status:i,statusText:o}=e;return console.log("Algo paso revisar",[i,o]),te([])}))}getLastCodeCotiVenta$(){return this.http.get(`${this.URL}/coti-v/last-code`,{responseType:"text"}).pipe(Ke(e=>(console.log("Codigo de lote ultimo: ",e),e)),N(e=>{alert("Error de conexion");let{status:i,statusText:o}=e;return console.log("Algo paso revisar con la coticode",[i,o]),te([])}))}getMontoCotizacionVenta(e){return this.http.post(`${this.URL}/coti-v/calculate`,e)}getCotizacionById(e){return this.http.get(`${this.URL}/coti-v/buscar-coti-dto/${e}`).pipe(k(i=>(console.log("Respuesta completa de la API-coti: ",i),i)),N(i=>{alert("Error de conexion");let{status:o,statusText:d}=i;return console.log("Algo paso revisar",[o,d]),te([])}))}createCotizacionVenta(e){return this.http.post(`${this.URL}/coti-v/create`,e).pipe(N(i=>{let o="";return i.error instanceof ErrorEvent?o=`Error: ${i.error.message}`:o=`Error: ${i.status} ${i.message}`,console.log(o),Pt(()=>new Error(o))}))}updateCotizacionVenta(e){return this.http.put(`${this.URL}/coti-v/update`,e)}deleteDetalleCotizacionVenta(e){return this.http.delete(`${this.URL}/coti-v/delete/detalle`,{body:e})}getCotizacionPdf(e){return this.http.get(`${this.URL}/coti-v/pdf/${e}`,{responseType:"blob"})}};a.\u0275fac=function(i){return new(i||a)(ke(Ae))},a.\u0275prov=De({token:a,factory:a.\u0275fac,providedIn:"root"});let t=a;return t})();var Ii=()=>[5,10,20];function Ni(t,a){t&1&&oe(0)}function Ai(t,a){if(t&1&&(r(0,"div"),u(1,Ni,1,0,"ng-container",9),n()),t&2){C();let l=F(8);c(),s("ngTemplateOutlet",l)}}function Ri(t,a){t&1&&oe(0)}function $i(t,a){if(t&1&&(r(0,"div"),u(1,Ri,1,0,"ng-container",9),n()),t&2){C();let l=F(10);c(),s("ngTemplateOutlet",l)}}function Li(t,a){t&1&&oe(0)}function Bi(t,a){if(t&1&&(r(0,"div"),u(1,Li,1,0,"ng-container",9),n()),t&2){C();let l=F(12);c(),s("ngTemplateOutlet",l)}}function ji(t,a){if(t&1&&(r(0,"div",22)(1,"mat-form-field",23)(2,"mat-label"),m(3),n(),f(4,"input",24),n()()),t&2){let l=a.$implicit;c(3),V(l.label),c(),tt("id",l.input),tt("formControlName",l.input),tt("type",l.type)}}function Gi(t,a){if(t&1&&(r(0,"mat-option",25),m(1),n()),t&2){let l=a.$implicit;s("value",l),c(),x(" ",l," ")}}function Ui(t,a){if(t&1){let l=b();r(0,"mat-card",10)(1,"mat-card-title"),m(2,"Registro del Cliente"),n(),r(3,"form",11),p("ngSubmit",function(){g(l);let i=C();return _(i.onSubmit())}),r(4,"div",12)(5,"mat-form-field",13)(6,"mat-label"),m(7,"Codigo"),n(),f(8,"input",14),n(),u(9,ji,5,4,"div",15),r(10,"mat-form-field",16)(11,"mat-label"),m(12,"Departamento"),n(),r(13,"mat-select",17),u(14,Gi,2,2,"mat-option",18),n()()(),r(15,"div",19)(16,"button",20),p("click",function(){g(l);let i=C();return _(i.saveCliente())}),m(17,"Agregar"),n(),r(18,"button",21),p("click",function(){g(l);let i=C();return _(i.onCancel())}),m(19,"Cancelar"),n()()()()}if(t&2){let l=C();c(3),s("formGroup",l.agregarClienteForm),c(6),s("ngForOf",l.forms),c(5),s("ngForOf",l.departments)}}function Hi(t,a){if(t&1&&(r(0,"mat-option",25),m(1),n()),t&2){let l=a.$implicit;s("value",l),c(),x(" ",l.empresa," ")}}function qi(t,a){if(t&1){let l=b();r(0,"mat-card",26)(1,"mat-card-title"),m(2,"Buscar"),n(),r(3,"div",27)(4,"mat-form-field",28)(5,"mat-label"),m(6,"Buscar empresa"),n(),f(7,"input",29),r(8,"mat-autocomplete",30,3),p("optionSelected",function(i){g(l);let o=C();return _(o.onClientSelected(i.option.value))}),u(10,Hi,2,2,"mat-option",18),T(11,"async"),n()()(),r(12,"div")(13,"mat-card-title"),m(14,"Editar Cliente"),n(),r(15,"form",31)(16,"div",32)(17,"mat-form-field",23)(18,"mat-label"),m(19,"Id"),n(),f(20,"input",33),n(),r(21,"mat-form-field",23)(22,"mat-label"),m(23,"Empresa"),n(),f(24,"input",34),n(),r(25,"mat-form-field",23)(26,"mat-label"),m(27,"Representante"),n(),f(28,"input",35),n(),r(29,"mat-form-field",23)(30,"mat-label"),m(31,"DNI"),n(),f(32,"input",36),n(),r(33,"mat-form-field",23)(34,"mat-label"),m(35,"Email"),n(),f(36,"input",37),n(),r(37,"mat-form-field",23)(38,"mat-label"),m(39,"Tel\xE9fono"),n(),f(40,"input",38),n(),r(41,"mat-form-field",23)(42,"mat-label"),m(43,"Direcci\xF3n"),n(),f(44,"input",39),n(),r(45,"mat-form-field",23)(46,"mat-label"),m(47,"Departamento"),n(),f(48,"input",40),n()(),r(49,"div",41)(50,"button",21),p("click",function(){g(l);let i=C();return _(i.actualizarCliente())}),m(51,"Actualizar"),n(),r(52,"button",21),p("click",function(){g(l);let i=C();return _(i.onCancel())}),m(53,"Cancelar"),n()()()()()}if(t&2){let l=F(9),e=C();c(7),s("formControl",e.clientControl)("matAutocomplete",l),c(3),s("ngForOf",me(11,4,e.filteredClients)),c(5),s("formGroup",e.editarClienteForm)}}function Qi(t,a){t&1&&(r(0,"th",58),m(1,"C\xF3digo del Cliente"),n())}function Zi(t,a){if(t&1&&(r(0,"td",59),m(1),n()),t&2){let l=a.$implicit;c(),V(l.id_cliente)}}function Yi(t,a){t&1&&(r(0,"th",58),m(1,"Empresa"),n())}function Ji(t,a){if(t&1&&(r(0,"td",59),m(1),n()),t&2){let l=a.$implicit;c(),V(l.empresa)}}function Ki(t,a){t&1&&(r(0,"th",58),m(1,"Representante"),n())}function Wi(t,a){if(t&1&&(r(0,"td",59),m(1),n()),t&2){let l=a.$implicit;c(),V(l.representante)}}function Xi(t,a){t&1&&(r(0,"th",58),m(1,"DNI"),n())}function eo(t,a){if(t&1&&(r(0,"td",59),m(1),n()),t&2){let l=a.$implicit;c(),V(l.dni)}}function to(t,a){t&1&&(r(0,"th",58),m(1,"Email"),n())}function io(t,a){if(t&1&&(r(0,"td",59),m(1),n()),t&2){let l=a.$implicit;c(),V(l.email)}}function oo(t,a){t&1&&(r(0,"th",58),m(1,"Tel\xE9fono"),n())}function no(t,a){if(t&1&&(r(0,"td",59),m(1),n()),t&2){let l=a.$implicit;c(),V(l.telefono)}}function ao(t,a){t&1&&(r(0,"th",58),m(1,"Direcci\xF3n"),n())}function ro(t,a){if(t&1&&(r(0,"td",59),m(1),n()),t&2){let l=a.$implicit;c(),V(l.direccion)}}function lo(t,a){t&1&&(r(0,"th",58),m(1,"Departamento"),n())}function mo(t,a){if(t&1&&(r(0,"td",59),m(1),n()),t&2){let l=a.$implicit;c(),V(l.nombre_departamento)}}function co(t,a){t&1&&f(0,"tr",60)}function so(t,a){t&1&&f(0,"tr",61)}function po(t,a){if(t&1&&(r(0,"mat-card",42)(1,"mat-card-title"),m(2,"Lista de Clientes"),n(),r(3,"div",43)(4,"table",44),E(5,45),u(6,Qi,2,0,"th",46)(7,Zi,2,1,"td",47),S(),E(8,48),u(9,Yi,2,0,"th",46)(10,Ji,2,1,"td",47),S(),E(11,49),u(12,Ki,2,0,"th",46)(13,Wi,2,1,"td",47),S(),E(14,50),u(15,Xi,2,0,"th",46)(16,eo,2,1,"td",47),S(),E(17,51),u(18,to,2,0,"th",46)(19,io,2,1,"td",47),S(),E(20,52),u(21,oo,2,0,"th",46)(22,no,2,1,"td",47),S(),E(23,53),u(24,ao,2,0,"th",46)(25,ro,2,1,"td",47),S(),E(26,54),u(27,lo,2,0,"th",46)(28,mo,2,1,"td",47),S(),u(29,co,1,0,"tr",55)(30,so,1,0,"tr",56),n(),f(31,"mat-paginator",57),n()()),t&2){let l=C();c(4),s("dataSource",l.dataSource),c(25),s("matHeaderRowDef",l.displayedColumns),c(),s("matRowDefColumns",l.displayedColumns),c(),s("pageSizeOptions",le(4,Ii))}}var wt=(()=>{let a=class a{constructor(e,i,o,d,h){this.fb=e,this.snackBar=i,this.clienteService=o,this.route=d,this.cotiService=h,this.selectOption="/clientes/agregarCliente",this.selectedTab=1,this.clienteEncontrado=null,this.selectedCliente=null,this.clientControl=new at,this.tabs=[{label:"Agregar cliente",route:"/clientes/agregarCliente"},{label:"Editar cliente",route:"/clientes/actualizarCliente"},{label:"Clientes",route:"/clientes/tablaClientes"}],this.forms=[{label:"Empresa",input:"empresa",type:"string"},{label:"Representante",input:"representante",type:"string"},{label:"DNI",input:"dni",type:"string"},{label:"Email",input:"email",type:"string"},{label:"Telefono",input:"telefono",type:"string"},{label:"Direccion",input:"direccion",type:"string"}],this.displayedColumns=["idcliente","empresa","representante","dni","email","telefono","direccion","iddepartamento"],this.clients=[],this.departments=[],this.lastClientId="CL0001",this.dataSource=new re,this.agregarClienteForm=this.fb.group({idcliente:[{value:"",disabled:!0}],empresa:["",w.required],representante:["",w.required],dni:["",w.required],email:["",w.required],telefono:["",w.required],direccion:["",w.required],nombre_departamento:["",w.required]}),this.buscarClienteForm=this.fb.group({idcliente:["",w.required]}),this.editarClienteForm=this.fb.group({id_cliente:[{value:"",disabled:!0}],empresa:[{value:"",disabled:!0}],representante:["",w.required],dni:["",w.required],email:["",w.required],telefono:["",w.required],direccion:["",w.required],nombre_departamento:["",w.required]})}onSubmit(){}onBuscarCliente(){let e=this.buscarClienteForm.get("idcliente")?.value,i=this.clients.find(o=>o.idcliente===e);i?(this.clienteEncontrado=i,this.editarClienteForm.patchValue(i),console.log("Cliente encontrado",i)):(this.clienteEncontrado=null,console.log("Cliente no encontrado"))}onUpdate(){this.editarClienteForm.valid?(Object.assign(this.clienteEncontrado,this.editarClienteForm.value),console.log("Cliente actualizado con \xE9xito",this.clienteEncontrado),this.clienteEncontrado=null,this.buscarClienteForm.reset(),this.editarClienteForm.reset()):console.log("Formulario invalido")}ngOnInit(){this.route.params.subscribe(e=>{this.idcoti=e.idcoti}),this.cargarDatosDeCotizacion(this.idcoti),this.generateRandomCode(),this.loadDepartamentos(),this.loadClientes(),this.filteredClients=this.clientControl.valueChanges.pipe(Te(""),ye(e=>this._filter(e)))}cargarDatosDeCotizacion(e){this.cotiService.getCotizacionById(e).subscribe(i=>{console.log("Datos de cotizaci\xF3n recibidos: ",i),this.cotizacionRecibida=i,this.agregarClienteForm.patchValue({representante:this.cotizacionRecibida.nombrecliente,dni:this.cotizacionRecibida.dni,email:this.cotizacionRecibida.email,nombre_departamento:this.cotizacionRecibida.departamento})})}ngAfterViewInit(){this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort}loadClientes(){this.clienteService.getAllClients().subscribe(e=>{console.log("Clientes recibidos:  ",e),this.clients=e,this.dataSource.data=this.clients,this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort})}loadDepartamentos(){this.clienteService.getAllDepartments().subscribe(e=>{this.departments=e,console.log("Hola dep",e)})}generateRandomCode(){let i=`C${Math.floor(Math.random()*1e5).toString().padStart(5,"0")}`;this.agregarClienteForm.patchValue({idcliente:i})}saveCliente(){if(this.agregarClienteForm.valid){let e=this.agregarClienteForm.getRawValue(),i={id_cliente:e.idcliente,empresa:e.empresa,representante:e.representante,dni:e.dni,email:e.email,telefono:e.telefono,direccion:e.direccion,departamento:e.nombre_departamento};console.log(i),this.clienteService.createClient(i).subscribe(o=>{this.snackBar.open("Cliente registrado exitosamente","Cerrar",{duration:3e3}),this.resetForm(),this.generateRandomCode(),this.loadClientes()},o=>{console.error("Error al guardar el cliente",o)})}else this.snackBar.open("Por favor completa el formulario correctamente","Cerrar",{duration:2e3})}resetForm(){this.agregarClienteForm.reset(),Object.keys(this.agregarClienteForm.controls).forEach(e=>{this.agregarClienteForm.get(e).setErrors(null),this.agregarClienteForm.get(e).markAsPristine(),this.agregarClienteForm.get(e).markAsUntouched()})}actualizarCliente(){if(this.editarClienteForm.valid){let e=this.editarClienteForm.getRawValue(),i={id_cliente:e.id_cliente,empresa:e.empresa,representante:e.representante,dni:e.dni,email:e.email,telefono:e.telefono,direccion:e.direccion,departamento:e.nombre_departamento};console.log(i),this.clienteService.updateClient(i).subscribe(o=>{console.log("Cliente actualizado exitosamente: ",o),this.editarClienteForm.reset()},o=>{console.error("Error al actualizar el cliente",o)})}else this.snackBar.open("Por favor completa el formulario correctamente","Cerrar",{duration:2e3})}_filter(e){let i=e?e.toString().toLowerCase():"";return this.clienteService.getAllClients().pipe(k(o=>o.filter(d=>d.empresa.toLowerCase().includes(i))))}onClientSelected(e){this.selectedCliente=e,this.clientControl.setValue(e.empresa),console.log("Cliente seleccionado: ",e),this.editarClienteForm.patchValue(e)}onTabSelected(e){this.selectOption=e,console.log(`Navigating to ${e}`)}onCancel(){this.agregarClienteForm.reset(),this.editarClienteForm.reset(),this.clientControl.reset(),this.generateRandomCode()}};a.\u0275fac=function(i){return new(i||a)(v(z),v(I),v(Ue),v(nt),v(He))},a.\u0275cmp=y({type:a,selectors:[["app-page-cliente"]],viewQuery:function(i,o){if(i&1&&(A(D,5),A(O,5)),i&2){let d;R(d=$())&&(o.paginator=d.first),R(d=$())&&(o.sort=d.first)}},decls:13,vars:4,consts:[["agregarClienteZone",""],["editarClienteZone",""],["tablaClienteZone",""],["auto","matAutocomplete"],[1,"main-content"],[1,"tab-container"],[3,"tabSelected","tabs"],[1,"tab-content"],[4,"ngIf"],[4,"ngTemplateOutlet"],[1,"product-form-card"],[1,"formulario",3,"ngSubmit","formGroup"],["fxLayout","row wrap","fxLayoutGap","12px",1,"product-form-grid"],["appearance","fill","fxFlex","100%",1,"full-width"],["matInput","","formControlName","idcliente"],["fxFlex","100%",4,"ngFor","ngForOf"],["appearance","fill","fxFlex","100%"],["formControlName","nombre_departamento"],[3,"value",4,"ngFor","ngForOf"],[1,"button-container"],[3,"click"],["type","button",3,"click"],["fxFlex","100%"],["appearance","fill",1,"full-width"],["matInput","",3,"id","formControlName","type"],[3,"value"],[1,"product-form-card-editar"],[1,"search-container"],["appearance","fill",1,"search-field"],["type","text","matInput","",3,"formControl","matAutocomplete"],[3,"optionSelected"],[1,"editar",3,"formGroup"],[1,"product-form-grid"],["matInput","","formControlName","id_cliente"],["matInput","","formControlName","empresa"],["matInput","","formControlName","representante"],["matInput","","formControlName","dni"],["matInput","","formControlName","email"],["matInput","","formControlName","telefono"],["matInput","","formControlName","direccion"],["matInput","","formControlName","nombre_departamento"],[1,"button-container-editar"],[1,"tabla-clientes-card"],[1,"mat-elevation-z8","responsive-table-container"],["mat-table","","matSort","",1,"full-width-table",3,"dataSource"],["matColumnDef","idcliente"],["class","font-cabecera","mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["class","font-test","mat-cell","",4,"matCellDef"],["matColumnDef","empresa"],["matColumnDef","representante"],["matColumnDef","dni"],["matColumnDef","email"],["matColumnDef","telefono"],["matColumnDef","direccion"],["matColumnDef","iddepartamento"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","",3,"pageSizeOptions"],["mat-header-cell","","mat-sort-header","",1,"font-cabecera"],["mat-cell","",1,"font-test"],["mat-header-row",""],["mat-row",""]],template:function(i,o){if(i&1){let d=b();r(0,"div",4)(1,"div",5)(2,"app-tab-bar",6),p("tabSelected",function(P){return g(d),_(o.onTabSelected(P))}),n(),r(3,"div",7),u(4,Ai,2,1,"div",8)(5,$i,2,1,"div",8)(6,Bi,2,1,"div",8),n()()(),u(7,Ui,20,3,"ng-template",null,0,ne)(9,qi,54,6,"ng-template",null,1,ne)(11,po,32,5,"ng-template",null,2,ne)}i&2&&(c(2),s("tabs",o.tabs),c(2),s("ngIf",o.selectOption==="/clientes/agregarCliente"),c(),s("ngIf",o.selectOption==="/clientes/actualizarCliente"),c(),s("ngIf",o.selectOption==="/clientes/tablaClientes"))},dependencies:[L,Ve,Ie,Q,U,H,q,kt,Z,Y,Be,j,G,K,J,$e,B,Le,W,ue,ge,be,_e,fe,xe,Ce,he,ve,Ee,X,O,Me,D,de],styles:[".main-content[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;margin-left:250px;margin-top:0}.tab-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin:20px 40px}.tab-content[_ngcontent-%COMP%]{padding:20px;background:#fff;width:calc(100% - 20px);margin:auto;border-radius:12px}.font-test[_ngcontent-%COMP%]{font-family:Courier Prime,monospace;font-weight:500;font-style:normal}.font-cabecera[_ngcontent-%COMP%]{font-family:Oxygen,sans-serif;font-weight:700;font-style:normal}.product-form-card[_ngcontent-%COMP%]{width:100%;height:auto;margin:20px auto;padding-top:20px;padding-left:50px;background-color:#fafafa;box-shadow:0 0 #1010101a}.product-form-grid[_ngcontent-%COMP%]{margin-top:40px;display:grid;grid-template-columns:repeat(auto-fill,minmax(250px,1fr));gap:12px;width:95%}mat-form-field[_ngcontent-%COMP%]{width:100%}mat-card-title[_ngcontent-%COMP%]{font-size:30px;margin-top:0;margin-left:23px}.formulario[_ngcontent-%COMP%]{display:flex;flex-direction:column}.button-container[_ngcontent-%COMP%]{margin-top:40px;display:flex;flex-wrap:wrap;gap:10px}.button-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:10px;width:150px;font-size:17px;background-color:#45b385cc;color:#fff;border:none;border-radius:4px;cursor:pointer;transition:background-color .3s,transform .3s}.button-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#378c68cc;transform:translateY(-2px)}.button-container[_ngcontent-%COMP%]   button[disabled][_ngcontent-%COMP%]{background-color:#45b385cc;cursor:not-allowed}.product-form-card-editar[_ngcontent-%COMP%]{width:100%;height:auto;margin:2px auto 20px;padding-left:20px;background-color:#fff;box-shadow:0 0 #1010101a}.tabla-clientes-card[_ngcontent-%COMP%]{margin-top:10px;width:100%;box-shadow:none!important;border:none!important;margin-left:30px;padding-right:60px}.mat-table[_ngcontent-%COMP%]{width:100%;box-shadow:none!important;border:none!important}.mat-header-cell[_ngcontent-%COMP%]{font-weight:700;text-align:center}.mat-cell[_ngcontent-%COMP%]{text-align:center}.mat-header-row[_ngcontent-%COMP%]{background-color:#f0f0f0}.mat-row[_ngcontent-%COMP%]:nth-child(2n){background-color:#f9f9f9}.mat-cell.actions-cell[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.mat-icon-button[_ngcontent-%COMP%]{margin:0 5px}.search-container[_ngcontent-%COMP%]{margin-top:12px;margin-left:10px;display:flex;align-items:center;max-width:400px}.search-field[_ngcontent-%COMP%]{flex:1;max-width:300px;margin-right:15px}.search-button[_ngcontent-%COMP%]{min-width:0;margin-top:-15px}.responsive-table-container[_ngcontent-%COMP%]{overflow-x:auto}.mat-elevation-z8[_ngcontent-%COMP%]{overflow-x:auto;max-height:500px}.full-width-table[_ngcontent-%COMP%]{width:100%}@media screen and (max-width: 768px){.main-content[_ngcontent-%COMP%]{margin-left:0}.tab-content[_ngcontent-%COMP%]{padding:10px}.product-form-card[_ngcontent-%COMP%], .product-form-card-editar[_ngcontent-%COMP%], .tabla-clientes-card[_ngcontent-%COMP%]{width:100%;margin-left:0;padding-left:10px}.button-container[_ngcontent-%COMP%]{flex-direction:column;align-items:center}.button-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;margin:10px 0}.product-form-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}.responsive-table-container[_ngcontent-%COMP%]{width:100%;overflow-x:auto}.full-width-table[_ngcontent-%COMP%]{width:100%;overflow:auto}.mat-elevation-z8[_ngcontent-%COMP%]{padding:16px}}"]});let t=a;return t})();function fo(t,a){if(t&1&&(r(0,"mat-option",25),m(1),n()),t&2){let l=a.$implicit;s("value",l.id),c(),x(" ",l.nombre," ")}}function go(t,a){if(t&1&&(r(0,"mat-option",25),m(1),n()),t&2){let l=a.$implicit;s("value",l.name),c(),it(" ",l.name,"-",l.concentracion,"-",l.presentation," ")}}function _o(t,a){if(t&1){let l=b();r(0,"div",26)(1,"mat-form-field",8)(2,"mat-label"),m(3,"Producto"),n(),f(4,"input",27),r(5,"mat-autocomplete",28,0),p("optionSelected",function(i){g(l);let o=C();return _(o.onProductSelected(i.option.value))}),u(7,go,2,4,"mat-option",16),T(8,"async"),n()(),r(9,"mat-form-field",3)(10,"mat-label"),m(11,"Cantidad"),n(),f(12,"input",29),n(),r(13,"mat-form-field",3)(14,"mat-label"),m(15,"Total"),n(),f(16,"input",30),n(),r(17,"button",31),p("click",function(){let i=g(l).index,o=C();return _(o.removeDetalle(i))}),r(18,"mat-icon"),m(19,"delete"),n()()()}if(t&2){let l=a.index,e=F(6),i=C();s("formGroupName",l),c(4),s("matAutocomplete",e),c(3),s("ngForOf",me(8,3,i.filteredOptions[l]))}}var ai=(()=>{let a=class a{constructor(e,i,o,d,h){this.fb=e,this.snackBar=i,this.cotizacionService=o,this.profileService=d,this.productService=h,this.productos=[],this.filteredOptions=[],this.selectedProducto=null,this.departamentos=[{id:1,nombre:"MOQUEGUA"},{id:2,nombre:"LA LIBERTAD"},{id:3,nombre:"LIMA"},{id:4,nombre:"AREQUIPA"},{id:5,nombre:"LORETO"},{id:6,nombre:"PIURA"},{id:7,nombre:"AYACUCHO"},{id:8,nombre:"JUNIN"},{id:9,nombre:"ICA"},{id:10,nombre:"LAMBAYAQUE"},{id:11,nombre:"CAJARMACA"},{id:12,nombre:"UCAYALI"},{id:13,nombre:"ANCASH"},{id:14,nombre:"HUANCAVELICA"},{id:15,nombre:"TUMBES"},{id:16,nombre:"PUNO"},{id:17,nombre:"TACNA"},{id:18,nombre:"SAN MARTIN"},{id:19,nombre:"AMAZONAS"},{id:20,nombre:"PASCO"},{id:21,nombre:"APURIMAC"},{id:22,nombre:"MADRE DE DIOS"},{id:23,nombre:"CUZCO"},{id:24,nombre:"HUANUCO"}],this.estados=["Pendiente","Pagado","Cancelado"],this.cotizacionForm=this.fb.group({idcotizacion:[{value:"",disabled:!0}],idempleado:[{value:"",disabled:!0}],estado:[{value:"Pendiente",disabled:!0}],nombrecliente:["",w.required],montoproducto:[{value:"",disabled:!0}],fechaemision:["",w.required],email:["",w.required],montoimpuesto:[{value:"",disabled:!0}],montototal:[{value:"",disabled:!0}],departamento:["",w.required],dni:["",w.required],detalles:this.fb.array([])})}ngOnInit(){this.initDataForm(),this.getProductos()}_filter(e){let i=e?e.toString().toLowerCase():"";return this.productService.getAllProducts().pipe(k(o=>o.filter(d=>d.name.toLowerCase().includes(i))))}onProductSelected(e){this.selectedProducto=e,console.log("Producto seleccionado: ",e)}getProductos(){this.productService.getAllProducts().subscribe(e=>{this.productos=e,console.log("Productos:",e)})}initDataForm(){this.getLastCodeCotiVenta(),this.setCurretEmisionDate(),this.setCodigoEmpleado()}setCurretEmisionDate(){let e=new Date,i=e.getFullYear(),o=("0"+(e.getMonth()+1)).slice(-2),d=("0"+e.getDate()).slice(-2),h=`${i}-${o}-${d}`;this.cotizacionForm.patchValue({fechaemision:h})}setCodigoEmpleado(){let e=this.profileService.getIdEmpleado();this.cotizacionForm.patchValue({idempleado:e}),this.cotizacionForm.patchValue({estado:"Pendiente"})}getLastCodeCotiVenta(){this.cotizacionService.getLastCodeCotiVenta$().subscribe(e=>{this.cotizacionForm.patchValue({idcotizacion:e}),this.generateCode(e),console.log("Codigo de cotizacion:",e)})}generateCode(e){let i=e.slice(0,3),o=e.slice(3),h=(parseInt(o,10)+1).toString().padStart(o.length,"0"),P=`${i}${h}`;this.cotizacionForm.patchValue({idcotizacion:P}),this.cotizacionForm.get("idcotizacion").disable()}get detalles(){return this.cotizacionForm.get("detalles")}initDetalle(){let e=this.fb.group({idcotizacion:[{value:this.cotizacionForm.get("idcotizacion").value,disabled:!0}],producto:["",w.required],concentracion:[""],cantidad:["",w.required],total:[{value:"",disabled:!0}]}),i=e.get("producto");return this.filteredOptions.push(i.valueChanges.pipe(Te(""),ye(o=>this._filter(o)))),i.valueChanges.subscribe(o=>{let d=this.productos.find(h=>h.name===o);d&&(e.patchValue({concentracion:d.concentracion}),console.log("Producto seleccionado 22:",d))}),e}addDetalle(){this.detalles.push(this.initDetalle())}removeDetalle(e){this.detalles.removeAt(e)}asignarDetalles(){}calculateTotal(){if(this.cotizacionForm.valid){let e=this.cotizacionForm.getRawValue();console.log("Cotizacion data:",e);let i={idcotizacion:e.idcotizacion,idempleado:e.idempleado,estado:e.estado,nombrecliente:e.nombrecliente,montoproducto:e.montoproducto,fechaemision:e.fechaemision,email:e.email,montoimpuesto:e.montoimpuesto,montototal:e.montototal,departamento:e.departamento,dni:e.dni,detalles:e.detalles};console.log("Esto envio",i),this.cotizacionService.getMontoCotizacionVenta(i).subscribe(o=>{console.log("Cotizacion con montos:",o),this.cotizacionForm.patchValue({montoproducto:o.montoproducto,montoimpuesto:o.montoimpuesto,montototal:o.montototal,detalles:o.detalles})}),this.snackBar.open("Calculamos montos!","Cerrar",{duration:3e3,panelClass:["snack-bar-success"],verticalPosition:"top",horizontalPosition:"center"})}}saveEverything(){if(this.cotizacionForm.valid){let e=this.cotizacionForm.getRawValue();console.log("Cotizacion data:",e);let i={idcotizacion:e.idcotizacion,idempleado:e.idempleado,estado:e.estado,nombrecliente:e.nombrecliente,montoproducto:e.montoproducto,fechaemision:e.fechaemision,email:e.email,montoimpuesto:e.montoimpuesto,montototal:e.montototal,departamento:e.departamento,dni:e.dni,detalles:e.detalles};console.log("Esto envio",i);let o=!1;this.cotizacionService.createCotizacionVenta(i).subscribe(d=>{console.log("Cotizacion guardada exitosamente:",d),o=!0,o&&(this.snackBar.open("Productos y lotes guardados exitosamente!","Cerrar",{duration:3e3,panelClass:["snack-bar-success"],verticalPosition:"top",horizontalPosition:"center"}),this.cotizacionForm.reset(),this.detalles.clear(),this.initDataForm())},d=>{console.error("Error al guardar el producto y los lotes",d),this.snackBar.open("Error al guardar el producto y los lotes","Cerrar",{duration:3e3})})}else this.snackBar.open("Por favor completa el formulario correctamente","Cerrar",{duration:2e3})}cancel(){this.cotizacionForm.reset()}onSubmit(){this.cotizacionForm.valid&&console.log("Producto guardado existosamente:",this.cotizacionForm.getRawValue())}};a.\u0275fac=function(i){return new(i||a)(v(z),v(I),v(He),v(yt),v(dt))},a.\u0275cmp=y({type:a,selectors:[["app-form-cotizacion"]],decls:68,vars:3,consts:[["auto","matAutocomplete"],[1,"product-form-card"],[1,"product-form-grid",3,"ngSubmit","formGroup"],["appearance","fill"],["matInput","","formControlName","idcotizacion"],["matInput","","formControlName","idempleado"],["matInput","","formControlName","estado"],["matInput","","formControlName","dni"],["appearance","fill",1,"full-width"],["matInput","","formControlName","nombrecliente"],["matInput","","formControlName","montoproducto","type","number"],["matInput","","formControlName","montoimpuesto","type","number"],["matInput","","formControlName","montototal","type","number"],["matInput","","formControlName","fechaemision","type","date"],["matInput","","formControlName","email"],["formControlName","departamento"],[3,"value",4,"ngFor","ngForOf"],[1,"product-list","full-width"],["formArrayName","detalles"],["class","producto-form",3,"formGroupName",4,"ngFor","ngForOf"],[1,"action-buttons","full-width"],["mat-fab","","extended","","color","primary","type","button",1,"color-boton",3,"click"],["mat-raised-button","","color","accent","type","button",3,"click"],["mat-raised-button","","color","primary","type","submit",1,"color-boton-2",3,"click"],["mat-raised-button","","color","warn","type","button",3,"click"],[3,"value"],[1,"producto-form",3,"formGroupName"],["type","text","matInput","","formControlName","producto",3,"matAutocomplete"],[3,"optionSelected"],["matInput","","formControlName","cantidad","type","number"],["matInput","","formControlName","total","type","number"],["mat-icon-button","","color","warn",3,"click"]],template:function(i,o){i&1&&(r(0,"mat-card",1)(1,"mat-card-title"),m(2,"Registrar Cotizaci\xF3n"),n(),r(3,"form",2),p("ngSubmit",function(){return o.onSubmit()}),r(4,"mat-form-field",3)(5,"mat-label"),m(6,"C\xF3digo"),n(),f(7,"input",4),n(),r(8,"mat-form-field",3)(9,"mat-label"),m(10,"C\xF3digo Empleado"),n(),f(11,"input",5),n(),r(12,"mat-form-field",3)(13,"mat-label"),m(14,"Estado"),n(),f(15,"input",6),n(),r(16,"mat-form-field",3)(17,"mat-label"),m(18,"DNI"),n(),f(19,"input",7),n(),r(20,"mat-form-field",8)(21,"mat-label"),m(22,"Nombre cliente"),n(),f(23,"input",9),n(),r(24,"mat-form-field",3)(25,"mat-label"),m(26,"Monto"),n(),f(27,"input",10),n(),r(28,"mat-form-field",3)(29,"mat-label"),m(30,"Monto Impuesto"),n(),f(31,"input",11),n(),r(32,"mat-form-field",3)(33,"mat-label"),m(34,"Monto Total"),n(),f(35,"input",12),n(),r(36,"mat-form-field",3)(37,"mat-label"),m(38,"Fecha emisi\xF3n"),n(),f(39,"input",13),n(),r(40,"mat-form-field",8)(41,"mat-label"),m(42,"Email"),n(),f(43,"input",14),n(),r(44,"mat-form-field",3)(45,"mat-label"),m(46,"Departamento"),n(),r(47,"mat-select",15),u(48,fo,2,2,"mat-option",16),n()(),r(49,"div",17)(50,"h1")(51,"strong"),m(52,"Productos"),n()(),r(53,"div",18),u(54,_o,20,5,"div",19),n()(),r(55,"div",20)(56,"button",21),p("click",function(){return o.addDetalle()}),m(57,"Nuevo "),r(58,"mat-icon"),m(59,"add"),n()()()(),r(60,"div",20)(61,"button",22),p("click",function(){return o.calculateTotal()}),m(62,"Agregar Producto(s)"),n()(),r(63,"div",20)(64,"button",23),p("click",function(){return o.saveEverything()}),m(65,"Guardar"),n(),r(66,"button",24),p("click",function(){return o.cancel()}),m(67,"Cancelar"),n()()()),i&2&&(c(3),s("formGroup",o.cotizacionForm),c(45),s("ngForOf",o.departamentos),c(6),s("ngForOf",o.detalles.controls))},dependencies:[L,Q,U,rt,H,q,Z,Y,lt,mt,j,G,K,J,$e,B,Le,W,ae,pe,ct,X,Se,de],styles:[".product-form-card[_ngcontent-%COMP%]{width:100%;margin:20px auto;padding:20px;box-shadow:0 2px 10px #0000001a}.product-form-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(200px,1fr));gap:16px;width:100%}mat-form-field[_ngcontent-%COMP%]{width:100%}.full-width[_ngcontent-%COMP%]{grid-column:span 2}.product-list[_ngcontent-%COMP%]{grid-column:span 2;margin-top:20px}.producto-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px;align-items:center;margin-bottom:10px}@media (min-width: 600px){.producto-form[_ngcontent-%COMP%]{flex-direction:row}}.add-product-button[_ngcontent-%COMP%]{margin-top:10px}.action-buttons[_ngcontent-%COMP%]{grid-column:span 2;display:flex;justify-content:space-between;margin-top:20px}@media (max-width: 599px){.action-buttons[_ngcontent-%COMP%]{flex-direction:column;gap:10px}}  .snack-bar-success{background-color:transparent!important;box-shadow:none!important}  .success-snack-bar{animation:_ngcontent-%COMP%_fadeIn .5s ease-out,fadeOut .5s ease-in 2.5s forwards}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(-20px)}to{opacity:1;transform:translateY(0)}}@keyframes _ngcontent-%COMP%_fadeOut{0%{opacity:1;transform:translateY(0)}to{opacity:0;transform:translateY(-20px)}}.spacer[_ngcontent-%COMP%]{height:20px}.color-boton[_ngcontent-%COMP%]{background-color:#2cc498!important}.color-boton-2[_ngcontent-%COMP%]{background-color:#909090!important}"]});let t=a;return t})();var ho=()=>[5,10,20];function bo(t,a){if(t&1&&(r(0,"mat-option",40),m(1),n()),t&2){let l=a.$implicit;s("value",l.estado),c(),x(" ",l.estado," ")}}function xo(t,a){if(t&1&&(r(0,"mat-option",40),m(1),n()),t&2){let l=a.$implicit;s("value",l.metodo),c(),x(" ",l.metodo," ")}}function vo(t,a){t&1&&(r(0,"th",41),m(1," C\xF3digo "),n())}function Eo(t,a){if(t&1){let l=b();r(0,"td",42),p("click",function(){let i=g(l).$implicit,o=C();return _(o.onRowClicked(i))}),m(1),n()}if(t&2){let l=a.$implicit;c(),x(" ",l.idPedido," ")}}function So(t,a){t&1&&(r(0,"th",41),m(1," Pedido "),n())}function wo(t,a){if(t&1){let l=b();r(0,"td",42),p("click",function(){let i=g(l).$implicit,o=C();return _(o.onRowClicked(i))}),m(1),n()}if(t&2){let l=a.$implicit;c(),x(" ",l.idCotizacion," ")}}function Po(t,a){t&1&&(r(0,"th",41),m(1," idCliente "),n())}function Fo(t,a){if(t&1){let l=b();r(0,"td",42),p("click",function(){let i=g(l).$implicit,o=C();return _(o.onRowClicked(i))}),m(1),n()}if(t&2){let l=a.$implicit;c(),x(" ",l.idCliente," ")}}function Mo(t,a){t&1&&(r(0,"th",41),m(1," Metodo pago "),n())}function To(t,a){if(t&1){let l=b();r(0,"td",42),p("click",function(){let i=g(l).$implicit,o=C();return _(o.onRowClicked(i))}),m(1),n()}if(t&2){let l=a.$implicit,e=C();c(),x(" ",e.getMetodoPago(l.idMetodoPago)," ")}}function yo(t,a){t&1&&(r(0,"th",41),m(1," Estado Envio "),n())}function zo(t,a){if(t&1){let l=b();r(0,"td",42),p("click",function(){let i=g(l).$implicit,o=C();return _(o.onRowClicked(i))}),m(1),n()}if(t&2){let l=a.$implicit,e=C();c(),x(" ",e.getEstadoEnvio(l.idEstadoEnvio)," ")}}function Oo(t,a){t&1&&(r(0,"th",41),m(1," Codigo empleado "),n())}function Do(t,a){if(t&1){let l=b();r(0,"td",42),p("click",function(){let i=g(l).$implicit,o=C();return _(o.onRowClicked(i))}),m(1),n()}if(t&2){let l=a.$implicit;c(),x(" ",l.idEmpleado," ")}}function ko(t,a){t&1&&(r(0,"th",41),m(1," Fecha de entrega"),n())}function Vo(t,a){if(t&1){let l=b();r(0,"td",42),p("click",function(){let i=g(l).$implicit,o=C();return _(o.onRowClicked(i))}),m(1),T(2,"date"),n()}if(t&2){let l=a.$implicit;c(),x(" ",ce(2,1,l.fechaEntrega,"dd/MM/yyyy")," ")}}function Io(t,a){t&1&&(r(0,"th",41),m(1," Fecha de Emisi\xF3n "),n())}function No(t,a){if(t&1){let l=b();r(0,"td",42),p("click",function(){let i=g(l).$implicit,o=C();return _(o.onRowClicked(i))}),m(1),T(2,"date"),n()}if(t&2){let l=a.$implicit;c(),x(" ",ce(2,1,l.fechaEmision,"dd/MM/yyyy"),"")}}function Ao(t,a){t&1&&(r(0,"th",43),m(1," Actions "),n())}function Ro(t,a){if(t&1){let l=b();r(0,"td",44)(1,"button",45),p("click",function(){let i=g(l).$implicit,o=C();return _(o.goToFacturas(i.idPedido,i.fechaEntrega))}),r(2,"mat-icon"),m(3,"view_list"),n()()()}}function $o(t,a){t&1&&f(0,"tr",46)}function Lo(t,a){t&1&&f(0,"tr",47)}function Bo(t,a){if(t&1&&(r(0,"mat-option",40),m(1),n()),t&2){let l=a.$implicit;s("value",l.estado),c(),x(" ",l.estado," ")}}function jo(t,a){if(t&1&&(r(0,"mat-option",40),m(1),n()),t&2){let l=a.$implicit;s("value",l.metodo),c(),x(" ",l.metodo," ")}}function Go(t,a){if(t&1&&(r(0,"mat-option",40),m(1),n()),t&2){let l=a.$implicit;s("value",l.idempleado),c(),x(" ",l.idempleado," ")}}var ri=(()=>{let a=class a{constructor(e,i,o,d){this.fb=e,this.snackBar=i,this.pedidoService=o,this.clienteService=d,this.metodosP=[{idMetodoPago:1,metodo:"Efectivo"},{idMetodoPago:2,metodo:"BBVA"},{idMetodoPago:3,metodo:"ScotiaBank"},{idMetodoPago:4,metodo:"BCP"},{idMetodoPago:5,metodo:"PayPal"}],this.estadosE=[{idEstadoEnvio:1,estado:"En preparaci\xF3n"},{idEstadoEnvio:2,estado:"En transito"},{idEstadoEnvio:3,estado:"Entregado"},{idEstadoEnvio:4,estado:"Listo para enviar"}],this.selectedTab=1,this.selectOption="",this.tabs=[{label:"Seguimiento de pedidos",route:"/seguimiento/start"}],this.dataSource=new re,this.emitirDatosFact=new ie,this.displayedColumns=["idpedido","idcotizacion","idcliente","metodopago","estadoenvio","idempleado","fechaentrega","fechaemision","actions"],this.pedidos=[],this.clientes=[],this.transActivos=[],this.agregarPedidoForm=this.fb.group({idpedido:[{value:"",disabled:!0}],idcotizacion:[{value:"",disabled:!0}],idcliente:[{value:"",disabled:!0}],metodopago:["",w.required],estadoenvio:[{value:this.estadosE[0].estado,disabled:!0}],idempleado:[""],fechaentrega:["",w.required],fechaemision:["",w.required]}),this.editarPedidoForm=this.fb.group({idpedido:[{value:"",disabled:!0}],idcotizacion:[{value:"",disabled:!0}],idcliente:[{value:"",disabled:!0}],metodopago:[""],estadoenvio:[""],idempleado:[""],fechaentrega:[{value:"",disabled:!0}],fechaemision:[{value:"",disabled:!0}]})}ngOnInit(){this.loadTransportistas(),this.loadLastCode(),this.loadPedidos(),console.log("Tabla cargada")}ngOnChanges(e){e.idCotizacion&&e.idCotizacion.currentValue&&this.updatePedidoForm(this.idCotizacion,this.dni)}onTabSelected(e){this.selectOption=e,console.log(this.selectOption)}loadLastCode(){this.pedidoService.getLastCodePedido$().subscribe(e=>{this.agregarPedidoForm.patchValue({idcodigo:e}),this.generateCode(e),console.log("ultim Code:",e)}),this.agregarPedidoForm.patchValue({idpedido:this.lastCode})}generateCode(e){let o=parseInt(e.substring(e.length-3))+1;this.agregarPedidoForm.patchValue({idpedido:`PE-00${o}`}),this.agregarPedidoForm.get("idpedido").disable()}loadPedidos(){this.pedidoService.getAllPedidos().subscribe(e=>{console.log("Pedidos recibidos:  ",e),this.pedidos=e,console.log("Pedidos en el arreglo de pedidos: ",this.pedidos),this.dataSource=new re(this.pedidos=this.pedidos.map(i=>(i.fechaEmision=this.adjustDate(i.fechaEmision),i.fechaEntrega=this.adjustDate(i.fechaEntrega),i))),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort})}adjustDate(e){let i=new Date(e);return i.setMinutes(i.getMinutes()+i.getTimezoneOffset()),i}loadTransportistas(){this.pedidoService.getTransportistasActivos().subscribe(e=>{console.log("Transportista recibidos:  ",e),this.transActivos=e})}onRowClicked(e){this.editarPedidoForm.patchValue({idpedido:e.idPedido,idcotizacion:e.idCotizacion,idcliente:e.idCliente,metodopago:this.getMetodoPago(e.idMetodoPago),estadoenvio:this.getEstadoEnvio(e.idEstadoEnvio),idempleado:e.idEmpleado,fechaentrega:e.fechaEntrega,fechaemision:e.fechaEmision})}onCancel(){this.agregarPedidoForm.reset(),this.editarPedidoForm.reset()}onSave(){if(this.agregarPedidoForm.valid){let e=this.agregarPedidoForm.getRawValue(),i={idPedido:e.idpedido,idCotizacion:e.idcotizacion,idCliente:e.idcliente,idMetodoPago:this.getIdMetodoPago(e.metodopago),idEstadoEnvio:this.getIdEstadoEnvio(e.estadoenvio),idEmpleado:e.idempleado,fechaEntrega:e.fechaentrega,fechaEmision:e.fechaemision};console.log("El dto de pedido: ",i),this.pedidoService.createPedido(i).subscribe(o=>{console.log("Pedido save exitosamente: ",o),this.agregarPedidoForm.reset(),this.loadLastCode(),this.loadPedidos()},o=>{console.error("Error al guardar el pedido",o)})}else this.snackBar.open("Por favor completa el formulario correctamente","Cerrar",{duration:2e3})}actualizar(){if(this.editarPedidoForm.valid){let e=this.editarPedidoForm.getRawValue(),i=e.idpedido,o={idPedido:e.idpedido,idCotizacion:e.idcotizacion,idCliente:e.idcliente,idMetodoPago:this.getIdMetodoPago(e.metodopago),idEstadoEnvio:this.getIdEstadoEnvio(e.estadoenvio),idEmpleado:e.idempleado,fechaEntrega:e.fechaentrega,fechaEmision:e.fechaemision};console.log("El dto de pedido: ",o),this.pedidoService.updatePedido(i,o).subscribe(d=>{console.log("Pedido save exitosamente: ",d),this.editarPedidoForm.reset(),this.loadPedidos()},d=>{console.error("Error al actualizar el pedido",d)})}else this.snackBar.open("Por favor completa el formulario correctamente","Cerrar",{duration:2e3})}onSubmit(){this.agregarPedidoForm.valid&&console.log("Pedido guardado exitosamente:",this.agregarPedidoForm.getRawValue())}updatePedidoForm(e,i){this.clienteService.getAllClients().subscribe(o=>{this.clientes=o,console.log("Clientes cargados: ",this.clientes);let d=this.clientes.find(h=>h.dni===i);d?this.agregarPedidoForm.patchValue({idcotizacion:e,idcliente:d.id_cliente}):console.error(`No se encontr\xF3 cliente con DNI ${i}`)})}getMetodoPago(e){let i=this.metodosP.find(o=>o.idMetodoPago===e);return i?i.metodo:"Desconocido"}getEstadoEnvio(e){let i=this.estadosE.find(o=>o.idEstadoEnvio===e);return i?i.estado:"Desconocido"}getIdMetodoPago(e){console.log("Metodos de pago: ",e);let i=this.metodosP.find(o=>o.metodo===e);return i?i.idMetodoPago:(console.warn(`M\xE9todo de pago "${e}" no encontrado.`),0)}getIdEstadoEnvio(e){return this.estadosE.find(o=>o.estado===e).idEstadoEnvio}goToFacturas(e,i){this.emitirDatosFact.emit({idpedido:e,fechaentrega:i})}};a.\u0275fac=function(i){return new(i||a)(v(z),v(I),v(st),v(Ue))},a.\u0275cmp=y({type:a,selectors:[["app-form-pedido"]],viewQuery:function(i,o){if(i&1&&(A(D,5),A(O,5)),i&2){let d;R(d=$())&&(o.paginator=d.first),R(d=$())&&(o.sort=d.first)}},inputs:{idCotizacion:"idCotizacion",dni:"dni"},outputs:{emitirDatosFact:"emitirDatosFact"},features:[et],decls:132,vars:22,consts:[["deadlinePicker",""],["paymentDatePicker",""],["deadlinePicker1",""],["paymentDatePicker1",""],[1,"product-form-card"],[1,"titulo"],[1,"product-form-grid",3,"ngSubmit","formGroup"],["appearance","fill"],["matInput","","formControlName","idpedido"],["matInput","","formControlName","idcotizacion",3,"value"],["matInput","","formControlName","idcliente"],["formControlName","estadoenvio"],[3,"value",4,"ngFor","ngForOf"],["formControlName","metodopago"],["matInput","","formControlName","fechaentrega",3,"matDatepicker"],["matSuffix","",3,"for"],["matInput","","formControlName","fechaemision",3,"matDatepicker"],[1,"action-buttons"],["mat-raised-button","","color","primary",3,"click"],["mat-raised-button","","color","warn",3,"click"],[1,"mat-elevation-z8"],[1,"responsive-table-container"],["mat-table","","matSort","",1,"full-width-table",3,"dataSource"],["matColumnDef","idpedido"],["class","font-cabecera","mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["class","font-test","mat-cell","",3,"click",4,"matCellDef"],["matColumnDef","idcotizacion"],["matColumnDef","idcliente"],["matColumnDef","metodopago"],["matColumnDef","estadoenvio"],["matColumnDef","idempleado"],["matColumnDef","fechaentrega"],["matColumnDef","fechaemision"],["matColumnDef","actions"],["class","font-cabecera","mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","",3,"pageSizeOptions"],["formControlName","idempleado"],[3,"value"],["mat-header-cell","","mat-sort-header","",1,"font-cabecera"],["mat-cell","",1,"font-test",3,"click"],["mat-header-cell","",1,"font-cabecera"],["mat-cell",""],["mat-icon-button","","color","primary",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(i,o){if(i&1){let d=b();r(0,"mat-card")(1,"div",4)(2,"mat-card-title",5),m(3,"Agregar Pedido"),n(),r(4,"form",6),p("ngSubmit",function(){return g(d),_(o.onSubmit())}),r(5,"mat-form-field",7)(6,"mat-label"),m(7,"Codigo Pedido"),n(),f(8,"input",8),n(),r(9,"mat-form-field",7)(10,"mat-label"),m(11,"Codigo Cotizacion"),n(),f(12,"input",9),n(),r(13,"mat-form-field",7)(14,"mat-label"),m(15,"Codigo Cliente"),n(),f(16,"input",10),n(),r(17,"mat-form-field",7)(18,"mat-label"),m(19,"Estado Envio"),n(),r(20,"mat-select",11),u(21,bo,2,2,"mat-option",12),n()(),r(22,"mat-form-field",7)(23,"mat-label"),m(24,"Metodo Pago"),n(),r(25,"mat-select",13),u(26,xo,2,2,"mat-option",12),n()(),r(27,"mat-form-field",7)(28,"mat-label"),m(29,"Fecha Entrega"),n(),f(30,"input",14)(31,"mat-datepicker-toggle",15)(32,"mat-datepicker",null,0),n(),r(34,"mat-form-field",7)(35,"mat-label"),m(36,"Fecha Emision"),n(),f(37,"input",16)(38,"mat-datepicker-toggle",15)(39,"mat-datepicker",null,1),n()(),r(41,"div",17)(42,"button",18),p("click",function(){return g(d),_(o.onSave())}),m(43,"Agregar"),n(),r(44,"button",19),p("click",function(){return g(d),_(o.onCancel())}),m(45,"Cancelar"),n()()(),r(46,"mat-card-title",5),m(47,"Pedidos"),n(),r(48,"div",20)(49,"div",21)(50,"table",22),E(51,23),u(52,vo,2,0,"th",24)(53,Eo,2,1,"td",25),S(),E(54,26),u(55,So,2,0,"th",24)(56,wo,2,1,"td",25),S(),E(57,27),u(58,Po,2,0,"th",24)(59,Fo,2,1,"td",25),S(),E(60,28),u(61,Mo,2,0,"th",24)(62,To,2,1,"td",25),S(),E(63,29),u(64,yo,2,0,"th",24)(65,zo,2,1,"td",25),S(),E(66,30),u(67,Oo,2,0,"th",24)(68,Do,2,1,"td",25),S(),E(69,31),u(70,ko,2,0,"th",24)(71,Vo,3,4,"td",25),S(),E(72,32),u(73,Io,2,0,"th",24)(74,No,3,4,"td",25),S(),E(75,33),u(76,Ao,2,0,"th",34)(77,Ro,4,0,"td",35),S(),u(78,$o,1,0,"tr",36)(79,Lo,1,0,"tr",37),n(),f(80,"mat-paginator",38),n()(),r(81,"div",4)(82,"mat-card-title",5),m(83,"Actualizar Pedido"),n(),f(84,"br"),r(85,"form",6),p("ngSubmit",function(){return g(d),_(o.onSubmit())}),r(86,"mat-form-field",7)(87,"mat-label"),m(88,"Codigo Pedido"),n(),f(89,"input",8),n(),r(90,"mat-form-field",7)(91,"mat-label"),m(92,"Codigo Cotizacion"),n(),f(93,"input",9),n(),r(94,"mat-form-field",7)(95,"mat-label"),m(96,"Codigo Cliente"),n(),f(97,"input",10),n(),r(98,"mat-form-field",7)(99,"mat-label"),m(100,"Estado Envio"),n(),r(101,"mat-select",11),u(102,Bo,2,2,"mat-option",12),n()(),r(103,"mat-form-field",7)(104,"mat-label"),m(105,"Metodo Pago"),n(),r(106,"mat-select",13),u(107,jo,2,2,"mat-option",12),n()(),r(108,"mat-form-field",7)(109,"mat-label"),m(110,"Codigo empleado"),n(),r(111,"mat-select",39),u(112,Go,2,2,"mat-option",12),n()(),r(113,"mat-form-field",7)(114,"mat-label"),m(115,"Fecha Entrega"),n(),f(116,"input",14)(117,"mat-datepicker-toggle",15)(118,"mat-datepicker",null,2),n(),r(120,"mat-form-field",7)(121,"mat-label"),m(122,"Fecha Emision"),n(),f(123,"input",16)(124,"mat-datepicker-toggle",15)(125,"mat-datepicker",null,3),n()(),r(127,"div",17)(128,"button",18),p("click",function(){return g(d),_(o.actualizar())}),m(129,"Actualizar"),n(),r(130,"button",19),p("click",function(){return g(d),_(o.onCancel())}),m(131,"Cancelar"),n()()()()}if(i&2){let d=F(33),h=F(40),P=F(119),M=F(126);c(4),s("formGroup",o.agregarPedidoForm),c(8),s("value",o.idCotizacion),c(9),s("ngForOf",o.estadosE),c(5),s("ngForOf",o.metodosP),c(4),s("matDatepicker",d),c(),s("for",d),c(6),s("matDatepicker",h),c(),s("for",h),c(12),s("dataSource",o.dataSource),c(28),s("matHeaderRowDef",o.displayedColumns),c(),s("matRowDefColumns",o.displayedColumns),c(),s("pageSizeOptions",le(21,ho)),c(5),s("formGroup",o.editarPedidoForm),c(8),s("value",o.idCotizacion),c(9),s("ngForOf",o.estadosE),c(5),s("ngForOf",o.metodosP),c(5),s("ngForOf",o.transActivos),c(4),s("matDatepicker",P),c(),s("for",P),c(6),s("matDatepicker",M),c(),s("for",M)}},dependencies:[L,Q,U,H,q,Z,Y,j,G,K,J,se,B,W,ae,pe,ue,ge,be,_e,fe,xe,Ce,he,ve,Ee,X,Se,we,Pe,Fe,O,Me,D,Ne],styles:[".main-content[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;margin-left:250px;margin-top:0}.responsive-table-container[_ngcontent-%COMP%]{width:100%;overflow-x:auto}.tab-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin:20px 40px}.tab-content[_ngcontent-%COMP%]{padding:20px;background:linear-gradient(145deg,#f0f4f8,#dfe3e8);box-shadow:0 10px 20px #0000001a;width:calc(100% - 20px);margin:auto;border-radius:12px;color:#333;font-family:Roboto,sans-serif}.mat-card-title[_ngcontent-%COMP%]{font-size:1.5rem;color:#3f51b5;text-align:center}.mat-mdc-row[_ngcontent-%COMP%]   .mat-mdc-cell[_ngcontent-%COMP%]{border-bottom:1px solid transparent;border-top:1px solid transparent;cursor:pointer}.mat-mdc-row[_ngcontent-%COMP%]:hover   .mat-mdc-cell[_ngcontent-%COMP%]{border-color:currentColor}.demo-row-is-clicked[_ngcontent-%COMP%]{font-weight:700}.full-width-table[_ngcontent-%COMP%]{width:100%;overflow:auto}.mat-elevation-z8[_ngcontent-%COMP%]{padding:16px}mat-icon[_ngcontent-%COMP%]{font-size:1em}.titulo[_ngcontent-%COMP%]{font-family:Kanit,sans-serif;padding:16px}.font-test[_ngcontent-%COMP%]{font-family:Courier Prime,monospace;font-weight:500;font-style:normal}.font-cabecera[_ngcontent-%COMP%]{font-family:Oxygen,sans-serif;font-weight:700;font-style:normal}.filters-container[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-bottom:16px}.filters[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:16px;max-width:800px}.mat-form-field[_ngcontent-%COMP%]{flex:1;min-width:200px}@media (max-width: 600px){.filters[_ngcontent-%COMP%]{flex-direction:column;align-items:center}.mat-form-field[_ngcontent-%COMP%]{min-width:100%}}.full-width-table[_ngcontent-%COMP%]{width:100%;margin-bottom:24px}.product-form-card[_ngcontent-%COMP%]{width:100%;margin:20px auto;padding:20px;box-shadow:0 2px 10px #0000001a}.product-form-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(300px,1fr));gap:16px;width:100%}.action-buttons[_ngcontent-%COMP%]{margin-top:20px;display:flex;justify-content:space-between}"]});let t=a;return t})();var Ho=()=>[5,10,20];function qo(t,a){if(t&1&&(r(0,"mat-option",58),m(1),n()),t&2){let l=a.$implicit;s("value",l.nombre),c(),V(l.nombre)}}function Qo(t,a){t&1&&(r(0,"th",59),m(1," C\xF3digo "),n())}function Zo(t,a){if(t&1){let l=b();r(0,"td",60),p("click",function(){let i=g(l).$implicit,o=C();return _(o.onRowClicked(i))}),m(1),n()}if(t&2){let l=a.$implicit;c(),x(" ",l.idcotizacion," ")}}function Yo(t,a){t&1&&(r(0,"th",59),m(1," Empleado "),n())}function Jo(t,a){if(t&1){let l=b();r(0,"td",60),p("click",function(){let i=g(l).$implicit,o=C();return _(o.onRowClicked(i))}),m(1),n()}if(t&2){let l=a.$implicit;c(),x(" ",l.idempleado," ")}}function Ko(t,a){t&1&&(r(0,"th",59),m(1," Estado "),n())}function Wo(t,a){if(t&1){let l=b();r(0,"td",60),p("click",function(){let i=g(l).$implicit,o=C();return _(o.onRowClicked(i))}),m(1),n()}if(t&2){let l=a.$implicit;c(),x(" ",l.estado," ")}}function Xo(t,a){t&1&&(r(0,"th",59),m(1,"DNI "),n())}function en(t,a){if(t&1){let l=b();r(0,"td",60),p("click",function(){let i=g(l).$implicit,o=C();return _(o.onRowClicked(i))}),m(1),n()}if(t&2){let l=a.$implicit;c(),x(" ",l.dni," ")}}function tn(t,a){t&1&&(r(0,"th",59),m(1,"Cliente "),n())}function on(t,a){if(t&1){let l=b();r(0,"td",60),p("click",function(){let i=g(l).$implicit,o=C();return _(o.onRowClicked(i))}),m(1),n()}if(t&2){let l=a.$implicit;c(),x(" ",l.nombrecliente," ")}}function nn(t,a){t&1&&(r(0,"th",59),m(1,"Monto inicial"),n())}function an(t,a){if(t&1){let l=b();r(0,"td",60),p("click",function(){let i=g(l).$implicit,o=C();return _(o.onRowClicked(i))}),m(1),T(2,"currency"),n()}if(t&2){let l=a.$implicit;c(),x(" ",ot(2,1,l.montoproducto,"PEN",!0,"1.2-2")," ")}}function rn(t,a){t&1&&(r(0,"th",59),m(1," Fecha Emision "),n())}function ln(t,a){if(t&1){let l=b();r(0,"td",60),p("click",function(){let i=g(l).$implicit,o=C();return _(o.onRowClicked(i))}),m(1),T(2,"date"),n()}if(t&2){let l=a.$implicit;c(),x(" ",ce(2,1,l.fechaemision,"dd/MM/yyyy")," ")}}function mn(t,a){t&1&&(r(0,"th",59),m(1," Email"),n())}function cn(t,a){if(t&1){let l=b();r(0,"td",60),p("click",function(){let i=g(l).$implicit,o=C();return _(o.onRowClicked(i))}),m(1),n()}if(t&2){let l=a.$implicit;c(),x(" ",l.email," ")}}function dn(t,a){t&1&&(r(0,"th",59),m(1," Monto Impuesto"),n())}function sn(t,a){if(t&1){let l=b();r(0,"td",60),p("click",function(){let i=g(l).$implicit,o=C();return _(o.onRowClicked(i))}),m(1),T(2,"currency"),n()}if(t&2){let l=a.$implicit;c(),x(" ",ot(2,1,l.montoimpuesto,"PEN",!0,"1.2-2")," ")}}function pn(t,a){t&1&&(r(0,"th",59),m(1," Monto Total "),n())}function un(t,a){if(t&1){let l=b();r(0,"td",60),p("click",function(){let i=g(l).$implicit,o=C();return _(o.onRowClicked(i))}),m(1),T(2,"currency"),n()}if(t&2){let l=a.$implicit;c(),x(" ",ot(2,1,l.montototal,"PEN",!0,"1.2-2")," ")}}function fn(t,a){t&1&&(r(0,"th",59),m(1," departamento"),n())}function gn(t,a){if(t&1){let l=b();r(0,"td",60),p("click",function(){let i=g(l).$implicit,o=C();return _(o.onRowClicked(i))}),m(1),n()}if(t&2){let l=a.$implicit;c(),x(" ",l.departamento," ")}}function _n(t,a){t&1&&(r(0,"th",61),m(1," Actions "),n())}function Cn(t,a){if(t&1){let l=b();r(0,"td",62)(1,"button",63),p("click",function(){let i=g(l).$implicit,o=C();return _(o.goToPedidos(i.idcotizacion,i.dni))}),r(2,"mat-icon"),m(3,"view_list"),n()(),r(4,"button",63),p("click",function(){let i=g(l).$implicit,o=C();return _(o.getCotizacionPdf(i.idcotizacion))}),r(5,"mat-icon"),m(6,"print"),n()()()}}function hn(t,a){t&1&&f(0,"tr",64)}function bn(t,a){t&1&&f(0,"tr",65)}function xn(t,a){if(t&1&&(r(0,"mat-option",58),m(1),n()),t&2){let l=a.$implicit;s("value",l.nombre),c(),V(l.nombre)}}function vn(t,a){if(t&1&&(r(0,"mat-option",58),m(1),n()),t&2){let l=a.$implicit;s("value",l.nombre),c(),V(l.nombre)}}function En(t,a){if(t&1&&(r(0,"mat-option",58),m(1),n()),t&2){let l=a.$implicit;s("value",l.name),c(),it(" ",l.name,"-",l.concentracion,"-",l.presentation," ")}}function Sn(t,a){if(t&1){let l=b();r(0,"div",66)(1,"mat-form-field",67)(2,"mat-label"),m(3,"Producto"),n(),f(4,"input",68),r(5,"mat-autocomplete",69,1),p("optionSelected",function(i){g(l);let o=C();return _(o.onProductSelected(i.option.value))}),u(7,En,2,4,"mat-option",11),T(8,"async"),n()(),r(9,"mat-form-field",70)(10,"mat-label"),m(11,"Cantidad"),n(),f(12,"input",71),n(),r(13,"mat-form-field",70)(14,"mat-label"),m(15,"Total"),n(),f(16,"input",72),n(),r(17,"div",73)(18,"button",74),p("click",function(){let i=g(l).index,o=C();return _(o.removeDetalle(i))}),r(19,"mat-icon"),m(20,"delete"),n()()()()}if(t&2){let l=a.index,e=F(6),i=C();s("formGroupName",l),c(4),s("matAutocomplete",e),c(3),s("ngForOf",me(8,3,i.filteredOptions[l]))}}var li=(()=>{let a=class a{constructor(e,i,o,d,h){this.fb=e,this.snackBar=i,this.cotizacionService=o,this.productService=d,this.clienteService=h,this.isNewButtonEnabled=!1,this.emitirIdDeCotizacion=new ie,this.cotizacionControl=new at,this.selectedCotizacion=null,this.displayedColumns=["idcotizacion","idempleado","estado","dni","nombrecliente","montoproducto","fechaemision","email","montoimpuesto","montototal","departamento","actions"],this.productos=[],this.selectedProducto=null,this.filteredOptions=[],this.cotizacionesFalsas=[],this.clientes=[],this.departamentos=[{id:1,nombre:"MOQUEGUA"},{id:2,nombre:"LA LIBERTAD"},{id:3,nombre:"LIMA"},{id:4,nombre:"AREQUIPA"},{id:5,nombre:"LORETO"},{id:6,nombre:"PIURA"},{id:7,nombre:"AYACUCHO"},{id:8,nombre:"JUNIN"},{id:9,nombre:"ICA"},{id:10,nombre:"LAMBAYAQUE"},{id:11,nombre:"CAJARMACA"},{id:12,nombre:"UCAYALI"},{id:13,nombre:"ANCASH"},{id:14,nombre:"HUANCAVELICA"},{id:15,nombre:"TUMBES"},{id:16,nombre:"PUNO"},{id:17,nombre:"TACNA"},{id:18,nombre:"SAN MARTIN"},{id:19,nombre:"AMAZONAS"},{id:20,nombre:"PASCO"},{id:21,nombre:"APURIMAC"},{id:22,nombre:"MADRE DE DIOS"},{id:23,nombre:"CUZCO"},{id:24,nombre:"HUANUCO"}],this.navigateToPedidos=new ie,this.estados=[{id:1,nombre:"Pendiente"},{id:2,nombre:"Aceptado"},{id:3,nombre:"Rechazado"}],this.filterForm=this.fb.group({idcotizacion:[""],estado:[""],dni:[""],fechaemision:[""]}),this.cotizacionForm=this.fb.group({idcotizacion:[{value:"",disabled:!0}],idempleado:[{value:"",disabled:!0}],estado:["",w.required],nombrecliente:["",w.required],montoproducto:[{value:"",disabled:!0}],fechaemision:[{value:"",disabled:!0}],email:["",w.required],montoimpuesto:[{value:"",disabled:!0}],montototal:[{value:"",disabled:!0}],departamento:["",w.required],dni:["",w.required],detalles:this.fb.array([])})}ngOnInit(){this.getProductos(),this.getClientes(),this.getAllCotizaciones()}_filter(e){let i=e?e.toString().toLowerCase():"";return this.productService.getAllProducts().pipe(k(o=>o.filter(d=>d.name.toLowerCase().includes(i))))}getProductos(){this.productService.getAllProducts().subscribe(e=>{this.productos=e,console.log("Productos:",e)})}getClientes(){this.clienteService.getAllClients().subscribe(e=>{this.clientes=e,console.log("Clientes:",e)})}onProductSelected(e){this.selectedProducto=e,console.log("Producto seleccionado: ",this.selectedProducto)}getAllCotizaciones(){this.cotizacionService.getAllCotizacionesVenta$().subscribe(e=>{console.log("Cotizaciones recibido en el ts: ",e),this.cotizacionesFalsas=e,this.dataSource=new re(this.cotizacionesFalsas),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort})}get detalles(){return this.cotizacionForm.get("detalles")}setDetalles(e){let i=this.cotizacionForm.get("detalles");i.clear(),this.filteredOptions=[],e.forEach(o=>{let d=this.fb.group({idcotizacion:[{value:o.idcotizacion,disabled:!0}],producto:[o.producto,w.required],concentracion:[o.concentracion],cantidad:[o.cantidad,w.required],total:[{value:o.total,disabled:!0}]}),h=d.get("producto");this.filteredOptions.push(h.valueChanges.pipe(Te(""),ye(P=>this._filter(P)))),h.valueChanges.subscribe(P=>{let M=this.productos.find(di=>di.name===P);M&&d.patchValue({concentracion:M.concentracion})}),i.push(d)})}initDetalle(){let e=this.fb.group({idcotizacion:[{value:this.cotizacionForm.get("idcotizacion").value,disabled:!0}],producto:["",w.required],concentracion:[""],cantidad:["",w.required],total:[{value:"",disabled:!0}]}),i=e.get("producto");return this.filteredOptions.push(i.valueChanges.pipe(Te(""),ye(o=>this._filter(o)))),console.log("Entro a initDetalle"),i.valueChanges.subscribe(o=>{let d=this.productos.find(h=>h.name===o);d&&(e.patchValue({concentracion:d.concentracion}),console.log("Concentracion:",d.concentracion))}),e}addDetalle(){this.detalles.push(this.initDetalle())}removeDetalle(e){let i=this.cotizacionForm.get("detalles"),o={idcotizacion:this.cotizacionForm.get("idcotizacion").value,producto:i.at(e).get("producto").value,cantidad:i.at(e).get("cantidad").value,concentracion:i.at(e).get("concentracion").value,total:i.at(e).get("total").value};console.log("Eliminando detalle en el indice:",o),this.cotizacionService.deleteDetalleCotizacionVenta(o).subscribe(d=>{console.log("Detalle eliminado exitosamente:",d)}),i.removeAt(e)}onCotizacionSelected(e){this.selectedCotizacion=e,this.cotizacionControl.setValue(e.nombrecliente),console.log("Cotizacion seleccionada: ",e)}resetFilters(){this.filterForm.reset(),this.dataSource.filter=""}onRowClicked(e){this.selectedCotizacion=e;let i=new Date(e.fechaemision).toISOString().split("T")[0],o=this.estados.find(h=>h.nombre===e.estado),d=this.departamentos.find(h=>h.nombre===e.departamento);this.cotizacionForm.patchValue({idcotizacion:e.idcotizacion,idempleado:e.idempleado,estado:o?o.nombre:"",nombrecliente:e.nombrecliente,montoproducto:e.montoproducto,fechaemision:i,email:e.email,dni:e.dni,montoimpuesto:e.montoimpuesto,montototal:e.montototal,departamento:d?d.nombre:""}),this.setDetalles(e.detalles),this.index_size=e.detalles.length,console.log("Cotizacion seleccionada:",this.index_size),this.isNewButtonEnabled=!0}onSave(){if(this.cotizacionForm.valid){console.log("Hola");let e=this.cotizacionForm.getRawValue(),i={idcotizacion:e.idcotizacion,idempleado:e.idempleado,estado:e.estado,nombrecliente:e.nombrecliente,montoproducto:e.montoproducto,fechaemision:e.fechaemision,email:e.email,montoimpuesto:e.montoimpuesto,montototal:e.montototal,departamento:e.departamento,dni:e.dni,detalles:e.detalles};this.cotizacionService.updateCotizacionVenta(i).subscribe(o=>{console.log("Respuesta",o),this.snackBar.open("Factura guardada exitosamente","Cerrar",{duration:2e3,panelClass:["mat-toolbar","mat-primary"],verticalPosition:"top",horizontalPosition:"center"}),console.log("Cotizacion guardada:",i),this.cotizacionForm.reset(),this.getAllCotizaciones(),this.clearDetalles(),this.isNewButtonEnabled=!1})}else this.snackBar.open("Por favor completa el formulario correctamente","Cerrar",{duration:2e3})}applyFilter(e,i){let o=e.value?e.value:e.target.value;this.dataSource.filterPredicate=(h,P)=>{let M=JSON.parse(P);return(M.idcotizacion?h.idcotizacion.toLowerCase().includes(M.idcotizacion):!0)&&(M.estado?h.estado.toLowerCase().includes(M.estado):!0)&&(M.dni?h.dni.toLowerCase().includes(M.dni):!0)&&(M.fechaemision?new Date(h.fechaemision).toDateString()===new Date(M.fechaemision).toDateString():!0)};let d={idcotizacion:i==="idcotizacion"?o.trim().toLowerCase():"",estado:i==="estado"?o.trim().toLowerCase():"",dni:i==="dni"?o.trim().toLowerCase():"",fechaemision:i==="fechaemision"?new Date(o).toISOString():""};this.dataSource.filter=JSON.stringify(d)}onSubmit(){this.cotizacionForm.valid&&console.log("Factura actualizada exitosamente:",this.cotizacionForm.getRawValue())}asignarDetalles(){}calculateTotal(){if(this.cotizacionForm.valid){let e=this.cotizacionForm.getRawValue();console.log("Cotizacion data:",e);let i={idcotizacion:e.idcotizacion,idempleado:e.idempleado,estado:e.estado,nombrecliente:e.nombrecliente,montoproducto:e.montoproducto,fechaemision:e.fechaemision,email:e.email,montoimpuesto:e.montoimpuesto,montototal:e.montototal,departamento:e.departamento,dni:e.dni,detalles:e.detalles};console.log("Esto envio",i),this.cotizacionService.getMontoCotizacionVenta(i).subscribe(o=>{console.log("Cotizacion con montos:",o),this.cotizacionForm.patchValue({montoproducto:o.montoproducto,montoimpuesto:o.montoimpuesto,montototal:o.montototal,detalles:o.detalles})}),this.snackBar.open("Calculamos montos!","Cerrar",{duration:3e3,panelClass:["snack-bar-success"],verticalPosition:"top",horizontalPosition:"center"})}}clearDetalles(){let e=this.cotizacionForm.get("detalles");for(;e.length!==0;)e.removeAt(0)}onCancel(){this.resetFilters(),this.cotizacionForm.reset(),this.clearDetalles(),this.isNewButtonEnabled=!1}goToPedidos(e,i){this.clientes.find(d=>d.dni===i)?this.navigateToPedidos.emit({idcotizacion:e,dni:i}):(this.emitirIdDeCotizacion.emit(e),this.snackBar.open("El cliente no est\xE1 registrado.","Cerrar",{duration:3e3,panelClass:["snack-bar-warning"],verticalPosition:"top",horizontalPosition:"center"}))}getCotizacionPdf(e){this.cotizacionService.getCotizacionPdf(e).subscribe(i=>{console.log("Respuesta:",i);let o=new Blob([i],{type:"application/pdf"}),d=window.URL.createObjectURL(o);window.open(d)},i=>{console.error("Error al obtener el PDF de la cotizaci\xF3n",i)})}};a.\u0275fac=function(i){return new(i||a)(v(z),v(I),v(He),v(dt),v(Ue))},a.\u0275cmp=y({type:a,selectors:[["app-tabla-cotizacion"]],viewQuery:function(i,o){if(i&1&&(A(D,5),A(O,5)),i&2){let d;R(d=$())&&(o.paginator=d.first),R(d=$())&&(o.sort=d.first)}},outputs:{emitirIdDeCotizacion:"emitirIdDeCotizacion",navigateToPedidos:"navigateToPedidos"},decls:140,vars:14,consts:[["picker",""],["auto","matAutocomplete"],[1,"product-form-card"],[1,"titulo"],[1,"mat-elevation-z8"],[3,"formGroup"],["fxLayout","row wrap","fxLayoutGap","16px","fxLayoutAlign","center center",1,"filters-container"],["appearance","fill","fxFlex.gt-sm","30","fxFlex.sm","45","fxFlex.xs","100"],["matInput","","formControlName","idcotizacion","placeholder","C\xF3digo de Pedido",3,"input"],["formControlName","estado","placeholder","Estado de Pago",3,"selectionChange"],["value",""],[3,"value",4,"ngFor","ngForOf"],["type","text","matInput","","formControlName","dni","placeholder","Nombre de Cliente",3,"input"],["matInput","","formControlName","fechaemision","placeholder","Fecha de Emisi\xF3n",3,"dateChange","matDatepicker"],["matSuffix","",3,"for"],["mat-raised-button","","color","primary",3,"click"],[1,"responsive-table-container"],["mat-table","","matSort","",1,"full-width-table",3,"dataSource"],["matColumnDef","idcotizacion"],["class","font-cabecera","mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["class","font-test","mat-cell","",3,"click",4,"matCellDef"],["matColumnDef","idempleado"],["matColumnDef","estado"],["matColumnDef","dni"],["matColumnDef","nombrecliente"],["matColumnDef","montoproducto"],["matColumnDef","fechaemision"],["matColumnDef","email"],["matColumnDef","montoimpuesto"],["matColumnDef","montototal"],["matColumnDef","departamento"],["matColumnDef","actions"],["class","font-cabecera","mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","",3,"pageSizeOptions"],["fxLayout","row wrap","fxLayoutGap","16px",1,"product-form-grid",3,"formGroup"],["appearance","fill","fxFlex","50"],["matInput","","formControlName","idcotizacion"],["matInput","","formControlName","idempleado"],["formControlName","estado"],["matInput","","formControlName","nombrecliente"],["matInput","","formControlName","montoproducto","type","number"],["matInput","","formControlName","fechaemision","type","date"],["matInput","","formControlName","dni"],["matInput","","formControlName","email","type","email"],["matInput","","formControlName","montoimpuesto","type","number"],["matInput","","formControlName","montototal","type","number"],["formControlName","departamento"],["fxFlex","100",1,"product-list"],["formArrayName","detalles","fxLayout","column","fxLayoutGap","16px"],["class","producto-form","fxLayout","row wrap","fxLayoutGap","16px",3,"formGroupName",4,"ngFor","ngForOf"],["fxFlex","100",1,"action-buttons"],["mat-fab","","extended","","color","primary","type","button",3,"click","disabled"],["mat-raised-button","","color","accent","type","button",3,"click"],["mat-raised-button","","color","primary","type","submit",3,"click"],["mat-raised-button","","color","warn","type","button",3,"click"],[3,"value"],["mat-header-cell","","mat-sort-header","",1,"font-cabecera"],["mat-cell","",1,"font-test",3,"click"],["mat-header-cell","",1,"font-cabecera"],["mat-cell",""],["mat-icon-button","","color","primary",3,"click"],["mat-header-row",""],["mat-row",""],["fxLayout","row wrap","fxLayoutGap","16px",1,"producto-form",3,"formGroupName"],["appearance","fill","fxFlex","40"],["type","text","matInput","","formControlName","producto",3,"matAutocomplete"],[3,"optionSelected"],["appearance","fill","fxFlex","20"],["matInput","","formControlName","cantidad","type","number"],["matInput","","formControlName","total","type","number"],["fxFlex","10",1,"delete-button"],["mat-icon-button","","color","warn",3,"click"]],template:function(i,o){if(i&1){let d=b();r(0,"mat-card",2)(1,"mat-card-title",3),m(2,"Cotizaciones"),n(),r(3,"div",4)(4,"form",5)(5,"div",6)(6,"mat-form-field",7)(7,"mat-label"),m(8,"Buscar por C\xF3digo de Pedido"),n(),r(9,"input",8),p("input",function(P){return g(d),_(o.applyFilter(P,"idcotizacion"))}),n()(),r(10,"mat-form-field",7)(11,"mat-label"),m(12,"Buscar por Estado de Pago"),n(),r(13,"mat-select",9),p("selectionChange",function(P){return g(d),_(o.applyFilter(P,"estado"))}),r(14,"mat-option",10),m(15,"Todos"),n(),u(16,qo,2,2,"mat-option",11),n()(),r(17,"mat-form-field",7)(18,"mat-label"),m(19,"Digita el dni"),n(),r(20,"input",12),p("input",function(P){return g(d),_(o.applyFilter(P,"nombrecliente"))}),n()(),r(21,"mat-form-field",7)(22,"mat-label"),m(23,"Fecha de emision"),n(),r(24,"input",13),p("dateChange",function(P){return g(d),_(o.applyFilter(P,"fechaemision"))}),n(),f(25,"mat-datepicker-toggle",14)(26,"mat-datepicker",null,0),n(),r(28,"button",15),p("click",function(){return g(d),_(o.resetFilters())}),m(29,"Reset"),n()()(),r(30,"div",16)(31,"table",17),E(32,18),u(33,Qo,2,0,"th",19)(34,Zo,2,1,"td",20),S(),E(35,21),u(36,Yo,2,0,"th",19)(37,Jo,2,1,"td",20),S(),E(38,22),u(39,Ko,2,0,"th",19)(40,Wo,2,1,"td",20),S(),E(41,23),u(42,Xo,2,0,"th",19)(43,en,2,1,"td",20),S(),E(44,24),u(45,tn,2,0,"th",19)(46,on,2,1,"td",20),S(),E(47,25),u(48,nn,2,0,"th",19)(49,an,3,6,"td",20),S(),E(50,26),u(51,rn,2,0,"th",19)(52,ln,3,4,"td",20),S(),E(53,27),u(54,mn,2,0,"th",19)(55,cn,2,1,"td",20),S(),E(56,28),u(57,dn,2,0,"th",19)(58,sn,3,6,"td",20),S(),E(59,29),u(60,pn,2,0,"th",19)(61,un,3,6,"td",20),S(),E(62,30),u(63,fn,2,0,"th",19)(64,gn,2,1,"td",20),S(),E(65,31),u(66,_n,2,0,"th",32)(67,Cn,7,0,"td",33),S(),u(68,hn,1,0,"tr",34)(69,bn,1,0,"tr",35),n()(),f(70,"mat-paginator",36),n(),r(71,"mat-card",2)(72,"mat-card-title"),m(73,"Registrar Cotizaci\xF3n"),n(),r(74,"form",37)(75,"mat-form-field",38)(76,"mat-label"),m(77,"ID Cotizaci\xF3n"),n(),f(78,"input",39),n(),r(79,"mat-form-field",38)(80,"mat-label"),m(81,"ID Empleado"),n(),f(82,"input",40),n(),r(83,"mat-form-field",38)(84,"mat-label"),m(85,"Estado"),n(),r(86,"mat-select",41),u(87,xn,2,2,"mat-option",11),n()(),r(88,"mat-form-field",38)(89,"mat-label"),m(90,"Nombre Cliente"),n(),f(91,"input",42),n(),r(92,"mat-form-field",38)(93,"mat-label"),m(94,"Monto Producto"),n(),f(95,"input",43),n(),r(96,"mat-form-field",38)(97,"mat-label"),m(98,"Fecha Emisi\xF3n"),n(),f(99,"input",44),n(),r(100,"mat-form-field",38)(101,"mat-label"),m(102,"DNI"),n(),f(103,"input",45),n(),r(104,"mat-form-field",38)(105,"mat-label"),m(106,"Email"),n(),f(107,"input",46),n(),r(108,"mat-form-field",38)(109,"mat-label"),m(110,"Monto Impuesto"),n(),f(111,"input",47),n(),r(112,"mat-form-field",38)(113,"mat-label"),m(114,"Monto Total"),n(),f(115,"input",48),n(),r(116,"mat-form-field",38)(117,"mat-label"),m(118,"Departamento"),n(),r(119,"mat-select",49),u(120,vn,2,2,"mat-option",11),n()(),r(121,"div",50)(122,"h1")(123,"strong"),m(124,"Detalles"),n()(),r(125,"div",51),u(126,Sn,21,5,"div",52),n()(),r(127,"div",53)(128,"button",54),p("click",function(){return g(d),_(o.addDetalle())}),m(129,"Nuevo "),r(130,"mat-icon"),m(131,"add"),n()()()(),r(132,"div",53)(133,"button",55),p("click",function(){return g(d),_(o.calculateTotal())}),m(134,"Agregar Producto (s)"),n()(),r(135,"div",53)(136,"button",56),p("click",function(){return g(d),_(o.onSave())}),m(137,"Guardar"),n(),r(138,"button",57),p("click",function(){return g(d),_(o.onCancel())}),m(139,"Cancelar"),n()()()()}if(i&2){let d=F(27);c(4),s("formGroup",o.filterForm),c(12),s("ngForOf",o.estados),c(8),s("matDatepicker",d),c(),s("for",d),c(6),s("dataSource",o.dataSource),c(37),s("matHeaderRowDef",o.displayedColumns),c(),s("matRowDefColumns",o.displayedColumns),c(),s("pageSizeOptions",le(13,Ho)),c(4),s("formGroup",o.cotizacionForm),c(13),s("ngForOf",o.estados),c(33),s("ngForOf",o.departamentos),c(6),s("ngForOf",o.detalles.controls),c(2),s("disabled",!o.isNewButtonEnabled)}},dependencies:[L,Q,U,rt,H,q,Z,Y,lt,mt,j,G,K,J,se,$e,B,Le,W,ae,pe,ct,ue,ge,be,_e,fe,xe,Ce,he,ve,Ee,X,Se,we,Pe,Fe,O,Me,D,de,Ft,Ne],styles:[".mat-card-title[_ngcontent-%COMP%]{font-size:1.5rem;color:#3f51b5;text-align:center}.mat-mdc-row[_ngcontent-%COMP%]   .mat-mdc-cell[_ngcontent-%COMP%]{border-bottom:1px solid transparent;border-top:1px solid transparent;cursor:pointer}.mat-mdc-row[_ngcontent-%COMP%]:hover   .mat-mdc-cell[_ngcontent-%COMP%]{border-color:currentColor}.demo-row-is-clicked[_ngcontent-%COMP%]{font-weight:700}.full-width-table[_ngcontent-%COMP%]{width:100%;overflow:auto}.mat-elevation-z8[_ngcontent-%COMP%]{padding:16px}mat-icon[_ngcontent-%COMP%]{font-size:1em}.titulo[_ngcontent-%COMP%]{font-family:Kanit,sans-serif;padding:16px}.font-test[_ngcontent-%COMP%]{font-family:Courier Prime,monospace;font-weight:500;font-style:normal}.font-cabecera[_ngcontent-%COMP%]{font-family:Oxygen,sans-serif;font-weight:700;font-style:normal}.filters-container[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-bottom:10px;gap:16px}.filters[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:16px;max-width:800px}.mat-form-field[_ngcontent-%COMP%]{flex:1;min-width:200px}@media (max-width: 600px){.filters[_ngcontent-%COMP%]{flex-direction:column;align-items:center}.mat-form-field[_ngcontent-%COMP%]{min-width:100%}}.responsive-table-container[_ngcontent-%COMP%]{width:100%;overflow-x:auto}.full-width-table[_ngcontent-%COMP%]{width:100%;table-layout:auto;margin-bottom:24px}mat-cell[_ngcontent-%COMP%]{word-wrap:break-word;white-space:normal}.product-list[_ngcontent-%COMP%]{margin-top:20px}.producto-form[_ngcontent-%COMP%]{display:flex;gap:10px;align-items:center;margin-bottom:10px}.full-width[_ngcontent-%COMP%]{grid-column:span 2}.product-form-card[_ngcontent-%COMP%]{width:100%;margin:20px auto;padding:20px;box-shadow:0 2px 10px #0000001a}.product-form-grid[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:16px}.product-list-container[_ngcontent-%COMP%]{margin-top:20px;padding:20px;box-shadow:0 2px 10px #0000001a;width:100%}.action-buttons[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-top:20px}.delete-button[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}"]});let t=a;return t})();function Pn(t,a){t&1&&oe(0)}function Fn(t,a){if(t&1&&(r(0,"div"),u(1,Pn,1,0,"ng-container",8),n()),t&2){C();let l=F(9);c(),s("ngTemplateOutlet",l)}}function Mn(t,a){t&1&&oe(0)}function Tn(t,a){if(t&1&&(r(0,"div"),u(1,Mn,1,0,"ng-container",8),n()),t&2){C();let l=F(11);c(),s("ngTemplateOutlet",l)}}function yn(t,a){t&1&&oe(0)}function zn(t,a){if(t&1&&(r(0,"div"),u(1,yn,1,0,"ng-container",8),n()),t&2){C();let l=F(13);c(),s("ngTemplateOutlet",l)}}function On(t,a){t&1&&f(0,"app-form-cotizacion")}function Dn(t,a){if(t&1){let l=b();r(0,"app-tabla-cotizacion",9),p("emitirIdDeCotizacion",function(i){g(l);let o=C();return _(o.navigateToClientes(i))})("navigateToPedidos",function(i){g(l);let o=C();return _(o.onNavigateToPedidos(i))}),n()}}function kn(t,a){if(t&1){let l=b();r(0,"app-form-pedido",10),p("emitirDatosFact",function(i){g(l);let o=C();return _(o.onNavigateToFacturas(i))}),n()}if(t&2){let l=C();s("idCotizacion",l.idCotizacion)("dni",l.dni)}}var mi=(()=>{let a=class a{constructor(e,i){this.fb=e,this.router=i,this.seleccionado=new ie,this.irAlSide=new ie,this.selectedTab=1,this.selectOption="",this.idCotizacion="",this.dni="",this.tabs=[{label:"Generar Cotizacion",route:"/ventas/pedidos/generarCotizacion"},{label:"Cotizaciones",route:"/ventas/pedidos/cotizaciones"},{label:"Pedidos",route:"/ventas/pedidos/pedidos"}]}ngOnInit(){}onTabSelected(e){this.selectOption=e,console.log(`Navigating to ${e}`)}seleccionarTab(e){this.seleccionado.emit(e)}onNavigateToPedidos(e){this.idCotizacion=e.idcotizacion,this.dni=e.dni,this.onTabSelected("/ventas/pedidos/pedidos"),this.seleccionarTab({label:"Pedidos",route:"/ventas/pedidos/pedidos"})}onNavigateToFacturas(e){let i=e.idpedido,o=e.fechaentrega,d=`/home/ventas/facturas/${i}/${o.toISOString().split("T")[0]}`;this.router.navigate([d])}navigateToClientes(e){let o=`/home/ventas/clientes/${e}`;this.router.navigate([o])}};a.\u0275fac=function(i){return new(i||a)(v(z),v(Tt))},a.\u0275cmp=y({type:a,selectors:[["app-page-pedido"]],outputs:{seleccionado:"seleccionado",irAlSide:"irAlSide"},decls:14,vars:7,consts:[["nuevaCotizacionZone",""],["tablaCotizacionZone",""],["pedidosZone",""],[1,"main-content"],[1,"tab-container"],[3,"tabSelected","tabs","tabForaneo"],[1,"tab-content"],[4,"ngIf"],[4,"ngTemplateOutlet"],[3,"emitirIdDeCotizacion","navigateToPedidos"],[3,"emitirDatosFact","idCotizacion","dni"]],template:function(i,o){if(i&1){let d=b();r(0,"div",3)(1,"div",4)(2,"app-tab-bar",5),T(3,"async"),p("tabSelected",function(P){return g(d),_(o.onTabSelected(P))}),n(),r(4,"div",6),u(5,Fn,2,1,"div",7)(6,Tn,2,1,"div",7)(7,zn,2,1,"div",7),n()()(),u(8,On,1,0,"ng-template",null,0,ne)(10,Dn,1,0,"ng-template",null,1,ne)(12,kn,1,2,"ng-template",null,2,ne)}i&2&&(c(2),s("tabs",o.tabs)("tabForaneo",me(3,5,o.seleccionado)),c(3),s("ngIf",o.selectOption==="/ventas/pedidos/generarCotizacion"),c(),s("ngIf",o.selectOption==="/ventas/pedidos/cotizaciones"),c(),s("ngIf",o.selectOption==="/ventas/pedidos/pedidos"))},dependencies:[Ve,Ie,Be,ai,ri,li,de],styles:[".main-content[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;margin-left:250px;margin-top:0}.tab-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin:20px 40px}.tab-content[_ngcontent-%COMP%]{padding:20px;background:#fff;width:calc(100% - 20px);margin:auto;border-radius:12px}.product-form-card[_ngcontent-%COMP%]{width:100%;height:500px;margin:20px auto;padding-left:50px;background-color:#fff;box-shadow:0 0 #1010101a}.product-form-grid[_ngcontent-%COMP%]{margin-top:25px;display:grid;grid-template-columns:repeat(4,1fr);gap:12px;width:95%}mat-form-field[_ngcontent-%COMP%]{width:100%;height:75px}mat-card-title[_ngcontent-%COMP%]{margin-top:1px}.formulario[_ngcontent-%COMP%]{display:flex;flex-direction:column}.button-detalle[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#8a8d8bcc;width:200px;font-size:17px;color:#fff;height:52px;border-radius:8px;border:none;cursor:pointer;transition:background-color .3s,transform .3s}.button-detalle[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#626564cc;transform:translateY(-2px)}.button-detalle[_ngcontent-%COMP%]   button[disabled][_ngcontent-%COMP%]{background-color:#9da2a0cc;cursor:not-allowed}.button-container[_ngcontent-%COMP%]{margin-left:100px;background-color:#0ff;margin-top:20px;width:500px}.button-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:10px;width:20%;height:50px;font-size:17px;background-color:#45b385cc;color:#fff;border:none;border-radius:4px;cursor:pointer;transition:background-color .3s,transform .3s;margin-right:50px}.button-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#378c68cc;transform:translateY(-2px)}.button-container[_ngcontent-%COMP%]   button[disabled][_ngcontent-%COMP%]{background-color:#45b385cc;cursor:not-allowed}"]});let t=a;return t})();var Vn=[{path:"clientes",component:wt},{path:"clientes/:idcoti",component:wt},{path:"pedidos",component:mi},{path:"facturas",component:vt},{path:"facturas/:idpedido/:fechaentrega",component:vt}],ci=(()=>{let a=class a{};a.\u0275fac=function(i){return new(i||a)},a.\u0275mod=Xe({type:a}),a.\u0275inj=We({imports:[ft.forChild(Vn),ft]});let t=a;return t})();var Er=(()=>{let a=class a{};a.\u0275fac=function(i){return new(i||a)},a.\u0275mod=Xe({type:a}),a.\u0275inj=We({imports:[Mt,ci,Vt,It,Kt,Dt,Nt,Zt,At,Rt,$t,Gt,Ot,Lt,jt,Bt,Jt,Ut,zt,Wt,Yt,Ht,Qt,qt]});let t=a;return t})();export{Er as VentasModule};
