import{B as st,Ba as Ht,Ca as Qt,D as pt,E as _t,G as gt,H as ut,I as ft,J as Ct,K as xt,L as ht,M as Et,N as Mt,O as St,P as Pt,Q as vt,R as wt,S as bt,T as j,U as Tt,V as yt,W as kt,X as It,Z as Dt,ba as Ot,ca as I,da as Vt,ea as Rt,fa as D,ga as zt,h as et,o as it,oa as Bt,q as ot,r as nt,ra as $t,s as at,sa as jt,t as rt,ta as Lt,u as dt}from"./chunk-QKGNWLHQ.js";import"./chunk-RGNDWIHZ.js";import{v as lt,w as mt,x as ct,y as Ft,z as At}from"./chunk-4FASO6NX.js";import{d as tt}from"./chunk-VZNS2HMS.js";import{c as W,p as F,q as X}from"./chunk-CFYZAOOI.js";import{Cb as l,Db as a,Eb as k,Fb as x,G as b,Gb as h,Hb as N,Ib as f,Lb as C,Nb as p,Sb as V,Tb as R,Tc as Z,Ub as z,Uc as G,Vb as U,Wb as d,Xc as K,Yb as s,Za as m,Zc as J,_a as M,ca as H,da as T,ec as Y,ha as A,ic as S,jc as B,kc as $,mc as q,na as Q,oa as y,qb as _,r as v,sb as E,v as w,va as g,wa as u}from"./chunk-5A5ZOIWX.js";var Nt=(()=>{let e=class e{constructor(i){this.httpClient=i,this.URL=X.api_pedido}getPedidosEnviar(i){return this.httpClient.get(`${this.URL}/pedido/pedidosenviar/${i}`).pipe(w(o=>(console.log("Respuesta completa de la API: ",o),o)),b(o=>{alert("Error de conexion");let{status:r,statusText:c}=o;return console.log("Algo paso revisar",[r,c]),v([])}))}updatePedidosEnTransito(i,o){return this.httpClient.post(`${this.URL}/pedido/actualizarAEnTransito`,{pedidos:i,idEmpleado:o}).pipe(w(r=>(console.log("Pedidos actualizados: ",r),r)),b(r=>{alert("Error de conexion");let{status:c,statusText:P}=r;return console.log("Algo paso revisar",[c,P]),v({msg:"Error al actualizar pedidos"})}))}marcarPedidoEntregado(i,o,r){return this.httpClient.post(`${this.URL}/pedido/pedidoEntregado`,{pedidos:i,idpedido:o,idEmpleado:r}).pipe(w(c=>(console.log("Pedido actualizado: ",c),c)),b(c=>{alert("Error de conexion");let{status:P,statusText:O}=c;return console.log("Algo paso revisar",[P,O]),v({msg:"Error al actualizar pedidos"})}))}};e.\u0275fac=function(o){return new(o||e)(A(W))},e.\u0275prov=H({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var Zt=()=>[5,10,20];function Gt(t,e){t&1&&N(0)}function Kt(t,e){if(t&1&&(l(0,"div"),_(1,Gt,1,0,"ng-container",6),a()),t&2){p();let n=U(6);m(),E("ngTemplateOutlet",n)}}function Jt(t,e){t&1&&(l(0,"th",30),d(1," C\xF3digo "),a())}function Wt(t,e){if(t&1){let n=f();l(0,"td",31),C("click",function(){let o=g(n).$implicit,r=p(2);return u(r.onRowClicked(o))}),d(1),a()}if(t&2){let n=e.$implicit;m(),s(" ",n.idPedido," ")}}function Xt(t,e){t&1&&(l(0,"th",30),d(1," Pedido "),a())}function te(t,e){if(t&1){let n=f();l(0,"td",31),C("click",function(){let o=g(n).$implicit,r=p(2);return u(r.onRowClicked(o))}),d(1),a()}if(t&2){let n=e.$implicit;m(),s(" ",n.idCotizacion," ")}}function ee(t,e){t&1&&(l(0,"th",30),d(1," idCliente "),a())}function ie(t,e){if(t&1){let n=f();l(0,"td",31),C("click",function(){let o=g(n).$implicit,r=p(2);return u(r.onRowClicked(o))}),d(1),a()}if(t&2){let n=e.$implicit;m(),s(" ",n.idCliente," ")}}function oe(t,e){t&1&&(l(0,"th",30),d(1," Metodo pago "),a())}function ne(t,e){if(t&1){let n=f();l(0,"td",31),C("click",function(){let o=g(n).$implicit,r=p(2);return u(r.onRowClicked(o))}),d(1),a()}if(t&2){let n=e.$implicit,i=p(2);m(),s(" ",i.getMetodoPago(n.idMetodoPago)," ")}}function ae(t,e){t&1&&(l(0,"th",30),d(1," Estado Envio "),a())}function re(t,e){if(t&1){let n=f();l(0,"td",31),C("click",function(){let o=g(n).$implicit,r=p(2);return u(r.onRowClicked(o))}),d(1),a()}if(t&2){let n=e.$implicit,i=p(2);m(),s(" ",i.getEstadoEnvio(n.idEstadoEnvio)," ")}}function de(t,e){t&1&&(l(0,"th",30),d(1," Codigo empleado "),a())}function le(t,e){if(t&1){let n=f();l(0,"td",31),C("click",function(){let o=g(n).$implicit,r=p(2);return u(r.onRowClicked(o))}),d(1),a()}if(t&2){let n=e.$implicit;m(),s(" ",n.idEmpleado," ")}}function me(t,e){t&1&&(l(0,"th",30),d(1," Fecha de entrega"),a())}function ce(t,e){if(t&1){let n=f();l(0,"td",31),C("click",function(){let o=g(n).$implicit,r=p(2);return u(r.onRowClicked(o))}),d(1),S(2,"date"),a()}if(t&2){let n=e.$implicit;m(),s(" ",$(2,1,n.fechaEntrega,"dd/MM/yyyy")," ")}}function se(t,e){t&1&&(l(0,"th",30),d(1," Fecha de emision "),a())}function pe(t,e){if(t&1){let n=f();l(0,"td",31),C("click",function(){let o=g(n).$implicit,r=p(2);return u(r.onRowClicked(o))}),d(1),S(2,"date"),a()}if(t&2){let n=e.$implicit;m(),s(" ",$(2,1,n.fechaEmision,"dd/MM/yyyy")," ")}}function _e(t,e){t&1&&(l(0,"th",32),d(1," Actions "),a())}function ge(t,e){t&1&&(l(0,"td",33)(1,"button",34)(2,"mat-icon"),d(3,"view_list"),a()()())}function ue(t,e){t&1&&k(0,"tr",35)}function fe(t,e){t&1&&k(0,"tr",36)}function Ce(t,e){if(t&1){let n=f();l(0,"mat-card")(1,"mat-card-title",37),d(2,"Detalles del Pedido Seleccionado"),a(),l(3,"mat-card-content",38)(4,"p")(5,"strong"),d(6,"C\xF3digo:"),a(),d(7),a(),l(8,"p")(9,"strong"),d(10,"Pedido:"),a(),d(11),a(),l(12,"p")(13,"strong"),d(14,"Cliente:"),a(),d(15),a(),l(16,"p")(17,"strong"),d(18,"M\xE9todo de Pago:"),a(),d(19),a(),l(20,"p")(21,"strong"),d(22,"Estado de Env\xEDo:"),a(),d(23),a(),l(24,"p")(25,"strong"),d(26,"Transportista:"),a(),d(27),a(),l(28,"p")(29,"strong"),d(30,"Fecha de Entrega:"),a(),d(31),S(32,"date"),a(),l(33,"p")(34,"strong"),d(35,"Fecha de Emisi\xF3n:"),a(),d(36),S(37,"date"),a()(),l(38,"mat-card-actions")(39,"button",39),C("click",function(){g(n);let o=p(2);return u(o.pedidoEntregado())}),d(40,"Pedido Entregado"),a()()()}if(t&2){let n=p(2);m(7),s(" ",n.idpedido,""),m(4),s(" ",n.idcotizacion,""),m(4),s(" ",n.idcliente,""),m(4),s(" ",n.metodopago,""),m(4),s(" ",n.estadoenvio,""),m(4),s(" ",n.idempleado,""),m(4),s(" ",B(32,8,n.fechaentrega),""),m(5),s(" ",B(37,10,n.fechaemision),"")}}function xe(t,e){if(t&1){let n=f();l(0,"mat-card")(1,"div",7)(2,"div",8)(3,"button",9),C("click",function(){g(n);let o=p();return u(o.iniciarEnvio())}),d(4,"Iniciar env\xEDo"),a()()(),l(5,"mat-card-title",10),d(6,"Pedidos"),a(),l(7,"div",11)(8,"div",12)(9,"table",13),x(10,14),_(11,Jt,2,0,"th",15)(12,Wt,2,1,"td",16),h(),x(13,17),_(14,Xt,2,0,"th",15)(15,te,2,1,"td",16),h(),x(16,18),_(17,ee,2,0,"th",15)(18,ie,2,1,"td",16),h(),x(19,19),_(20,oe,2,0,"th",15)(21,ne,2,1,"td",16),h(),x(22,20),_(23,ae,2,0,"th",15)(24,re,2,1,"td",16),h(),x(25,21),_(26,de,2,0,"th",15)(27,le,2,1,"td",16),h(),x(28,22),_(29,me,2,0,"th",15)(30,ce,3,4,"td",16),h(),x(31,23),_(32,se,2,0,"th",15)(33,pe,3,4,"td",16),h(),x(34,24),_(35,_e,2,0,"th",25)(36,ge,4,0,"td",26),h(),_(37,ue,1,0,"tr",27)(38,fe,1,0,"tr",28),a()(),k(39,"mat-paginator",29),a()(),_(40,Ce,41,12,"mat-card",5)}if(t&2){let n=p();m(9),E("dataSource",n.dataSource),m(28),E("matHeaderRowDef",n.displayedColumns),m(),E("matRowDefColumns",n.displayedColumns),m(),E("pageSizeOptions",Y(5,Zt)),m(),E("ngIf",n.idpedido)}}var Ut=(()=>{let e=class e{constructor(i,o,r,c){this.fb=i,this.snackBar=o,this.pedidoService=r,this.profileService=c,this.metodosP=[{idMetodoPago:1,metodo:"Efectivo"},{idMetodoPago:2,metodo:"BBVA"},{idMetodoPago:3,metodo:"ScotiaBank"},{idMetodoPago:4,metodo:"BCP"},{idMetodoPago:5,metodo:"PayPal"}],this.estadosE=[{idEstadoEnvio:1,estado:"En preparaci\xF3n"},{idEstadoEnvio:2,estado:"En transito"},{idEstadoEnvio:3,estado:"Entregado"},{idEstadoEnvio:4,estado:"Listo para enviar"}],this.selectedTab=1,this.selectOption="",this.pedidos=[],this.idEmpleado="",this.tabs=[{label:"Seguimiento de pedidos",route:"/seguimiento/start"}],this.dataSource=new j,this.displayedColumns=["idpedido","idcotizacion","idcliente","metodopago","estadoenvio","idempleado","fechaentrega","fechaemision"]}ngOnInit(){this.loadPedidosListosYEnTransito()}onTabSelected(i){this.selectOption=i,console.log(this.selectOption)}pedidoEntregado(){this.loadIDEmpleado(),this.pedidoService.marcarPedidoEntregado(this.pedidos,this.idpedido,this.idEmpleado).subscribe(i=>{console.log("Pedido entregado:",i),console.log("Enviando id de trams: ",this.idEmpleado),this.snackBar.open("Pedidos actualizados a En tr\xE1nsito","Cerrar",{duration:3e3}),this.loadPedidosListosYEnTransito()},i=>{console.error("Error al actualizar pedidos:",i),this.snackBar.open("Error al actualizar pedidos","Cerrar",{duration:3e3})}),this.idpedido=""}iniciarEnvio(){this.loadIDEmpleado(),this.pedidoService.updatePedidosEnTransito(this.pedidos,this.idEmpleado).subscribe(i=>{console.log("Pedidos actualizados:",i),this.snackBar.open("Pedidos actualizados a En tr\xE1nsito","Cerrar",{duration:3e3}),this.loadPedidosListosYEnTransito()},i=>{console.error("Error al actualizar pedidos:",i),this.snackBar.open("Error al actualizar pedidos","Cerrar",{duration:3e3})})}loadIDEmpleado(){this.idEmpleado=this.profileService.getIdEmpleado()}loadPedidosListosYEnTransito(){this.pedidoService.getPedidosEnviar(localStorage.getItem("idempleado")).subscribe(i=>{console.log("Pedidos recibidos:  ",i),this.pedidos=i,this.dataSource=new j(this.pedidos),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort})}onRowClicked(i){this.idpedido=i.idPedido,this.idcotizacion=i.idCotizacion,this.idcliente=i.idCliente,this.metodopago=this.getMetodoPago(i.idMetodoPago),this.estadoenvio=this.getEstadoEnvio(i.idEstadoEnvio),this.idempleado=i.idEmpleado,this.fechaentrega=i.fechaEntrega,this.fechaemision=i.fechaEmision,console.log("Pedido seleccionado: ",this.idpedido)}getEstadoEnvio(i){let o=this.estadosE.find(r=>r.idEstadoEnvio===i);return o?o.estado:"Desconocido"}getMetodoPago(i){let o=this.metodosP.find(r=>r.idMetodoPago===i);return o?o.metodo:"Desconocido"}getIdMetodoPago(i){console.log("Metodos de pago: ",i);let o=this.metodosP.find(r=>r.metodo===i);return o?o.idMetodoPago:(console.warn(`M\xE9todo de pago "${i}" no encontrado.`),0)}getIdEstadoEnvio(i){return this.estadosE.find(r=>r.estado===i).idEstadoEnvio}};e.\u0275fac=function(o){return new(o||e)(M(lt),M(jt),M(Nt),M(tt))},e.\u0275cmp=Q({type:e,selectors:[["app-page-seguimiento"]],viewQuery:function(o,r){if(o&1&&(V(D,5),V(I,5)),o&2){let c;R(c=z())&&(r.paginator=c.first),R(c=z())&&(r.sort=c.first)}},decls:7,vars:2,consts:[["newFacturaZone",""],[1,"main-content"],[1,"tab-container"],[3,"tabSelected","tabs"],[1,"tab-content"],[4,"ngIf"],[4,"ngTemplateOutlet"],[1,"product-form-card"],[1,"action-buttons"],["mat-raised-button","","color","primary",3,"click"],[1,"titulo"],[1,"mat-elevation-z8"],[1,"responsive-table-container"],["mat-table","","matSort","",1,"full-width-table",3,"dataSource"],["matColumnDef","idpedido"],["class","font-cabecera","mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["class","font-test","mat-cell","",3,"click",4,"matCellDef"],["matColumnDef","idcotizacion"],["matColumnDef","idcliente"],["matColumnDef","metodopago"],["matColumnDef","estadoenvio"],["matColumnDef","idempleado"],["matColumnDef","fechaentrega"],["matColumnDef","fechaemision"],["matColumnDef","actions"],["class","font-cabecera","mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","",3,"pageSizeOptions"],["mat-header-cell","","mat-sort-header","",1,"font-cabecera"],["mat-cell","",1,"font-test",3,"click"],["mat-header-cell","",1,"font-cabecera"],["mat-cell",""],["mat-icon-button","","color","primary"],["mat-header-row",""],["mat-row",""],[1,"Detalles"],[1,"detallesped"],["mat-raised-button","","color","accent",3,"click"]],template:function(o,r){if(o&1){let c=f();l(0,"div",1)(1,"div",2)(2,"app-tab-bar",3),C("tabSelected",function(O){return g(c),u(r.onTabSelected(O))}),a(),l(3,"div",4),_(4,Kt,2,1,"div",5),a()()(),_(5,xe,41,6,"ng-template",null,0,q)}o&2&&(m(2),E("tabs",r.tabs),m(2),E("ngIf",r.selectOption==="/seguimiento/start"))},dependencies:[Z,G,ot,rt,at,nt,_t,gt,ft,xt,St,ht,Ct,Pt,Et,Mt,vt,wt,Tt,I,Vt,D,Ft,K],styles:[".main-content[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;margin-left:250px;margin-top:0}.responsive-table-container[_ngcontent-%COMP%]{width:100%;overflow-x:auto}.tab-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin:20px 40px}.tab-content[_ngcontent-%COMP%]{padding:20px;background:#fff;width:calc(100% - 20px);margin:auto;border-radius:12px;color:#333;font-family:Roboto,sans-serif}.mat-card-title[_ngcontent-%COMP%]{font-size:1.5rem;color:#3f51b5;text-align:center}.mat-mdc-row[_ngcontent-%COMP%]   .mat-mdc-cell[_ngcontent-%COMP%]{border-bottom:1px solid transparent;border-top:1px solid transparent;cursor:pointer}.mat-mdc-row[_ngcontent-%COMP%]:hover   .mat-mdc-cell[_ngcontent-%COMP%]{border-color:currentColor}.demo-row-is-clicked[_ngcontent-%COMP%]{font-weight:700}@Media (max-width: 100%){.full-width-table{width:100%;overflow:auto}.mat-elevation-z8{padding:16px}}mat-icon[_ngcontent-%COMP%]{font-size:1em}.titulo[_ngcontent-%COMP%]{font-family:Kanit,sans-serif;padding:16px}.font-test[_ngcontent-%COMP%]{font-family:Courier Prime,monospace;font-weight:500;font-style:normal}.font-cabecera[_ngcontent-%COMP%]{font-family:Oxygen,sans-serif;font-weight:700;font-style:normal}.filters-container[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-bottom:30px}.filters[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:16px;max-width:800px}.mat-form-field[_ngcontent-%COMP%]{flex:1;min-width:200px}@media (max-width: 600px){.filters[_ngcontent-%COMP%]{flex-direction:column;align-items:center}.mat-form-field[_ngcontent-%COMP%]{min-width:100%}}.full-width-table[_ngcontent-%COMP%]{width:100%;margin-bottom:24px}.product-form-card[_ngcontent-%COMP%]{width:100%;margin:20px auto;padding:20px}.product-form-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(300px,1fr));gap:16px;width:100%}.action-buttons[_ngcontent-%COMP%]{margin-top:20px;display:flex;justify-content:space-between}mat-card[_ngcontent-%COMP%]{background:none!important;box-shadow:none!important;padding:0!important;margin:0!important;border:none!important}.Detalles[_ngcontent-%COMP%]{margin-top:50px;margin-left:10px}.detallesped[_ngcontent-%COMP%]{margin-top:30px;padding-bottom:30px}"]});let t=e;return t})();var he=[{path:"seguimiento",component:Ut}],Yt=(()=>{let e=class e{};e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=y({type:e}),e.\u0275inj=T({imports:[F.forChild(he),F]});let t=e;return t})();var pi=(()=>{let e=class e{};e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=y({type:e}),e.\u0275inj=T({imports:[J,Yt,mt,ct,dt,st,$t,pt,ut,bt,Dt,it,yt,It,kt,Ht,Ot,et,Qt,Lt,Rt,Bt,zt,At]});let t=e;return t})();export{pi as TransportistaModule};
